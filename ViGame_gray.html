<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ViGame</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f0f0f0; }
        h1, h2, h3 { margin: 20px 0; text-align: center; }
        .container { max-width: 800px; margin: auto; padding: 20px; background: white; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        .menu-buttons { display: flex; flex-direction: column; gap: 15px; margin-top: 20px; }
        .menu-buttons button { font-size: 18px; padding: 15px; border: none; border-radius: 8px; cursor: pointer; }
        button.rate {
    background-color: #ffc107; /* –¶–≤–µ—Ç –∫–Ω–æ–ø–∫–∏ */
    color: white;
    font-size: 18px;
    padding: 15px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.2s ease;
}

button.rate:hover {
    background-color: #e0a800; /* –ë–æ–ª–µ–µ —Ç—ë–º–Ω—ã–π —Ü–≤–µ—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    transform: scale(1.05); /* –õ—ë–≥–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ */
}
         .menu-buttons {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-top: 20px;
    }

    .menu-buttons button {
        font-size: 18px;
        padding: 15px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
    }

    .social-settings {
    background: #f9f9f9;
    padding: 20px;
    margin-top: 30px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    text-align: center;
    }

    .promo {
        background-color: #2196f3;
        color: white;
    }

    .rate {
        background-color: #ffc107;
        color: white;
    }

    .back {
        background-color: #9e9e9e;
        color: white;
    }
        button.play { background-color: #4caf50; color: white; }
        button.promo { background-color: #2196f3; color: white; }
        button.shop { background-color: #9c27b0; color: white; }
        button.profile { background-color: #e91e63; color: white; }
        button.change-name { background-color: #00bcd4; color: white; }
        button.back { background-color: #9e9e9e; color: white; }
        button:hover { opacity: 0.9; }
        .hidden { display: none; }
        .answers button { margin: 10px; padding: 10px 20px; font-size: 18px; border: none; background-color: #4caf50; color: white; border-radius: 5px; cursor: pointer; }
        .answers button:hover { background-color: #45a049; }
        .cards-container { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; justify-items: center; }
        .cards-container {
    display: grid;
    grid-template-columns: repeat(4, 1fr); /* –û—Å—Ç–∞–≤–ª—è–µ–º 4 –∫–∞—Ä—Ç—ã –≤ —Ä—è–¥—É */
    gap: 8px; /* –£–º–µ–Ω—å—à–∞–µ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∫–∞—Ä—Ç–∞–º–∏ */
    justify-items: center;
}

.avatar-container {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    overflow: hidden;
    border: 2px solid #ccc;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}

#avatarImage {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.profile-header {
    display: flex;
    align-items: center;
    gap: 15px;
}

.favorite-star {
    position: absolute; /* –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º –∫ –∫–∞—Ä—Ç–æ—á–∫–µ */
    top: 2px; /* –ß—É—Ç—å –æ—Ç—Å—Ç—É–ø–∞–µ–º –æ—Ç –≤–µ—Ä—Ö–Ω–µ–≥–æ –∫—Ä–∞—è */
    right: 2px; /* –ß—É—Ç—å –æ—Ç—Å—Ç—É–ø–∞–µ–º –æ—Ç –ø—Ä–∞–≤–æ–≥–æ –∫—Ä–∞—è */
    font-size: 16px; /* –†–∞–∑–º–µ—Ä –∑–≤–µ–∑–¥—ã */
    color: gold; /* –¶–≤–µ—Ç –∑–≤–µ–∑–¥—ã */
    pointer-events: none; /* –£–±–∏—Ä–∞–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–ª–∏–∫–∞ */
}

#avatar-container {
    position: relative;
    width: 100px;
    height: 100px;
}

#avatar {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
    background-color: #f0f0f0; /* –°–µ—Ä—ã–π —Ñ–æ–Ω –Ω–∞ —Å–ª—É—á–∞–π –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ñ–æ—Ç–æ */
    border: 2px solid black; /* –¢–æ–Ω–∫–∞—è —á—ë—Ä–Ω–∞—è –æ–±–≤–æ–¥–∫–∞ */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* –õ—ë–≥–∫–∞—è —Ç–µ–Ω—å */
}

#avatar-placeholder {
    display: none; /* –°–∫—Ä—ã–≤–∞–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
    position: absolute;
    top: 50%; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç */
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 12px; /* –ú–µ–ª–∫–∏–π, —É—é—Ç–Ω—ã–π —à—Ä–∏—Ñ—Ç */
    color: #777; /*s*/
    text-align: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç */
    line-height: 1.2; /* –ö—Ä–∞—Å–∏–≤—ã–π –æ—Ç—Å—Ç—É–ø –º–µ–∂–¥—É —Å—Ç—Ä–æ–∫–∞–º–∏ */
    pointer-events: none; /* –¢–µ–∫—Å—Ç –Ω–µ –±—É–¥–µ—Ç –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º */
}

#profile-carousel-wrapper {
    overflow-x: auto !important;
    position: unset !important;
}

#profile-carousel {
    display: flex;
    flex-wrap: nowrap;
    gap: 20px;
    overflow-x: auto;
    scroll-behavior: unset !important;
    -webkit-overflow-scrolling: touch;
}

.progress-card.profile-card {
    min-width: 250px;
}

h4 {
    font-size: 24px; /* –†–∞–∑–º–µ—Ä –º–µ–Ω—å—à–µ, —á–µ–º —É –ø—Ä–∏–º–µ—Ä–∞ */
    color: #777; /* –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π —Ü–≤–µ—Ç */
    margin-bottom: 10px; /* –û—Ç—Å—Ç—É–ø –æ—Ç —Å–ª–æ–≤–∞ –¥–æ –ø—Ä–∏–º–µ—Ä–∞ */
    text-align: center;
}

#math-question {
    font-size: 48px; /* –ö—Ä—É–ø–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è —Å–∞–º–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞ */
    font-weight: bold; /* –ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç */
    color: #333; /* –¢–µ–º–Ω—ã–π —Ü–≤–µ—Ç */
    text-align: center;
    margin: 20px 0; /* –û—Ç—Å—Ç—É–ø—ã —Å–≤–µ—Ä—Ö—É –∏ —Å–Ω–∏–∑—É */
}

.shop-card {
    flex: 0 0 auto; /* –ö–∞—Ä—Ç–æ—á–∫–∏ –≤—ã—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ –ª–∏–Ω–∏—é */
    width: 200px;
    padding: 20px;
    background: white;
    border-radius: 15px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    text-align: center;
    font-family: Arial, sans-serif;
    position: relative;
}

.shop-card h3 {
    font-size: 18px;
    margin-bottom: 10px;
}

.shop-card .price {
    font-size: 20px;
    font-weight: bold;
    margin-bottom: 15px;
}

.shop-card .price.red {
    color: red;
}

.shop-card button {
    font-size: 16px;
    padding: 10px 20px;
    background: #4caf50;
    color: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.shop-card button:hover {
    background: #45a049;
}

.shop-card button.disabled {
    background: gray;
    cursor: not-allowed;
}

#shop-carousel {
    display: flex;
    flex-wrap: nowrap;
    gap: 20px;
    overflow-x: auto;
}

.card {
    width: 70px; /* –£–º–µ–Ω—å—à–∞–µ–º —à–∏—Ä–∏–Ω—É –∫–∞—Ä—Ç—ã */
    height: 90px; /* –£–º–µ–Ω—å—à–∞–µ–º –≤—ã—Å–æ—Ç—É –∫–∞—Ä—Ç—ã */
    background: lightgray;
    border-radius: 8px;
    font-size: 18px; /* –£–º–µ–Ω—å—à–∞–µ–º —Ä–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞ */
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
}

.card.matched {
    background: #4caf50;
    color: white;
    pointer-events: none;
}

.card.flipped {
    pointer-events: none;
}

.hidden {
    display: none;
}

.discount-comment {
    position: absolute;
    top: 10px;
    left: 10px;
    background: rgba(255, 0, 0, 0.8);
    color: white;
    font-size: 12px;
    padding: 5px 10px;
    border-radius: 5px;
    font-weight: bold;
}

.progress-card {
    width: 100%;
    max-width: 300px;
    margin: 20px auto;
    padding: 15px;
    background: white;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    text-align: center;
}

.progress-bar {
    width: 100%;
    height: 20px;
    background: #ddd;
    border-radius: 10px;
    overflow: hidden;
    margin: 10px 0;
    position: relative;
}

.progress-fill {
    height: 100%;
    width: 0%;
    background: #4caf50;
    transition: width 0.3s ease;
}

#artifact-alert {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.8);
    transition: opacity 0.3s ease, transform 0.3s ease;
}

#artifact-alert-overlay {
    opacity: 0;
    transition: opacity 0.3s ease;
}

#artifacts-container {
    display: grid;
    grid-template-columns: repeat(5, 1fr); /* 5 –∫–∞—Ä—Ç–æ—á–µ–∫ –≤ —Ä—è–¥ */
    gap: 8px; /* –ü—Ä–æ–º–µ–∂—É—Ç–∫–∏ –º–µ–∂–¥—É –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ */
    justify-items: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
    padding: 10px; /* –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
}

.artifact-card {
    width: 50px; /* –ú–∞–ª–µ–Ω—å–∫–∞—è —à–∏—Ä–∏–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ */
    height: 50px; /* –ú–∞–ª–µ–Ω—å–∫–∞—è –≤—ã—Å–æ—Ç–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ */
    background-color: white; /* –ë–µ–ª—ã–π —Ñ–æ–Ω –∫–∞—Ä—Ç–æ—á–∫–∏ */
    border: 2px solid lightgray; /* –°–µ—Ä–∞—è –æ–±–≤–æ–¥–∫–∞ –¥–ª—è –∑–∞–∫—Ä—ã—Ç—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ */
    border-radius: 4px; /* –õ—ë–≥–∫–æ–µ —Å–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É–≥–ª–æ–≤ */
    display: flex;
    align-items: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
    justify-content: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
    font-size: 15px; /* –ù–µ–±–æ–ª—å—à–æ–π —Ç–µ–∫—Å—Ç */
    color: black; /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
    cursor: pointer;
    transition: border-color 0.3s, transform 0.2s;
}

.artifact-card:hover {
    transform: scale(1.1); /* –õ—ë–≥–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
}

.artifact-card.open {
    border-color: gold; /* –ñ—ë–ª—Ç–∞—è –æ–±–≤–æ–¥–∫–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ */
}

.favorite-star {
    position: absolute; /* –ê–±—Å–æ–ª—é—Ç–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ */
    top: 0; /* –ü—Ä–∏–∂–∏–º–∞–µ–º –∫ —Å–∞–º–æ–º—É –≤–µ—Ä—Ö—É */
    right: 0; /* –ü—Ä–∏–∂–∏–º–∞–µ–º –∫ —Å–∞–º–æ–º—É –ø—Ä–∞–≤–æ–º—É –∫—Ä–∞—é */
    padding: 5px; /* –ù–µ–º–Ω–æ–≥–æ –æ—Ç—Å—Ç—É–ø–æ–≤ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –∫–ª–∏–∫–∞ */
    font-size: 16px; /* –†–∞–∑–º–µ—Ä –∑–≤–µ–∑–¥—ã */
    color: black; /* –¶–≤–µ—Ç –∑–≤–µ–∑–¥—ã */
    cursor: pointer; /* –£–∫–∞–∑–∞—Ç–µ–ª—å –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    display: none; /* –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∫—Ä—ã—Ç–æ */
}

.artifact-card.open .favorite-star {
    display: block; /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–≤–µ–∑–¥—É —Ç–æ–ª—å–∫–æ –Ω–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –∫–∞—Ä—Ç–æ—á–∫–∞—Ö */
}

#policy-modal {
    display: none;
}

#overlay {
    display: none;
}

#music-buttons {
    display: flex;
    justify-content: center;
    gap: 10px; /* –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ */
    margin-top: 20px;
}

#music-buttons button {
    font-size: 16px;
    padding: 10px 15px; /* –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã */
    border: none;
    border-radius: 5px;
    cursor: pointer;
    flex: 1; /* –†–∞—Å—Ç—è–≥–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ */
    max-width: 100px; /* –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –∫–Ω–æ–ø–∫–∏ */
    transition: background-color 0.3s ease;
}

#music-buttons button:nth-child(1) {
    background-color: #ff5722; /* –ö—Ä–∞—Å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ */
    color: white;
}

#music-buttons button:nth-child(2) {
    background-color: #4caf50; /* –ó–µ–ª—ë–Ω–∞—è –∫–Ω–æ–ø–∫–∞ */
    color: white;
}

#music-buttons button:nth-child(3) {
    background-color: #2196f3; /* –°–∏–Ω—è—è –∫–Ω–æ–ø–∫–∞ */
    color: white;
}

#music-buttons button:disabled {
    background-color: #ccc; /* –°–µ—Ä—ã–π —Ñ–æ–Ω –¥–ª—è –æ—Ç–∫–ª—é—á—ë–Ω–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫ */
    color: #888;
    cursor: not-allowed;
}

#flower-answers button {
    font-size: 20px;
    padding: 15px;
    border: none;
    border-radius: 8px;
    background-color: #4caf50; /* –ó–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç */
    color: white;
    cursor: pointer;
    width: 100%; /* –ö–Ω–æ–ø–∫–∏ –±—É–¥—É—Ç —Ä–∞—Å—Ç—è–≥–∏–≤–∞—Ç—å—Å—è –Ω–∞ –≤–µ—Å—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
    text-align: center;
    margin-bottom: 10px; /* –û—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: background-color 0.3s ease, transform 0.2s ease;
}

#flower-answers button:hover {
    background-color: #45a049; /* –ë–æ–ª–µ–µ —Ç–µ–º–Ω—ã–π –∑–µ–ª–µ–Ω—ã–π –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    transform: scale(1.05); /* –õ–µ–≥–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ */
}

/* –û–±—â–µ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –¥–ª—è –∏–≥—Ä—ã "–ù–∞—Ö–æ–¥–∫–∞" */
#emoji-container {
    display: grid;
    grid-template-columns: repeat(8, 1fr); /* 8 –∫–æ–ª–æ–Ω–æ–∫ */
    grid-template-rows: repeat(8, 1fr); /* 8 —Ä—è–¥–æ–≤ */
    gap: 5px;
    justify-items: center;
    align-items: center;
    margin-top: 20px;
}

#emoji-container span {
    font-size: 24px;
    cursor: pointer;
    user-select: none;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
}

button.locked {
    background-color: #f0f0f0; /* –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π —Ñ–æ–Ω */
    color: #c0c0c0; /* –°–µ—Ä—ã–π —Ç–µ–∫—Å—Ç */
    cursor: not-allowed; /* –ö—É—Ä—Å–æ—Ä "–∑–∞–ø—Ä–µ—â–µ–Ω–æ" */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* –õ—ë–≥–∫–∞—è —Ç–µ–Ω—å */
}

button.unlocked {
    background-color: #4caf50; /* –ó–µ–ª—ë–Ω—ã–π —Ñ–æ–Ω */
    color: white; /* –ë–µ–ª—ã–π —Ç–µ–∫—Å—Ç */
    cursor: pointer; /* –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –º—ã—à–∫–µ */
}

button.unlocked:hover {
    background-color: #45a049; /* –¢—ë–º–Ω–æ-–∑–µ–ª—ë–Ω—ã–π –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
}

button.locked:hover {
    background-color: #f0f0f0; /* –ù–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
}

button.find-difference {
    background-color: #ff9800; /* –û—Ä–∞–Ω–∂–µ–≤—ã–π */
    color: white;
}

button.find-difference:hover {
    background-color: #e68900;
    transform: scale(1.05);
}

label {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 15px;
}

label input {
    width: 20px;
    height: 20px;
    cursor: not-allowed;
}

label input:enabled {
    cursor: pointer;
}

#custom-alert-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    z-index: 999;
    display: none;
}

#programming-answers {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 2px; /* –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ */
}

#programming-answers button {
    font-size: 13px; /* –ß—É—Ç—å –±–æ–ª—å—à–µ, —á—Ç–æ–±—ã —Ç–µ–∫—Å—Ç —á–∏—Ç–∞–ª—Å—è */
    padding: 4px 6px; /* –£–º–µ–Ω—å—à–∞–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã */
    border-radius: 6px; /* –ó–∞–∫—Ä—É–≥–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ */
    width: auto; /* –ü—É—Å—Ç—å –∫–Ω–æ–ø–∫–∏ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –ø–æ–¥ —Ç–µ–∫—Å—Ç */
    min-width: 85px; /* –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ */
    height: 38px; /* –î–µ–ª–∞–µ–º –∫–Ω–æ–ø–∫–∏ –Ω–µ–º–Ω–æ–≥–æ –≤—ã—à–µ */
    text-align: center;
    white-space: nowrap; /* –ó–∞–ø—Ä–µ—â–∞–µ–º –ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫ */
}

/* –î–µ–ª–∞–µ–º –¥–≤—É—Ö–∫–ª–∞–≤–∏—à–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –∫—Ä—É–ø–Ω–µ–µ */
#programming-answers button:has(span:only-child) {
    font-size: 14px;
    min-width: 95px;
    height: 42px;
}

#custom-alert {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.8);
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 6px 15px rgba(0,0,0,0.3);
    z-index: 1000;
    display: none;
    text-align: center;
    width: 85%;
    max-width: 320px;
    opacity: 0;
    transition: opacity 0.3s ease, transform 0.3s ease;
}

#custom-alert .custom-alert-content {
    font-size: 18px;
    font-weight: bold;
}

#custom-alert button {
    margin-top: 12px;
    padding: 8px 18px;
    background: #4caf50;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 16px;
    transition: background 0.3s ease, transform 0.2s ease;
}

#custom-alert button:hover {
    background: #45a049;
    transform: scale(1.05);
}

.hidden { display: none; }

#balance-display {
    position: fixed;
    top: 10px;
    right: 20px;
    font-size: 16px; /* –ù–µ–º–Ω–æ–≥–æ —É–º–µ–Ω—å—à–∞–µ–º —Ç–µ–∫—Å—Ç */
    font-weight: bold;
    background: #2196f3;
    color: white;
    padding: 8px; /* –£–º–µ–Ω—å—à–∞–µ–º –æ—Ç—Å—Ç—É–ø—ã */
    border-radius: 8px;
}
        .version { font-size: 12px; text-align: center; margin-top: -10px; }
        #country-answers button {
    font-size: 20px;
    padding: 15px;
    border: none;
    border-radius: 8px;
    background-color: #4caf50; /* –ó–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç */
    color: white;
    cursor: pointer;
    width: 100%; /* –ö–Ω–æ–ø–∫–∏ –±—É–¥—É—Ç —Ä–∞—Å—Ç—è–≥–∏–≤–∞—Ç—å—Å—è –Ω–∞ –≤–µ—Å—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
    text-align: center;
    margin-bottom: 10px; /* –û—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: background-color 0.3s ease, transform 0.2s ease;
}

#country-answers button:hover {
    background-color: #45a049; /* –ë–æ–ª–µ–µ —Ç–µ–º–Ω—ã–π –∑–µ–ª–µ–Ω—ã–π –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    transform: scale(1.05); /* –õ–µ–≥–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
}

#snake-grid div {
    transition: background-color 0.2s, transform 0.2s; /* –ü–ª–∞–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è */
}

    </style>
</head>
<body>
<div id="overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.6); z-index: 999;"></div>
    <div id="balance-display">$: <span id="balance">0</span> | <span id="multipliers" style="margin-left: 5px; font-weight: bold;">X: <span id="multiplier-count">0</span></span> | <span id="settings-icon" style="cursor: pointer; margin-left: 10px;">‚öôÔ∏è</span>
</div>

    <h1 style="display: flex; flex-direction: column; align-items: flex-start; margin-left: 20px;">
        ViGame
        <span class="version" style="font-size: 12px; margin-top: 5px; margin-left: 0;">version 2.1.0</span>
    </h1>

    <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
<div id="main-menu" class="container">
    <div id="loading-screen" style="
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: #f0f0f0; display: flex; flex-direction: column;
    align-items: center; justify-content: center; font-size: 24px;
    font-weight: bold; z-index: 9999;">
    ‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...
</div>
    <div class="menu-buttons">
        <button class="promo" onclick="showScreen('game-menu'); updateGameMenu()">üéÆ –ò–≥—Ä—ã</button>
        <button class="promo" onclick="showScreen('gift-menu')">üéÅ –ü–æ–¥–∞—Ä–æ–∫ –¥–ª—è –¥—Ä—É–≥–∞ ‚ù§Ô∏è</button>
        <button class="promo" onclick="showScreen('artifacts-menu')">üîÆ –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã</button>
        <button class="profile" onclick="showScreen('profile')">üë§ –ü—Ä–æ—Ñ–∏–ª—å</button>
        <button class="shop" onclick="showScreen('shop')">üõí –ú–∞–≥–∞–∑–∏–Ω</button>
        <h2>–ü—Ä–æ—á–µ–µ</h2>
        <button class="rate" onclick="showScreen('rate-menu')">‚≠ê –û—Ü–µ–Ω–∏—Ç—å</button>
    </div>
</div>

    <!-- –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã -->
<div id="artifacts-menu" class="container hidden" style="padding: 10px;">
    <h2 style="font-size: 18px; margin-bottom: 10px;">üîÆ –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã</h2>
    <div id="artifacts-container"></div>
    <button class="back" onclick="showScreen('main-menu')" style="margin-top: 10px; font-size: 14px; padding: 8px 15px;">üîô –ù–∞–∑–∞–¥</button>
</div>

    <!-- –ú–µ–Ω—é –∏–≥—Ä -->
<div id="game-menu" class="container hidden">
    <h2>üéÆ –í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä—É</h2>
    <div class="menu-buttons">
        <button id="math-game-btn" onclick="showScreen('math-mode-menu')">üßÆ –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</button>
        <button id="flowers-game-btn" class="locked" onclick="startFlowersGame()">üå∏ –¶–≤–µ—Ç—ã</button>
        <button id="music-game-btn" class="locked" onclick="startMusicGame()">üéµ –ú—É–∑—ã–∫–∞</button>
        <button id="memory-game-btn" class="locked" onclick="startMemoryGame()">üÉè –ó–∞–ø–æ–º–∏–Ω–∞–ª–∫–∞</button>
        <button id="programming-game-btn" class="locked" onclick="startProgrammingGame()">üíª –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞</button>
        <button id="snake-game-btn" class="locked" onclick="startSnakeGame()">üêç –ó–º–µ–π–∫–∞</button>
        <button id="fish-game-btn" class="locked" onclick="startFishGame()">üêü –†—ã–±–∫–∞</button>
        <button id="pong-game-btn" class="locked" onclick="startPongGame()">üèê –ü–æ–Ω–≥</button>
        <button id="english-game-btn" class="locked" onclick="startEnglishGame()">üìö –ê–Ω–≥–ª–∏–π—Å–∫–∏–π</button>
        <button id="countries-game-btn" class="locked" onclick="startCountriesGame()">üåç –°—Ç—Ä–∞–Ω—ã</button>
        <button id="find-difference-btn" class="locked" onclick="startFindDifferenceGame()">üîç –ù–∞—Ö–æ–¥–∫–∞</button>
        <button id="chemistry-game-btn" class="locked" onclick="startChemistryGame()">üí° –•–∏–º–∏—è</button>
        <button class="back" onclick="showScreen('main-menu')">üîô –ù–∞–∑–∞–¥</button> <!-- –ö–Ω–æ–ø–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ -->
    </div>
</div>

<!-- –ú–µ–Ω—é –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è -->
<div id="programming-game" class="container hidden">
    <h2>üíª –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞</h2>
    <h3>‚è≥ –í—Ä–µ–º—è: <span id="programming-timer">10</span> —Å–µ–∫</h3>
    <h3><span id="programming-question"></span></h3>
    <div class="answers" id="programming-answers"></div>
    <button class="back" onclick="endProgrammingGame()">üîô –ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É</button>
</div>

    <!-- –ú–µ–Ω—é –ü–æ–Ω–≥–∞ -->
<div id="pong-game-screen" class="container hidden">
    <h2>üèê –ü–æ–Ω–≥</h2>
    <canvas id="pong-canvas" width="300" height="400" style="display: block; margin: auto; background: black;"></canvas>
    <input type="range" id="pong-slider" min="0" max="100" value="50" style="width: 100%; margin-top: 10px;">
    <p>–û—Ç—Å–∫–æ–∫–æ–≤: <span id="pong-score">0</span></p>
    <button class="back" onclick="endPongGame()">üîô –í—ã–π—Ç–∏</button>
</div>

    <!-- –ú–µ–Ω—é –ú—É–∑—ã–∫–∏ --->
<div id="music-game" class="container hidden">
    <h2>üéµ –ú—É–∑—ã–∫–∞</h2>
    <p id="music-prompt">–ü—Ä–∏–≥–æ—Ç–æ–≤—å—Ç–µ—Å—å...</p>
    <div id="music-buttons">
        <button onclick="playMusicButton('low')">–ù–∏–∑–∫–∞—è</button>
        <button onclick="playMusicButton('mid')">–°—Ä–µ–¥–Ω—è—è</button>
        <button onclick="playMusicButton('high')">–í—ã—Å–æ–∫–∞—è</button>
    </div>
    <button class="back" onclick="endMusicGame()">üîô –ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É</button>
</div>

    <!-- –ú–µ–Ω—é –ø–æ–¥–∞—Ä–∫–æ–≤ -->
<div id="gift-menu" class="container hidden" style="max-width: 700px; padding: 30px; box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15); border-radius: 10px; margin-top: 50px;">
    <h2 style="font-size: 30px; margin-bottom: 25px;">üéÅ –ü–æ–¥–∞—Ä–æ–∫ –¥–ª—è –¥—Ä—É–≥–∞</h2>

    <div style="display: flex; justify-content: center; gap: 30px; flex-wrap: wrap;">
        <button onclick="showScreen('send-gift')" 
                style="padding: 15px 30px; font-size: 20px; border-radius: 8px; background-color: #4caf50; color: white; border: none; cursor: pointer; transition: background-color 0.3s;">
            üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫
        </button>
        <button onclick="showScreen('receive-gift')" 
                style="padding: 15px 30px; font-size: 20px; border-radius: 8px; background-color: #2196f3; color: white; border: none; cursor: pointer; transition: background-color 0.3s;">
            üì• –ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫
        </button>
    </div>

    <button class="back" onclick="showScreen('main-menu')" 
            style="margin-top: 30px; padding: 12px 25px; font-size: 18px; border-radius: 8px; background-color: #9e9e9e; color: white; border: none; cursor: pointer; transition: background-color 0.3s;">
        üîô –ù–∞–∑–∞–¥
    </button>
</div>

<!-- –ú–µ–Ω—é –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥–∞—Ä–∫–∞ -->
<div id="receive-gift" class="container hidden" style="max-width: 600px; padding: 30px; box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15); border-radius: 10px; margin-top: 50px;">
    <h2 style="font-size: 28px;">–ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫</h2>
    <label for="gift-code" style="font-size: 18px; margin-top: 15px; display: block;">–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥:</label>
    <input type="text" id="gift-code" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥" 
           style="width: 100%; padding: 12px; font-size: 16px; margin-top: 10px; border: 1px solid #ccc; border-radius: 6px;">
    <button onclick="activateGiftPromo()" 
            style="padding: 12px 25px; font-size: 18px; margin-top: 25px; border-radius: 8px; background-color: #4caf50; color: white; border: none; cursor: pointer;">
        –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
    </button>
    <p id="gift-receive-result" style="margin-top: 15px; color: green; font-size: 16px;"></p>
    <button class="back" onclick="showScreen('gift-menu')" 
            style="margin-top: 25px; padding: 12px 25px; font-size: 18px; border-radius: 8px; background-color: #9e9e9e; color: white; border: none; cursor: pointer;">
        üîô –ù–∞–∑–∞–¥
    </button>
</div>

    <!-- –ú–µ–Ω—é –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ–¥–∞—Ä–∫–∞ -->
<div id="send-gift" class="container hidden" style="max-width: 600px; padding: 30px; box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15); border-radius: 10px; margin-top: 50px;">
    <h2 style="font-size: 28px;">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫</h2>
    <label for="gift-points" style="font-size: 18px; margin-top: 15px; display: block;">–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤:</label>
    <input type="number" id="gift-points" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 100" 
           style="width: 100%; padding: 12px; font-size: 16px; margin-top: 10px; border: 1px solid #ccc; border-radius: 6px;">
    <button onclick="sendGiftPromo()" 
            style="padding: 12px 25px; font-size: 18px; margin-top: 25px; border-radius: 8px; background-color: #fbc02d; color: white; border: none; cursor: pointer;">
        –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥
    </button>
    <p id="gift-result" style="margin-top: 15px; color: green; font-size: 16px;"></p>
    <button class="back" onclick="showScreen('gift-menu')" 
            style="margin-top: 25px; padding: 12px 25px; font-size: 18px; border-radius: 8px; background-color: #9e9e9e; color: white; border: none; cursor: pointer;">
        üîô –ù–∞–∑–∞–¥
    </button>
</div>

    <!-- –ú–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
<div id="settings-menu" class="container hidden">
    <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
    <div class="menu-buttons">
        <button class="promo" onclick="showImportExport()">üì§ –ò–º–ø/–≠–∫—Å.</button>
        <button class="promo" onclick="showAgreement()">üìú –ü–æ–ª–∏—Ç–∏–∫–∞ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è</button>
    </div>

    <div class="social-settings">
        <h3>–°–æ—Ü-—Å–µ—Ç–∏</h3>
        <button class="promo" onclick="window.open('https://t.me/ViGame_official', '_blank')">üóûÔ∏è –¢–µ–ª–µ–≥—Ä–∞–º</button>
    </div>

    <div class="menu-buttons">
        <button class="back" onclick="showScreen('main-menu')">üîô –ù–∞–∑–∞–¥</button>
    </div>
</div>

<!-- –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ —Ñ–æ–Ω–∞ -->
<div id="overlay" class="hidden" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.6); z-index: 999;"></div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–ª–∏—Ç–∏–∫–∏ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è -->
<div id="agreement-modal" class="container hidden" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90%; max-width: 700px; z-index: 1000; background: white; border-radius: 10px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);">
    <h2>–£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ViGame</h2>
    <div style="text-align: left; max-height: 400px; overflow-y: auto; padding: 20px;">
        <p>1. –í–≤–µ–¥–µ–Ω–∏–µ<br>
            ViGame ‚Äî —ç—Ç–æ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∏–≥—Ä–∞ —Å –º–∏–Ω–∏-–∏–≥—Ä–∞–º–∏, —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–º–ø–æ—Ä—Ç–∞/—ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö. –ù–∞—Å—Ç–æ—è—â–∏–µ —É—Å–ª–æ–≤–∏—è –æ–ø–∏—Å—ã–≤–∞—é—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–≥—Ä—ã, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø—Ä–æ—Ñ–∏–ª–µ–º –∏ —Ä–∞–±–æ—Ç—ã —Å –≤–Ω—É—Ç—Ä–∏–∏–≥—Ä–æ–≤—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏.
        </p>
        <p>2. –ü—Ä–æ—Ñ–∏–ª—å –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö<br>
            –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞—é—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–º–µ–Ω–∏ –∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–≤–∞—Ç–∞—Ä–∞. –ü—Ä–æ–≥—Ä–µ—Å—Å –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.<br>
            –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —á–∞—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞–Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è, –≤ —Å–ª—É—á–∞–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞.
        </p>
        <p>3. –ò–≥—Ä–æ–≤–æ–π –ø—Ä–æ—Ü–µ—Å—Å –∏ –±–∞–ª–∞–Ω—Å<br>
            –ò–≥—Ä–∞ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è —Å–∏—Å—Ç–µ–º—É –±–∞–ª–ª–æ–≤ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞, –∫–æ—Ç–æ—Ä—ã–µ —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç—Å—è –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –º–∏–Ω–∏-–∏–≥—Ä—ã –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ç—Ä–µ–±—É—é—Ç –ø–æ–∫—É–ø–∫–∏ –∑–∞ –≤–Ω—É—Ç—Ä–∏–∏–≥—Ä–æ–≤—É—é –≤–∞–ª—é—Ç—É.<br>
            –í—Å—Ç—Ä–æ–µ–Ω—ã –±–æ–Ω—É—Å—ã –∏ –º—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä—ã, —É—Å–∫–æ—Ä—è—é—â–∏–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞.
        </p>
        <p>4. –ü—Ä–æ–º–æ–∫–æ–¥—ã –∏ –ø–æ–¥–∞—Ä–∫–∏<br>
            –ò–≥—Ä–æ–∫–∏ –º–æ–≥—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥—ã –∏ –¥–µ–ª–∏—Ç—å—Å—è –∏–º–∏ —Å –¥—Ä—É–∑—å—è–º–∏ –∏–ª–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –∫–æ–¥—ã. –ü—Ä–æ–º–æ–∫–æ–¥—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ Telegram –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –æ–¥–∏–Ω —Ä–∞–∑.
        </p>
        <p>5. –≠–∫—Å–ø–æ—Ä—Ç –∏ –∏–º–ø–æ—Ä—Ç –ø—Ä–æ—Ñ–∏–ª—è<br>
            –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å —Å –ø–æ–º–æ—â—å—é API-–∫–ª—é—á–∞ —á–µ—Ä–µ–∑ Telegram-–±–æ—Ç. –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤–æ–∑–º–æ–∂–µ–Ω —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –∏ —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ API-–∫–ª—é—á–∞.
        </p>
        <p>6. –°–±–æ—Ä –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö<br>
            –ü—Ä–∏ –æ–±—ã—á–Ω–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∏–≥—Ä—ã –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è (–≤–∫–ª—é—á–∞—è –∞–≤–∞—Ç–∞—Ä, –∏–º—è, –ø—Ä–æ–≥—Ä–µ—Å—Å) –º–æ–≥—É—Ç –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞–Ω—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Å–ª—É—á–∞–µ —É—Ç—Ä–∞—Ç—ã.<br>
            –í—Å–µ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è –Ω—É–∂–¥ –∏–≥—Ä—ã –∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º.
        </p>
        <p>7. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å<br>
            –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∏–ª–∏ –ø–æ–ø—ã—Ç–∫–∏ –≤–∑–ª–æ–º–∞ –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ—Ç–µ—Ä–µ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ –ø—Ä–æ—Ñ–∏–ª—è.<br>
            –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ –Ω–µ—Å–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –ø–æ—Ç–µ—Ä—é –¥–∞–Ω–Ω—ã—Ö –∏–∑-–∑–∞ —Å–±–æ–µ–≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
        </p>
        <p>8. –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å<br>
            –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –æ—Å—Ç–∞–≤–ª—è—Ç—å –æ—Ç–∑—ã–≤—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –∏–≥—Ä—ã. –û—Ç–∑—ã–≤—ã –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É —á–µ—Ä–µ–∑ Telegram-–±–æ—Ç.
        </p>
        <p>9. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —É—Å–ª–æ–≤–∏—è—Ö<br>
            –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞ —Å–æ–±–æ–π –ø—Ä–∞–≤–æ –∏–∑–º–µ–Ω—è—Ç—å —É—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è. –û–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±—É–¥—É—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω—ã —á–µ—Ä–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–≥—Ä—ã.
        </p>
    </div>
    <button class="back" style="margin: 20px auto; display: block;" onclick="closeAgreement()">üîô –ó–∞–∫—Ä—ã—Ç—å</button>
</div>

<!-- –ú–µ–Ω—é –ò–º–ø–æ—Ä—Ç/–≠–∫—Å–ø–æ—Ä—Ç -->
<div id="import-export-menu" class="container hidden">
    <h2>üì§ –ò–º–ø–æ—Ä—Ç / –≠–∫—Å–ø–æ—Ä—Ç</h2>
    <div class="menu-buttons">
        <button class="promo" onclick="exportData()">üì§ –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
        <button class="promo" onclick="promptImport()">üì• –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
    </div>
    <p id="export-result" style="margin-top: 10px; color: green;"></p>
    <p id="import-result" style="margin-top: 10px; color: red;"></p>
    <div class="menu-buttons">
        <button class="back" onclick="showScreen('settings-menu')">üîô –ù–∞–∑–∞–¥</button>
    </div>
</div>

    <!-- –û—Ü–µ–Ω–∫–∞ --->
    <div id="rate-menu" class="container hidden">
        <h2>–û—Ü–µ–Ω–∏—Ç–µ –Ω–∞—Å</h2>
        <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –æ—Ü–µ–Ω–∫—É:</p>
    <div class="star-rating" id="star-rating">
        <span data-stars="1">‚òÜ</span>
        <span data-stars="2">‚òÜ</span>
        <span data-stars="3">‚òÜ</span>
        <span data-stars="4">‚òÜ</span>
        <span data-stars="5">‚òÜ</span>
    </div>
        <textarea id="user-comment" placeholder="–û—Å—Ç–∞–≤—å—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–ø–æ –∂–µ–ª–∞–Ω–∏—é)" style="width: 100%; margin-top: 10px; padding: 10px; font-size: 16px; border-radius: 8px; border: 1px solid #ccc;"></textarea>
        <button class="promo" onclick="submitRating()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        <button class="back" onclick="showScreen('main-menu')">üîô –ù–∞–∑–∞–¥</button>
</div>

    <!-- –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ -->
    <div id="math-game" class="container hidden">
        <h2>–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</h2>
        <h3>–í—Ä–µ–º—è: <span id="math-timer">10</span> —Å–µ–∫</h3>
        <h4 style="font-size: 24px; text-align: center; color: #777; margin-bottom: 10px;">–ü—Ä–∏–º–µ—Ä:</h4>
<h3 id="math-question" style="font-size: 48px; text-align: center; font-weight: bold; margin: 20px 0; color: #333;"></h3>
        <div class="answers" id="math-answers"></div>
        <button class="back" onclick="endMathGame()">üîô –ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É</button>
    </div>

      <!-- –ò–≥—Ä–∞: –ó–∞–ø–æ–º–∏–Ω–∞–ª–∫–∞ -->
    <div id="memory-game" class="container hidden">
        <h2>–ó–∞–ø–æ–º–∏–Ω–∞–ª–∫–∞</h2>
        <p>–í—Ä–µ–º—è: <span id="memory-timer">60</span> —Å–µ–∫</p>
        <div class="cards-container" id="cards-container"></div>
        <p>–ü–∞—Ä –Ω–∞–π–¥–µ–Ω–æ: <span id="memory-pairs-found">0</span></p>
        <button class="back" onclick="endMemoryGame()">üîô –ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É</button>
    </div>

      <!---–ê–Ω–≥–ª–∏–π—Å–∫–∏–π--->
    <div id="english-game" class="container hidden">
        <h2>üìö –ê–Ω–≥–ª–∏–π—Å–∫–∏–π</h2>
        <h3>–í—Ä–µ–º—è: <span id="english-timer">10</span> —Å–µ–∫</h3>
        <h3>–°–ª–æ–≤–æ: <span id="english-question"></span></h3>
        <div class="answers" id="english-answers"></div>
        <button class="back" onclick="endEnglishGame()">üîô –ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É</button>
    </div>

    <!-- –ò–≥—Ä–∞: –¶–≤–µ—Ç—ã -->
<div id="flowers-game" class="container hidden">
    <h2>üå∏ –¶–≤–µ—Ç—ã</h2>
    <h3>‚è≥ –í—Ä–µ–º—è: <span id="flowers-timer">10</span> —Å–µ–∫</h3>
    <div id="flower-question" style="font-size: 150px; text-align: center;"></div> <!-- –≠–º–æ–¥–∑–∏ —Ü–≤–µ—Ç–∫–∞ -->
    <div class="answers" id="flower-answers"></div> <!-- –í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ -->
    <button class="back" onclick="endFlowersGame()">üîô –ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É</button>
</div>

    <!-- –ò–≥—Ä–∞: –°—Ç—Ä–∞–Ω—ã -->
<div id="countries-game" class="container hidden">
    <h2>üåç –°—Ç—Ä–∞–Ω—ã</h2>
    <h3>–í—Ä–µ–º—è: <span id="countries-timer">15</span> —Å–µ–∫</h3>
    <div id="countries-question" style="font-size: 150px; text-align: center;"></div>
    <div class="answers" id="countries-answers"></div>
    <button class="back" onclick="endCountriesGame()">üîô –ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É</button>
</div>

    <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
<div id="profile" class="container hidden">
    <h2>–í–∞—à –ø—Ä–æ—Ñ–∏–ª—å</h2>

    <!-- –ë–ª–æ–∫ —Å –∞–≤–∞—Ç–∞—Ä–æ–º –∏ –∏–º–µ–Ω–µ–º -->
    <div style="display: flex; align-items: center; gap: 20px;">
        <div id="avatar-container" style="position: relative; width: 100px; height: 100px;">
            <img id="avatar" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">
            <span id="avatar-placeholder" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 12px; color: #777; text-align: center;"></span>
        </div>
        <div>
            <p>–ò–º—è: <span id="nickname-display">–ò–≥—Ä–æ–∫</span></p>
            <div style="margin-top: 10px;">
                <button class="change-name" onclick="changeName()">‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å –∏–º—è</button>
                <button class="change-avatar" onclick="selectAvatar()">üì∑</button>
                <input type="file" id="avatar-input" accept="image/*" style="display: none;" onchange="updateAvatar(event)">
            </div>
        </div>
    </div>

    <p>–í–∞—à —Ç—ç–≥: <span id="player-tag"></span></p>

    <!-- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª –∫–∞—Ä—Ç–æ—á–µ–∫ -->
<div id="profile-carousel-wrapper" style="overflow-x: auto !important; position: unset !important;">
    <div id="profile-carousel" style="
        display: flex;
        flex-wrap: nowrap;
        gap: 20px;
        overflow-x: auto;
    ">
        <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º -->
        <div class="progress-card profile-card" style="min-width: 250px;">
            <h3 id="profile-status-display">–ö–∞–º–µ–Ω—å ü©∂</h3>
            <div class="progress-bar">
                <div id="progress-fill" class="progress-fill"></div>
            </div>
            <p id="progress-text">0/500</p>
        </div>

        <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ -->
<div id="unlocked-artifacts-card" class="progress-card profile-card" style="min-width: 250px;">
    <h3>–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã</h3>
    <div class="progress-bar">
        <div id="unlocked-progress-fill" class="progress-fill"></div>
    </div>
    <p id="unlocked-artifacts-count">0/0</p>
</div>

        <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ -->
        <div id="favorite-artifact-card" class="progress-card profile-card" style="min-width: 250px;">
            <h3>–ò–∑–±—Ä–∞–Ω–Ω—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç üåü</h3>
            <div id="favorite-artifact-content" style="
                display: flex;
                align-items: center;
                justify-content: center;
                height: 50px;
                font-size: 20px;
                font-weight: bold;">
                –ù–µ –≤—ã–±—Ä–∞–Ω
            </div>
        </div>
    </div>
</div>

    <!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ -->
    <button class="back" onclick="showScreen('main-menu')">üîô –ù–∞–∑–∞–¥</button>
</div>

    <!-- –°–∏–≥–º–∞ ---->
    <div id="shop" class="container hidden">
    <h2>üõí –ú–∞–≥–∞–∑–∏–Ω</h2>
    <div id="shop-carousel" style="display: flex; flex-wrap: nowrap; gap: 20px; overflow-x: auto; padding: 20px;">
        <!-- –ê–∫—Ü–∏–∏ –±—É–¥—É—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
    </div>
    <button class="back" onclick="showScreen('main-menu')">üîô –ù–∞–∑–∞–¥</button>
</div>

    <!-- –≠–∫—Ä–∞–Ω –∏–≥—Ä—ã "–ó–º–µ–π–∫–∞" -->
<div id="snake-game" class="container hidden">
    <h2>üêç –ó–º–µ–π–∫–∞</h2>
    <div id="snake-grid" style="display: grid; grid-template-columns: repeat(15, 1fr); gap: 2px; width: 300px; height: 300px; margin: 20px auto;"></div>
    <div style="display: flex; justify-content: center; gap: 10px; margin-top: 10px;">
        <button onclick="changeDirection('up')" style="width: 60px; height: 60px; font-size: 24px;">üîº</button>
    </div>
    <div style="display: flex; justify-content: center; gap: 10px;">
        <button onclick="changeDirection('left')" style="width: 60px; height: 60px; font-size: 24px;">‚óÄÔ∏è</button>
        <button onclick="changeDirection('down')" style="width: 60px; height: 60px; font-size: 24px;">üîΩ</button>
        <button onclick="changeDirection('right')" style="width: 60px; height: 60px; font-size: 24px;">‚ñ∂Ô∏è</button>
    </div>
    <button class="back" onclick="endSnakeGame()" style="margin-top: 20px;">üîô –ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É</button>
</div>

    <!---–≠–∫—Ä–∞–Ω "–†—ã–±–∫–∞"--->
<div id="fish-game-container" 
    class="hidden" 
    style="position: relative; 
           margin: 20px auto; 
           width: 90%; 
           max-width: 960px; 
           height: 540px; 
           overflow: hidden; 
           border: 2px solid black; 
           border-radius: 10px; 
           background-color: #f0f8ff;">
    <h2 style="margin: 10px; font-size: 24px;">üêü –†—ã–±–∫–∞</h2>
    <canvas id="fish-game-canvas" width="960" height="540"></canvas>
    <button class="back" 
            onclick="endFishGame()" 
            style="margin: 15px; 
                   padding: 10px 20px; 
                   font-size: 18px; 
                   color: white; 
                   background-color: #ff5722; 
                   border: none; 
                   border-radius: 5px; 
                   cursor: pointer;">
        üîô –í—ã–π—Ç–∏ –≤ –º–µ–Ω—é
    </button>
</div>

    <!-- –ù–æ–≤—ã–π –∫–∞—Å—Ç–æ–º–Ω—ã–π –∞–ª–µ—Ä—Ç –¥–ª—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ -->
<div id="artifact-alert-overlay" class="hidden" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.6); z-index: 999;"></div>

<div id="artifact-alert" class="hidden" style="
    position: fixed; 
    top: 50%; 
    left: 50%; 
    transform: translate(-50%, -50%); 
    background: white; 
    padding: 20px; 
    border-radius: 12px; 
    box-shadow: 0 6px 15px rgba(0,0,0,0.3); 
    z-index: 1000; 
    text-align: center; 
    width: 85%; 
    max-width: 320px;
">
    <h2 id="artifact-title" style="margin-bottom: 10px;"></h2>
    <p id="artifact-description" style="font-size: 14px; color: #555;"></p>
    
    <div id="artifact-buttons" style="margin-top: 15px;">
        <button id="favorite-btn" onclick="toggleFavoriteArtifact()" style="
            background: #4caf50; 
            color: white; 
            padding: 10px 20px; 
            border: none; 
            border-radius: 6px; 
            cursor: pointer;
            font-size: 16px;
            margin-right: 10px;
        ">–°–¥–µ–ª–∞—Ç—å –∏–∑–±—Ä–∞–Ω–Ω—ã–º</button>
        
        <button onclick="closeArtifactAlert()" style="
            background: #9e9e9e; 
            color: white; 
            padding: 10px 20px; 
            border: none; 
            border-radius: 6px; 
            cursor: pointer;
            font-size: 16px;
        ">–û–ö</button>
    </div>
</div>

    <!-- –ú–µ–Ω—é –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞ –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∏ -->
<div id="math-mode-menu" class="container hidden">
    <h2>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º:</h2>
    <div class="menu-buttons">
        <button onclick="startMathGame()">‚ûï –°–ª–æ–∂–µ–Ω–∏–µ</button>
        <button onclick="startMultiplicationGame()">‚úñÔ∏è –£–º–Ω–æ–∂–µ–Ω–∏–µ</button>
        <button onclick="startDivisionGame()">‚ûó –î–µ–ª–µ–Ω–∏–µ</button>
        <button class="back" onclick="showScreen('game-menu')">üîô –ù–∞–∑–∞–¥</button>
    </div>
</div>

    <!-- –≠–∫—Ä–∞–Ω –∏–≥—Ä—ã "–ù–∞—Ö–æ–¥–∫–∞" -->
<div id="find-difference-game" class="container hidden">
    <h2>üîç –ù–∞—Ö–æ–¥–∫–∞</h2>
    <p>‚è≥ –í—Ä–µ–º—è: <span id="find-difference-timer">30</span> —Å–µ–∫</p>
    <p>–ù–∞–π–¥–∏—Ç–µ –æ—Ç–ª–∏—á–∞—é—â–µ–µ—Å—è —ç–º–æ–¥–∑–∏!</p>
    <div id="emoji-container"></div>
    <button class="back" onclick="endFindDifferenceGame()">üîô –ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É</button>
</div>

    <!--- –≠–∫—Ä–∞–Ω –∏–≥—Ä—ã "–•–∏–º–∏—è" --->
<div id="chemistry-game" class="container hidden">
    <h2>üí° –•–∏–º–∏—è</h2>
    <h3>‚è≥ –í—Ä–µ–º—è: <span id="chemistry-timer">10</span> —Å–µ–∫</h3>
    <div id="chemistry-symbol" style="
        display: flex; 
        align-items: center; 
        justify-content: center; 
        width: 80px; 
        height: 80px; 
        margin: 20px auto; 
        border: 2px solid #333; 
        border-radius: 10px; 
        font-size: 32px; 
        font-weight: bold; 
        text-transform: uppercase; 
        background-color: #f9f9f9; 
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);">
    </div>
    <div id="chemistry-answers" class="answers"></div>
    <button class="back" onclick="endChemistryGame()">üîô –ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É</button>
</div>

    <script>
document.addEventListener("DOMContentLoaded", function() {
    console.log("DOMContentLoaded —Å—Ä–∞–±–æ—Ç–∞–ª!");

    loadProgress(); // –°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∂–∞–µ–º –≤–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å
    renderArtifacts(); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã

    setTimeout(() => { // –î–∞–µ–º –≤—Ä–µ–º—è –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É
        console.log("–í—ã–¥–∞–µ–º –∞—Ä—Ç–µ—Ñ–∞–∫—Ç '–û–ª–¥'!");
        unlockArtifact(27);
        localStorage.setItem("hasOldArtifact", "true");
        saveProgress();
        renderArtifacts();
    }, 3000); // 3 —Å–µ–∫—É–Ω–¥—ã –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É
});

    let isVictoryPlaying = false;

// –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–≥—Ä—ã
const gravity = 0.5; // –ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è
const lift = -7; // –°–∏–ª–∞ –ø–æ–¥—ä—ë–º–∞ –ø—Ä–∏ –ø—Ä—ã–∂–∫–µ
const maxVelocity = 10; // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –ø–∞–¥–µ–Ω–∏—è —Ä—ã–±–∫–∏
let fishGameUnlocked = false; // –ò–≥—Ä–∞ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
let fish; // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä—ã–±–∫–∏
let pipes; // –°–ø–∏—Å–æ–∫ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
let fishGameScore; // –°—á—ë—Ç –∏–≥—Ä—ã
let isGameOver; // –§–ª–∞–≥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–≥—Ä—ã
let isStarted; // –§–ª–∞–≥ —Å—Ç–∞—Ä—Ç–∞
let fishGameInterval;
let gradientPosition; // –î–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ —Ñ–æ–Ω–∞
let frameCount; // –°—á—ë—Ç—á–∏–∫ –∫–∞–¥—Ä–æ–≤

// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–Ω–≤–∞—Å–∞
const canvas = document.getElementById("fish-game-canvas");
const ctx = canvas.getContext("2d");

// –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
let timeSinceLastPipe = 0;
const pipeInterval = 100; // –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø–æ—è–≤–ª–µ–Ω–∏—è –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π (—É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —Ä–µ–∂–µ)

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–±—Ä–æ—Å–∞ –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–≥—Ä—ã
function resetGameParams() {
    fish = { x: 100, y: canvas.height / 2, size: 20, velocity: 0, angle: 0 }; // –°–±—Ä–æ—Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ä—ã–±–∫–∏
    pipes = []; // –°–ø–∏—Å–æ–∫ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
    fishGameScore = 0; // –°—á—ë—Ç –∏–≥—Ä—ã
    isGameOver = false; // –§–ª–∞–≥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–≥—Ä—ã
    isStarted = false; // –§–ª–∞–≥ —Å—Ç–∞—Ä—Ç–∞
    gradientPosition = 0; // –î–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ —Ñ–æ–Ω–∞
    frameCount = 0; // –°—á—ë—Ç—á–∏–∫ –∫–∞–¥—Ä–æ–≤
    console.clear(); // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Å–æ–ª—å –ø—Ä–∏ –Ω–æ–≤–æ–º –∑–∞–ø—É—Å–∫–µ
    console.log("–ò–≥—Ä–∞ —Å–±—Ä–æ—à–µ–Ω–∞: –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã.");
}

// –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
function startFishGame() {
    if (!fishGameUnlocked) {
        playErrorSound();
        showCustomAlert("–ò–≥—Ä–∞ '–†—ã–±–∫–∞' –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞! –ö—É–ø–∏—Ç–µ –µ—ë –≤ –º–∞–≥–∞–∑–∏–Ω–µ.");
        return;
    }

    document.querySelectorAll('.container').forEach(screen => screen.classList.add('hidden'));

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω "–†—ã–±–∫–∏"
    const fishGameContainer = document.getElementById('fish-game-container');
    fishGameContainer.classList.remove('hidden');

    cancelAnimationFrame(fishGameInterval); // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
    resetGameParams(); // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    showScreen("fish-game"); // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —ç–∫—Ä–∞–Ω –∏–≥—Ä—ã

    fishGameInterval = requestAnimationFrame(updateGame); // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
    canvas.addEventListener("click", handleJump); // –î–æ–±–∞–≤–ª—è–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
}

// –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã
function endFishGame() {
    if (isGameOver) return; // –ï—Å–ª–∏ –∏–≥—Ä–∞ —É–∂–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
    isGameOver = true; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

    cancelAnimationFrame(fishGameInterval); // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
    canvas.removeEventListener("click", handleJump); // –£–±–∏—Ä–∞–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
    showCustomAlert("–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!"); // –ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    playErrorSound();

    const fishGameContainer = document.getElementById('fish-game-container');
    fishGameContainer.classList.add('hidden'); // –°–∫—Ä—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –∏–≥—Ä—ã

    showScreen("game-menu"); // –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä—ã–∂–∫–∞ —Ä—ã–±–∫–∏
function handleJump() {
    if (!isStarted) isStarted = true; // –ü–µ—Ä–≤—ã–π –∫–ª–∏–∫ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∏–≥—Ä—É
    fish.velocity = lift; // –ü—Ä–∏–º–µ–Ω—è–µ–º –ø–æ–¥—ä—ë–º
    fandom();
}

// –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
function createPipe() {
    const gap = 175; // –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –≤–µ—Ä—Ö–Ω–∏–º –∏ –Ω–∏–∂–Ω–∏–º –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ–º
    const height = Math.random() * (canvas.height - gap - 50) + 25; // –°–ª—É—á–∞–π–Ω–∞—è –≤—ã—Å–æ—Ç–∞
    pipes.push({
        x: canvas.width, // –ù–∞—á–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
        top: height, // –í—ã—Å–æ—Ç–∞ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏
        bottom: height + gap, // –ù–∞—á–∞–ª–æ –Ω–∏–∂–Ω–µ–π —á–∞—Å—Ç–∏
        width: 50, // –®–∏—Ä–∏–Ω–∞ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
        passed: false, // –î–ª—è –ø–æ–¥—Å—á—ë—Ç–∞ –æ—á–∫–æ–≤
    });
}

// –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
function drawPipes() {
    pipes.forEach(pipe => {
        ctx.fillStyle = "#7f8c8d"; // –û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç
        ctx.fillRect(pipe.x, 0, pipe.width, pipe.top);
        ctx.fillRect(pipe.x, pipe.bottom, pipe.width, canvas.height - pipe.bottom);

        pipe.x -= 2; // –î–≤–∏–∂–µ–Ω–∏–µ
    });

    pipes = pipes.filter(pipe => pipe.x + pipe.width > 0); // –£–±–∏—Ä–∞–µ–º –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ —ç–∫—Ä–∞–Ω–∞
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π
function checkCollision() {
    for (const pipe of pipes) {
        if (
            fish.x + fish.size > pipe.x &&
            fish.x - fish.size < pipe.x + pipe.width &&
            (fish.y - fish.size < pipe.top || fish.y + fish.size > pipe.bottom)
        ) {
            endFishGame(); // –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ–º
        }
    }

    if (fish.y - fish.size < 0 || fish.y + fish.size > canvas.height) {
        endFishGame();
    }
}

// –ü–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —É–≥–ª–∞ –Ω–∞–∫–ª–æ–Ω–∞ —Ä—ã–±–∫–∏
function updateFishAngle() {
    const targetAngle = fish.velocity < 0 ? -Math.PI / 6 : Math.PI / 6;
    fish.angle += (targetAngle - fish.angle) * 0.1; // –ü–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —É–≥–ª–∞
}

// –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ä—ã–±–∫–∏
function drawFish() {
    ctx.save();
    ctx.translate(fish.x, fish.y);
    ctx.rotate(fish.angle); // –ü–ª–∞–≤–Ω–æ–µ –≤—Ä–∞—â–µ–Ω–∏–µ —Ä—ã–±–∫–∏

    ctx.scale(-1, 1); // –û—Ç—Ä–∞–∂–∞–µ–º –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏, —á—Ç–æ–±—ã —Ä—ã–±–∫–∞ —Å–º–æ—Ç—Ä–µ–ª–∞ –≤–ø—Ä–∞–≤–æ
    ctx.font = `${fish.size * 2}px Arial`;
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";
    ctx.fillText("üêü", 0, 0);

    ctx.restore();
}

// –ü–µ—Ä–µ–ª–∏–≤–∞—é—â–∏–π—Å—è —Ñ–æ–Ω
function drawBackground() {
    gradientPosition += 0.01; // –°–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–ª–∏–≤–∞
    if (gradientPosition > 1) gradientPosition = 0;

    const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
    gradient.addColorStop(0, `rgba(135, 206, 250, ${0.5 + 0.5 * Math.sin(gradientPosition)})`);
    gradient.addColorStop(1, `rgba(25, 25, 112, ${0.5 + 0.5 * Math.cos(gradientPosition)})`);

    ctx.fillStyle = gradient;
    ctx.fillRect(0, 0, canvas.width, canvas.height);
}

// –û—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
function updateGame() {
    if (isGameOver) return; // –ï—Å–ª–∏ –∏–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ–º –∫–∞–¥—Ä—ã

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawBackground(); // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ñ–æ–Ω–∞

    if (isStarted) {
        fish.velocity += gravity; // –ü—Ä–∏–º–µ–Ω—è–µ–º –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—é
        if (fish.velocity > maxVelocity) fish.velocity = maxVelocity; // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏
        fish.y += fish.velocity; // –î–≤–∏–≥–∞–µ–º —Ä—ã–±–∫—É
        updateFishAngle(); // –û–±–Ω–æ–≤–ª—è–µ–º —É–≥–æ–ª –Ω–∞–∫–ª–æ–Ω–∞ —Ä—ã–±–∫–∏
    }

    drawFish(); // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ä—ã–±–∫–∏

    if (isStarted && timeSinceLastPipe >= pipeInterval) {
        createPipe(); // –°–æ–∑–¥–∞—ë–º –Ω–æ–≤–æ–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ
        timeSinceLastPipe = 0; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Ä–µ–º—è –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
    }

    if (isStarted) drawPipes(); // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
    if (isStarted) checkCollision(); // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π

    pipes.forEach(pipe => {
        if (!isGameOver && pipe.x + pipe.width < fish.x && !pipe.passed) {
            pipe.passed = true;
            gameProgress.fishPassedPipes++; 
            balance += 5;
            const progressToAdd = 5;
const multiplierUsed = Math.min(multipliers, progressToAdd);
progress += progressToAdd + multiplierUsed;
multipliers -= multiplierUsed;
            updateProfile();
            playSaveSuccessSound();
            checkArtifactUnlocks();
            renderArtifacts();
            saveProgress();
        }
    });

    timeSinceLastPipe++;
    frameCount++;
    fishGameInterval = requestAnimationFrame(updateGame); // –°–ª–µ–¥—É—é—â–∏–π –∫–∞–¥—Ä
}

const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
let oscillatorPool = [];

// –§—É–Ω–∫—Ü–∏—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∑–≤—É–∫–∞
function fandom() {
    const oscillator = audioCtx.createOscillator();
    const gainNode = audioCtx.createGain();

    oscillator.type = "sine"; // –¢–∏–ø –≤–æ–ª–Ω—ã (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ "square", "triangle", "sawtooth")
    oscillator.frequency.setValueAtTime(440, audioCtx.currentTime); // –ß–∞—Å—Ç–æ—Ç–∞ (–ì—Ü) - 440 –ì—Ü (–Ω–æ—Ç–∞ –õ—è)

    gainNode.gain.setValueAtTime(1, audioCtx.currentTime); // –ì—Ä–æ–º–∫–æ—Å—Ç—å
    gainNode.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.2); // –ü–ª–∞–≤–Ω–æ–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ

    oscillator.connect(gainNode);
    gainNode.connect(audioCtx.destination);

    oscillator.start();
    oscillator.stop(audioCtx.currentTime + 0.2); // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–≤—É–∫–∞ 0.2 —Å–µ–∫—É–Ω–¥—ã

    // –î–æ–±–∞–≤–ª—è–µ–º –æ—Å—Ü–∏–ª–ª—è—Ç–æ—Ä –≤ –ø—É–ª –∏ –æ—á–∏—â–∞–µ–º –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ
    oscillatorPool.push(oscillator);
    oscillator.onended = () => {
        oscillatorPool = oscillatorPool.filter(osc => osc !== oscillator);
    };
}

// –†–∞–∑—Ä–µ—à–∞–µ–º –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–≤—É–∫–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏
document.addEventListener("click", () => {
    if (audioCtx.state === "suspended") {
        audioCtx.resume();
    }
}, { once: true });

    let favoriteArtifact = null; // –¢–µ–∫—É—â–∏–π –∏–∑–±—Ä–∞–Ω–Ω—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç
    let hasInteracted = false; // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π

    const artifacts = [
    { id: 1, name: "üìñ –ú–∞—Ç–µ–º–∞—Ç–∏–∫", description: "–û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ 100 –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –∏–≥—Ä–µ '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞'", unlocked: false },
    { id: 2, name: "üçé –§–µ—Ä–º–µ—Ä", description: "–ù–∞–π—Ç–∏ 120 –ø–∞—Ä –≤ –∏–≥—Ä–µ '–ó–∞–ø–æ–º–∏–Ω–∞–ª–∫–∞'", unlocked: false },
    { id: 3, name: "üóΩ –ê–Ω–≥–ª–∏—á–∞–Ω–∏–Ω", description: "–û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ 100 –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –∏–≥—Ä–µ '–ê–Ω–≥–ª–∏–π—Å–∫–∏–π'", unlocked: false },
    { id: 4, name: "üåº –¶–≤–µ—Ç–∏–∫", description: "–û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ 50 –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –∏–≥—Ä–µ '–¶–≤–µ—Ç—ã'", unlocked: false },
    { id: 5, name: "üí° –•–∏–º–∏–∫", description: "–û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ 100 –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –∏–≥—Ä–µ '–•–∏–º–∏—è'", unlocked: false },
    { id: 6, name: "üéµ –ú—É–∑—ã–∫–∞–Ω—Ç", description: "–°—ã–≥—Ä–∞—Ç—å 20 –Ω–æ—Ç –∑–∞ –æ–¥–∏–Ω –∑–∞—Ö–æ–¥ –≤ –∏–≥—Ä–µ '–ú—É–∑—ã–∫–∞'", unlocked: false },
    { id: 7, name: "üåç –ì–µ–æ–≥—Ä–∞—Ñ", description: "–û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ 100 –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –∏–≥—Ä–µ '–°—Ç—Ä–∞–Ω—ã'", unlocked: false },
    { id: 8, name: "üç¨ –©–µ–¥—Ä—ã–π", description: "–°–æ–∑–¥–∞—Ç—å 10 –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤", unlocked: false },
    { id: 9, name: "‚≠ê –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–æ", description: "–û—Ü–µ–Ω–∏—Ç—å –∏–≥—Ä—É 1 —Ä–∞–∑ –Ω–∞ –ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤–µ–∑–¥", unlocked: false },
    { id: 10, name: "üîç –°—ã—â–∏–∫", description: "–ù–∞–π—Ç–∏ 100 —ç–º–æ–¥–∑–∏ –≤ –∏–≥—Ä–µ '–ù–∞—Ö–æ–¥–∫–∞'", unlocked: false },
    { id: 11, name: "üí§ –°–æ–Ω—è", description: "–ù–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏", unlocked: false },
    { id: 12, name: "‚ù§Ô∏è –ù–æ–≤–∏—á–æ–∫", description: "–î–æ—Å—Ç–∏–≥–Ω—É—Ç—å —Å—Ç–∞—Ç—É—Å '–ë—Ä–æ–Ω–∑–∞'", unlocked: false },
    { id: 13, name: "ü©∑ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª", description: "–î–æ—Å—Ç–∏–≥–Ω—É—Ç—å —Å—Ç–∞—Ç—É—Å '–°–µ—Ä–µ–±—Ä–æ'", unlocked: false },
    { id: 14, name: "üíõ Gold-Player", description: "–î–æ—Å—Ç–∏–≥–Ω—É—Ç—å —Å—Ç–∞—Ç—É—Å '–ó–æ–ª–æ—Ç–æ'", unlocked: false },
    { id: 15, name: "ü©µ –ê–ª–º–∞–∑", description: "–î–æ—Å—Ç–∏–≥–Ω—É—Ç—å —Å—Ç–∞—Ç—É—Å '–ê–ª–º–∞–∑'", unlocked: false },
    { id: 16, name: "üíñ –°–≤–µ—Ä—Ö—ä–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π", description: "–î–æ—Å—Ç–∏–≥–Ω—É—Ç—å —Å—Ç–∞—Ç—É—Å '–ú–∏—Ñ–∏—á–µ—Å–∫–∏–π'", unlocked: false },
    { id: 17, name: "üî• –õ–µ–≥–µ–Ω–¥–∞", description: "–î–æ—Å—Ç–∏–≥–Ω—É—Ç—å —Å—Ç–∞—Ç—É—Å '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π'", unlocked: false },
    { id: 18, name: "üëë –ú–∞—Å—Ç–µ—Ä", description: "–î–æ—Å—Ç–∏–≥–Ω—É—Ç—å —Å—Ç–∞—Ç—É—Å '–ú–∞—Å—Ç–µ—Ä'", unlocked: false },
    { id: 19, name: "ü™© –ò–º–ø–µ—Ä–∞—Ç–æ—Ä", description: "–î–æ—Å—Ç–∏–≥–Ω—É—Ç—å —Å—Ç–∞—Ç—É—Å '–ò–º–ø–µ—Ä–∞—Ç–æ—Ä'", unlocked: false },
    { id: 20, name: "üñ§ –¢–∏—Ç–∞–Ω", description: "–î–æ—Å—Ç–∏–≥–Ω—É—Ç—å —Å—Ç–∞—Ç—É—Å '–¢–∏—Ç–∞–Ω'", unlocked: false },
    { id: 21, name: "üèÜ –ö–æ—Ä–æ–ª—å –∏–≥—Ä", description: "–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∏–≥—Ä—ã", unlocked: false },
    { id: 22, name: "üêç –ó–º–µ–µ–Ω–æ—Å–µ—Ü", description: "–°–æ–±—Ä–∞—Ç—å 100 —è–±–ª–æ–∫ –≤ –∏–≥—Ä–µ '–ó–º–µ–π–∫–∞'", unlocked: false },
    { id: 23, name: "üíº –ë–æ—Å—Å", description: "–ú–æ–∂–Ω–æ –∫—É–ø–∏—Ç—å –≤ –º–∞–≥–∞–∑–∏–Ω–µ –∑–∞ 1000$", unlocked: false }, // –ù–æ–≤—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç
    { id: 24, name: "üêü –†—ã–±—ã", description: "–ü—Ä–æ–π—Ç–∏ 100 –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π –≤ –∏–≥—Ä–µ '–†—ã–±–∫–∞'", unlocked: false },
    { id: 25, name: "üé∞ –í–µ–∑—É–Ω—á–∏–∫", description: "–ú–æ–∂–Ω–æ –≤—ã–∏–≥—Ä–∞—Ç—å –≤ —Ä—É–ª–µ—Ç–∫–µ", unlocked: false },
    { id: 26, name: "üèì –ü–æ–Ω–≥–µ—Ä", description: "–û—Ç–±–∏—Ç—å –º—è—á –≤ –∏–≥—Ä–µ '–ü–æ–Ω–≥' 300 —Ä–∞–∑.", unlocked: false },
    { id: 27, name: "üåê –û–ª–¥", description: "–í—ã–¥–∞–Ω –ø–æ—Å–ª–µ —Ä–µ–ª–∏–∑–∞ –≤ Telegram –≤ —Ç–µ—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–∞.", unlocked: false },
    { id: 28, name: "üíª IT-–ì—É—Ä—É", description: "–û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ 100 –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –∏–≥—Ä–µ '–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞'", unlocked: false }
];

function checkUnlockKingOfGamesArtifact() {
    if (
        memoryGameUnlocked &&
        englishGameUnlocked &&
        countriesGameUnlocked &&
        findDifferenceUnlocked &&
        flowersGameUnlocked &&
        musicGameUnlocked &&
        chemistryGameUnlocked &&
        snakeGameUnlocked &&
        fishGameUnlocked &&
        pongGameUnlocked &&
        programmingGameUnlocked
    ) {
        unlockArtifact(21); // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –∞—Ä—Ç–µ—Ñ–∞–∫—Ç "–ö–æ—Ä–æ–ª—å –∏–≥—Ä"
        saveProgress();
    }
}

function victorySound() {
    if (isVictoryPlaying) return;
    isVictoryPlaying = true;
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    const gainNode = audioCtx.createGain();
    gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime); // –ì—Ä–æ–º–∫–æ—Å—Ç—å

    const notes = [261.63, 329.63, 392.00, 523.25]; // –î–æ, –ú–∏, –°–æ–ª—å, –í—ã—Å–æ–∫–æ–µ –î–æ (C4, E4, G4, C5)

    // –ü—Ä–æ–∏–≥—Ä—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–µ 4 –Ω–æ—Ç—ã
    notes.forEach((freq, i) => {
        const oscillator = audioCtx.createOscillator();
        oscillator.type = "triangle"; 
        oscillator.frequency.setValueAtTime(freq, audioCtx.currentTime);
        oscillator.connect(gainNode);
        gainNode.connect(audioCtx.destination);
        
        oscillator.start(audioCtx.currentTime + i * 0.2); // –ù–∞—á–∞–ª–æ –∫–∞–∂–¥–æ–π –Ω–æ—Ç—ã —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 0.2 —Å–µ–∫
        oscillator.stop(audioCtx.currentTime + (i + 1) * 0.2); // –ù–æ—Ç–∞ –¥–ª–∏—Ç—Å—è 0.2 —Å–µ–∫
    });

    // –ó–∞–¥–µ—Ä–∂–∫–∞ 1.5 —Å–µ–∫ –ø–µ—Ä–µ–¥ —Ñ–∏–Ω–∞–ª—å–Ω—ã–º–∏ –Ω–æ—Ç–∞–º–∏
    setTimeout(() => {
        const finalNotes = [392.00, 523.25]; // –°–æ–ª—å, –í—ã—Å–æ–∫–æ–µ –î–æ (G4, C5)
        finalNotes.forEach((freq, i) => {
            const oscillator = audioCtx.createOscillator();
            oscillator.type = "triangle";
            oscillator.frequency.setValueAtTime(freq, audioCtx.currentTime);
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            oscillator.start(audioCtx.currentTime + i * 0.2); // –ù–∞—á–∞–ª–æ –∫–∞–∂–¥–æ–π –Ω–æ—Ç—ã —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 0.2 —Å–µ–∫
            oscillator.stop(audioCtx.currentTime + (i + 1) * 0.2); // –ù–æ—Ç–∞ –¥–ª–∏—Ç—Å—è 0.2 —Å–µ–∫
        });
    }, 900); // –ó–∞–¥–µ—Ä–∂–∫–∞ 1.5 —Å–µ–∫
}

function renderArtifacts() {
    const container = document.getElementById("artifacts-container");
    container.innerHTML = ""; // –û—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

    artifacts.forEach(artifact => {
        const card = document.createElement("div");
        card.className = "artifact-card" + (artifact.unlocked ? " open" : ""); 
        card.style.position = "relative"; // –î–µ–ª–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫—É –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–π, —á—Ç–æ–±—ã –∑–≤–µ–∑–¥–∞ –±—ã–ª–∞ –≤–Ω—É—Ç—Ä–∏ –Ω–µ–µ

        // –ï—Å–ª–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã–π ‚Äî –¥–æ–±–∞–≤–ª—è–µ–º –∑–≤–µ–∑–¥—É, –Ω–æ –±–µ–∑ –∫–ª–∏–∫–∞
        const star = (favoriteArtifact === artifact.id) 
            ? '<span class="favorite-star">‚òÖ</span>' 
            : '';

        card.innerHTML = artifact.unlocked ? `${artifact.name.split(" ")[0]} ${star}` : "?";

        card.onclick = () => {
            if (artifact.unlocked) {
                showArtifactAlert(artifact.id);
                fandom();
            } else {
                showCustomAlert("–ó–∞–∫—Ä—ã—Ç–æ!");
                playErrorSound();
            }
        };

        container.appendChild(card);
    });
}

    const gameProgress = {
    mathQuestions: 0,       // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—à—ë–Ω–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –∏–≥—Ä–µ "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞"
    memoryPairs: 0,         // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø–∞—Ä –≤ –∏–≥—Ä–µ "–ó–∞–ø–æ–º–∏–Ω–∞–ª–∫–∞"
    englishQuestions: 0,    // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—à—ë–Ω–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –∏–≥—Ä–µ "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π"
    flowerQuestions: 0,     // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—à—ë–Ω–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –∏–≥—Ä–µ "–¶–≤–µ—Ç—ã"
    chemistryQuestions: 0,  // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—à—ë–Ω–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –∏–≥—Ä–µ "–•–∏–º–∏—è"
    musicNotes: 0,          // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—ã–≥—Ä–∞–Ω–Ω—ã—Ö –Ω–æ—Ç –∑–∞ –æ–¥–∏–Ω –∑–∞—Ö–æ–¥ –≤ "–ú—É–∑—ã–∫–µ"
    countryQuestions: 0,    // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—à—ë–Ω–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –∏–≥—Ä–µ "–°—Ç—Ä–∞–Ω—ã"
    findDifferenceCount: 0, // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —ç–º–æ–¥–∑–∏
    pongBounces: 0, //–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç—Å–∫–æ–∫–æ–≤
    programmingQuestions: 0,  // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—à—ë–Ω–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –∏–≥—Ä–µ "–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞"
    promoCodesCreated: 0,       // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑, –∫–æ–≥–¥–∞ —Å–æ–∑–¥–∞–ª–∏ –ø—Ä–æ–º–æ–∫–æ–¥
    snakeApples: 0,         // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—ä–µ–¥–µ–Ω–Ω—ã—Ö —è–±–ª–æ–∫
    fishPassedPipes: 0,     // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π –≤ –∏–≥—Ä–µ "–†—ã–±–∫–∞"
    rated: false,           // –ü–æ—Å—Ç–∞–≤–∏–ª–∏ –ª–∏ –æ—Ü–µ–Ω–∫—É
};

function checkArtifactUnlocks() {
    // –ò–≥—Ä–æ–≤—ã–µ —É—Å–ª–æ–≤–∏—è
    if (gameProgress.mathQuestions >= 100) unlockArtifact(1); // üìñ –ú–∞—Ç–µ–º–∞—Ç–∏–∫
    if (gameProgress.memoryPairs >= 120) unlockArtifact(2);  // üçé –§–µ—Ä–º–µ—Ä
    if (gameProgress.englishQuestions >= 100) unlockArtifact(3); // üóΩ –ê–Ω–≥–ª–∏—á–∞–Ω–∏–Ω
    if (gameProgress.flowerQuestions >= 50) unlockArtifact(4); // üåº –¶–≤–µ—Ç–∏–∫
    if (gameProgress.chemistryQuestions >= 100) unlockArtifact(5); // üí° –•–∏–º–∏–∫
    if (gameProgress.musicNotes >= 20) unlockArtifact(6); // üéµ –ú—É–∑—ã–∫–∞–Ω—Ç
    if (gameProgress.countryQuestions >= 100) unlockArtifact(7); // üåç –ì–µ–æ–≥—Ä–∞—Ñ
    if (saveLoadCount >= 10) unlockArtifact(8); // üìÇ –ó–∞–≥—Ä—É–∂–µ–Ω–æ
    if (gameProgress.rated) unlockArtifact(9); // ‚≠ê –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–æ
    if (gameProgress.findDifferenceCount >= 100) unlockArtifact(10); // üîç –°—ã—â–∏–∫
    if (gameProgress.fishPassedPipes >= 100) unlockArtifact(24); // üêü –†—ã–±—ã
    if (gameProgress.pongBounces >= 300) unlockArtifact(26); // üèì –ü–æ–Ω–≥–µ—Ä
    if (gameProgress.programmingQuestions >= 100) unlockArtifact(28); // üíª IT-–ì—É—Ä—É
    

    // –ê—Ä—Ç–µ—Ñ–∞–∫—Ç "üí§ –°–æ–Ω—è"
    if (checkIfIdle() && !gameProgress.rated) unlockArtifact(11);
        saveProgress();

    // –°—Ç–∞—Ç—É—Å–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
    const statuses = getStatusesForPlayer();
    statuses.forEach(status => unlockArtifact(status.id)); // –í—ã–¥–∞—ë–º –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∑–∞ –≤—Å–µ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã
}

function checkIfIdle() {
    return gameProgress.mathQuestions === 0 &&
           gameProgress.memoryPairs === 0 &&
           gameProgress.englishQuestions === 0 &&
           gameProgress.flowerQuestions === 0 &&
           gameProgress.chemistryQuestions === 0 &&
           gameProgress.findDifferenceCount === 0; // –ù–∏ –æ–¥–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
}

function getStatusesForPlayer() {
    const statuses = [
        { id: 12, name: "–ë—Ä–æ–Ω–∑–∞ ‚ù§Ô∏è", threshold: 500 },
        { id: 13, name: "–°–µ—Ä–µ–±—Ä–æ ü©∑", threshold: 1000 },
        { id: 14, name: "–ó–æ–ª–æ—Ç–æ üíõ", threshold: 2000 },
        { id: 15, name: "–ê–ª–º–∞–∑ ü©µ", threshold: 5000 },
        { id: 16, name: "–ú–∏—Ñ–∏—á–µ—Å–∫–∏–π üíñ", threshold: 10000 },
        { id: 17, name: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π üî•", threshold: 50000 },
        { id: 18, name: "–ú–∞—Å—Ç–µ—Ä üëë", threshold: 100000 },
        { id: 19, name: "–ò–º–ø–µ—Ä–∞—Ç–æ—Ä ü™©", threshold: 500000 },
        { id: 20, name: "–¢–∏—Ç–∞–Ω üñ§", threshold: 1000000 }
    ];

    return statuses.filter(status => progress >= status.threshold); // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞—Ç—É—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏–≥—Ä–æ–∫ —É–∂–µ –¥–æ—Å—Ç–∏–≥
}
function getCurrentStatus() {
    const statuses = [
        { name: "–ö–∞–º–µ–Ω—å ü©∂", next: 500 },
        { name: "–ë—Ä–æ–Ω–∑–∞ ‚ù§Ô∏è", next: 1000 },
        { name: "–°–µ—Ä–µ–±—Ä–æ ü©∑", next: 2000 },
        { name: "–ó–æ–ª–æ—Ç–æ üíõ", next: 5000 },
        { name: "–ê–ª–º–∞–∑ ü©µ", next: 10000 },
        { name: "–ú–∏—Ñ–∏—á–µ—Å–∫–∏–π üíñ", next: 50000 },
        { name: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π üî•", next: 100000 },
        { name: "–ú–∞—Å—Ç–µ—Ä üëë", next: 500000 },
        { name: "–ò–º–ø–µ—Ä–∞—Ç–æ—Ä ü™©", next: 1000000 },
        { name: "–¢–∏—Ç–∞–Ω üñ§", next: Infinity }
    ];

    return statuses.find(s => progress < s.next)?.name || statuses[statuses.length - 1].name;
}

function unlockArtifact(id) {
    console.log(`–ü—ã—Ç–∞–µ–º—Å—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç —Å ID: ${id}`);
    const artifact = artifacts.find(a => a.id === id);
    if (artifact && !artifact.unlocked) {
        artifact.unlocked = true;
        console.log(`–ê—Ä—Ç–µ—Ñ–∞–∫—Ç ${artifact.name} —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω!`);
        showCustomAlert(`–í—ã —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç: ${artifact.name}!\n${artifact.description}`);
        victorySound();
        renderArtifacts();
        saveProgress();
    } else {
        console.log(`–û—à–∏–±–∫–∞: –ê—Ä—Ç–µ—Ñ–∞–∫—Ç —Å ID ${id} –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ —É–∂–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω.`);
    }
}


window.onload = function() {
    const savedAvatar = localStorage.getItem('avatar'); // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—É—é –∞–≤–∞—Ç–∞—Ä–∫—É
    const avatarElement = document.getElementById('avatar');
    const placeholderElement = document.getElementById('avatar-placeholder');

    if (savedAvatar) {
        avatarElement.src = savedAvatar; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—É—é –∞–≤–∞—Ç–∞—Ä–∫—É
        placeholderElement.style.display = "none"; // –£–±–∏—Ä–∞–µ–º —Ç–µ–∫—Å—Ç
    } else {
        avatarElement.src = ""; // –£–±–∏—Ä–∞–µ–º –∫–∞—Ä—Ç–∏–Ω–∫—É
        placeholderElement.style.display = "block"; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç
    }
};

function initializeGame() {
    updateProfile();
    toggleGameButtons();
}

    let musicGameUnlocked = false; // –ò–≥—Ä–∞ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
    let chemistryGameUnlocked = false; // –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ –≤ –Ω–∞—á–∞–ª–æ —Å–∫—Ä–∏–ø—Ç–∞
let musicSequence = [];
let playerSequence = [];
let isPlayingSequence = false; // –ë–ª–æ–∫–∏—Ä—É–µ—Ç –∫–Ω–æ–ø–∫–∏ –≤–æ –≤—Ä–µ–º—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
const musicNotes = {
    low: 261.25,   // –ù–∏–∑–∫–∞—è –Ω–æ—Ç–∞ (–°3)
    mid: 523.25,   // –°—Ä–µ–¥–Ω—è—è –Ω–æ—Ç–∞ (–°4)
    high: 793.25,  // –í—ã—Å–æ–∫–∞—è –Ω–æ—Ç–∞ (–°5)
};

function startMusicGame() {
    if (!musicGameUnlocked) {
        playErrorSound();
        showCustomAlert("–ò–≥—Ä–∞ '–ú—É–∑—ã–∫–∞' –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞! –ö—É–ø–∏—Ç–µ –µ—ë –≤ –º–∞–≥–∞–∑–∏–Ω–µ.");
        return;
    }

    setTimeout(() => {
        startNewRound(); // –ù–∞—á–∏–Ω–∞–µ–º –∏–≥—Ä—É —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
    }, 2000);

    document.getElementById("music-prompt").textContent = "–ü—Ä–∏–≥–æ—Ç–æ–≤—å—Ç–µ—Å—å...";
    updateButtonState(true); // –î–µ–ª–∞–µ–º –∫–Ω–æ–ø–∫–∏ —Å–µ—Ä—ã–º–∏
    showScreen('music-game');
}

function startNewRound() {
    playerSequence = [];
    musicSequence.push(getRandomNote()); // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é –Ω–æ—Ç—É –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
    document.getElementById("music-prompt").textContent = "–°–ª—É—à–∞–π—Ç–µ –º–µ–ª–æ–¥–∏—é...";
    playSequence();
}

function playSequence() {
    isPlayingSequence = true;
    updateButtonState(true); // –î–µ–ª–∞–µ–º –∫–Ω–æ–ø–∫–∏ —Å–µ—Ä—ã–º–∏
    let delay = 0;

    musicSequence.forEach((note, index) => {
        setTimeout(() => {
            playSound(note);
        }, delay);
        delay += 600; // –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –Ω–æ—Ç–∞–º–∏
    });

    setTimeout(() => {
        isPlayingSequence = false;
        updateButtonState(false); // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–Ω–æ–ø–∫–∏ –≤ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        document.getElementById("music-prompt").textContent = "–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –º–µ–ª–æ–¥–∏—é!";
    }, delay);
}

function playMusicButton(note) {
    if (isPlayingSequence) return;

    playSound(note);
    playerSequence.push(note);

    if (playerSequence.length === musicSequence.length) {
        checkSequence();
    }
}

function checkSequence() {
    if (playerSequence.join('') === musicSequence.join('')) {
        balance += 10;
        const progressToAdd = 10;
        const multiplierUsed = Math.min(multipliers, progressToAdd);
        progress += progressToAdd + multiplierUsed;
        multipliers -= multiplierUsed;
        gameProgress.musicNotes++;
        checkArtifactUnlocks();
        updateMultipliers();
        saveProgress();
        updateProfile();

        setTimeout(() => {
            showCustomAlert("+10 –ë–ê–õ–õ–û–í!");
            startNewRound();
        }, 500);
    } else {
        playErrorSound();
        showCustomAlert("–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.");
        endMusicGame();
    }
}

function endMusicGame() {
    musicSequence = [];
    playerSequence = [];
    showCustomAlert(`–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å: ${progress}`);
    showScreen('main-menu');
}

function playSound(note) {
    const oscillator = audioContext.createOscillator();
    const gainNode = audioContext.createGain();

    oscillator.type = note === 'low' ? 'square' : note === 'mid' ? 'sine' : 'triangle'; // –ì—Ä—É–±—ã–π, –º—è–≥–∫–∏–π, —è—Ä–∫–∏–π –∑–≤—É–∫
    oscillator.frequency.setValueAtTime(musicNotes[note], audioContext.currentTime); // –ß–∞—Å—Ç–æ—Ç–∞ –Ω–æ—Ç—ã
    oscillator.connect(gainNode);
    gainNode.connect(audioContext.destination);

    gainNode.gain.setValueAtTime(1.0, audioContext.currentTime); // –ì—Ä–æ–º–∫–æ—Å—Ç—å
    gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.6); // –ü–ª–∞–≤–Ω–æ–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ

    oscillator.start();
    oscillator.stop(audioContext.currentTime + 0.6); // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å 0.6 —Å–µ–∫—É–Ω–¥
}

function getRandomNote() {
    const notes = Object.keys(musicNotes);
    return notes[Math.floor(Math.random() * notes.length)];
}

function updateButtonState(disabled) {
    const buttons = document.querySelectorAll("#music-buttons button");
    buttons.forEach(button => {
        button.disabled = disabled;
        button.style.backgroundColor = disabled ? "#ccc" : ""; // –°–µ—Ä—ã–π —Ü–≤–µ—Ç, –µ—Å–ª–∏ –∫–Ω–æ–ø–∫–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã
        button.style.cursor = disabled ? "not-allowed" : "pointer"; // –ö—É—Ä—Å–æ—Ä "–∑–∞–ø—Ä–µ—â–µ–Ω–æ"
    });
}

    let findDifferenceUnlocked = false;
    let gameTimers = {}; // –•—Ä–∞–Ω–∏—Ç –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–∞–π–º–µ—Ä—ã
    let soundEnabled = JSON.parse(localStorage.getItem("soundEnabled")) ?? true;  // true –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
const expirationTime = 120000; // 2 –º–∏–Ω—É—Ç (–≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö)
let usedQRCodes = JSON.parse(localStorage.getItem("usedQRCodes")) || {};  // –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö QR

document.addEventListener('DOMContentLoaded', () => {
    initializeGame();
});

// –§—É–Ω–∫—Ü–∏—è –≤—ã–±–æ—Ä–∞ –∞–≤–∞—Ç–∞—Ä–∫–∏
function selectAvatar() {
    document.getElementById('avatar-input').click();  // –û—Ç–∫—Ä—ã–≤–∞–µ–º –≤—ã–±–æ—Ä —Ñ–∞–π–ª–∞
}

// –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∞–≤–∞—Ç–∞—Ä–∫–∏
function updateAvatar(event) {
    const file = event.target.files[0]; // –ü–æ–ª—É—á–∞–µ–º —Ñ–∞–π–ª

    if (!file) {
        console.log("–§–∞–π–ª –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∫–∏ –Ω–µ –≤—ã–±—Ä–∞–Ω.");
        return;
    }

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–≤ –±–∞–π—Ç–∞—Ö, 2 –ú–ë = 2 * 1024 * 1024)
    const maxFileSize = 2 * 1024 * 1024; // 2 –ú–ë
    if (file.size > maxFileSize) {
        showCustomAlert("–û—à–∏–±–∫–∞: –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 2 –ú–ë. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥–æ–π —Ñ–∞–π–ª.");
        return;
    }

    const reader = new FileReader();
    reader.onload = function (e) {
        const avatarImg = document.getElementById('avatar');
        avatarImg.src = e.target.result; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
        localStorage.setItem('avatar', e.target.result); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
        console.log("–ê–≤–∞—Ç–∞—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞.");
        playSaveSuccessSound();
        saveProgress();
    };

    reader.readAsDataURL(file); // –ß–∏—Ç–∞–µ–º —Ñ–∞–π–ª –∫–∞–∫ Data URL
}

// –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–π –∞–≤–∞—Ç–∞—Ä–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
window.onload = function() {
    const savedAvatar = localStorage.getItem('avatar');
    if (savedAvatar) {
        document.getElementById('avatar').src = savedAvatar;
    }
};

// –≠–º–æ–¥–∑–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ ‚öôÔ∏è
document.getElementById("settings-icon").onclick = () => showScreen("settings-menu");

//–ü–æ–ª—É—á–µ–Ω–∏–µ –ü–æ–¥–∞—Ä–∫–∞
function activateGiftPromo() {
    const promoId = document.getElementById("gift-code").value.trim();
    console.log("–í–≤–µ–¥—ë–Ω–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥:", promoId);

    if (!promoId || promoId === "") {
        showCustomAlert("–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥!");
        playErrorSound();
        return;
    }

    // –û–±—ä—è–≤–ª—è–µ–º usedPromoCodes –≥–ª–æ–±–∞–ª—å–Ω–æ –∏–ª–∏ –≤ –Ω–∞—á–∞–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏
    let usedPromoCodes = JSON.parse(localStorage.getItem("usedPromoCodes")) || {};
    if (usedPromoCodes[promoId]) {
        showCustomAlert("–≠—Ç–æ—Ç –ø—Ä–æ–º–æ–∫–æ–¥ —É–∂–µ –±—ã–ª –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω.");
        playErrorSound();
        return;
    }

    const botToken = "7888258193:AAH_GCsOOZ64BznEToOKd6t0miKxR60lYNA";
    const groupId = "-1002272656448";

    fetch(`https://api.telegram.org/bot${botToken}/getUpdates`)
        .then(response => {
            console.log("–û—Ç–≤–µ—Ç –æ—Ç Telegram API –ø–æ–ª—É—á–µ–Ω:", response);
            return response.json();
        })
        .then(data => {
            console.log("–î–∞–Ω–Ω—ã–µ –∏–∑ Telegram API:", data);

            if (!data.result || data.result.length === 0) {
                showCustomAlert("–û—à–∏–±–∫–∞: –°–æ–æ–±—â–µ–Ω–∏—è –≤ –≥—Ä—É–ø–ø–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.");
                return;
            }

            const messages = data.result;
            let latestPromo = null;

            for (let i = messages.length - 1; i >= 0; i--) {
                const message = messages[i].message;
                if (!message || message.chat.id !== parseInt(groupId) || !message.text) continue;

                try {
                    console.log("–ü—ã—Ç–∞–µ–º—Å—è —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ:", message.text);
                    const promo = JSON.parse(message.text);
                    if (promo.id === promoId) {
                        latestPromo = promo;
                        break;
                    }
                } catch (e) {
                    console.error("–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON:", e, message.text);
                    continue;
                }
            }

            console.log("–ü–æ—Å–ª–µ–¥–Ω–∏–π –ø—Ä–æ–º–æ–∫–æ–¥:", latestPromo);

            if (!latestPromo) {
                console.error("–ù–µ –Ω–∞–π–¥–µ–Ω –ø–æ–¥—Ö–æ–¥—è—â–∏–π –ø—Ä–æ–º–æ–∫–æ–¥. –î–∞–Ω–Ω—ã–µ:", { promoId, messages });
                showCustomAlert("–ü—Ä–æ–º–æ–∫–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω.");
                playErrorSound();
                return;
            }

            if (latestPromo.used) {
                showCustomAlert("–≠—Ç–æ—Ç –ø—Ä–æ–º–æ–∫–æ–¥ —É–∂–µ –±—ã–ª –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω.");
                playErrorSound();
                return;
            }

            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ–º–æ–∫–æ–¥
            try {
    balance += latestPromo.points;
    console.log(`–ë–∞–ª–∞–Ω—Å –æ–±–Ω–æ–≤–ª—ë–Ω: ${balance}`);

    console.log("–®–∞–≥ 1: –æ–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–º–æ–∫–æ–¥—ã");
    usedPromoCodes[promoId] = true;
    console.log("usedPromoCodes:", usedPromoCodes);

    console.log("–®–∞–≥ 2: —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage");
    localStorage.setItem("usedPromoCodes", JSON.stringify(usedPromoCodes));

    console.log("–®–∞–≥ 3: –æ–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å");
    updateProfile();

    console.log("–®–∞–≥ 4: —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å");
    saveProgress();
    playSaveSuccessSound();

    console.log("–®–∞–≥ 5: –ø—É–±–ª–∏–∫—É–µ–º 'true'");
    publishPromoAsUsed(promoId, latestPromo.points);

    showCustomAlert(`–ü—Ä–æ–º–æ–∫–æ–¥ —É—Å–ø–µ—à–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! –í—ã –ø–æ–ª—É—á–∏–ª–∏ ${latestPromo.points} –±–∞–ª–ª–æ–≤.`);
} catch (e) {
    console.error("–û—à–∏–±–∫–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø—Ä–æ–º–æ–∫–æ–¥–∞:", e);
    showCustomAlert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø—Ä–æ–º–æ–∫–æ–¥–∞.");
    playErrorSound();
            }
        })
        .catch(error => {
            console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞:", error);
            showCustomAlert("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –∏–ª–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.");
            playErrorSound();
        });
}

// –§—É–Ω–∫—Ü–∏—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
function copyToClipboard(text) {
    navigator.clipboard.writeText(text)
        .then(() => console.log("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞: " + text))
        .catch(err => console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞:", err));
}

//–û—Ç–ø—Ä–∞–≤–∫–∞ –ü–æ–¥–∞—Ä–∫–∞
function sendGiftPromo() {
    const points = parseInt(document.getElementById("gift-points").value, 10);
    if (!points || points <= 0) {
        showCustomAlert("–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤!");
        playErrorSound();
        return;
    }

    if (points > balance) {
        showCustomAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–ª–ª–æ–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ!");
        playErrorSound();
        return;
    }

    const promoId = `GIFT_${Date.now()}`; // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–º–æ–∫–æ–¥–∞
    const promoData = { id: promoId, points: points, used: false }; // –°–æ–∑–¥–∞—ë–º –ø—Ä–æ–º–æ–∫–æ–¥ —Å "false"

    const botToken = "7888258193:AAH_GCsOOZ64BznEToOKd6t0miKxR60lYNA"; // –¢–æ–∫–µ–Ω –ø—É–±–ª–∏–∫—É—é—â–µ–≥–æ –±–æ—Ç–∞
    const chatId = "-1002479408696"; // ID –∫–∞–Ω–∞–ª–∞

    // ‚ö†Ô∏è –í–∞–∂–Ω–æ! –ë–∞–ª–∞–Ω—Å —Ç–µ–ø–µ—Ä—å —Å–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –¢–û–õ–¨–ö–û –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ
    fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            chat_id: chatId,
            text: JSON.stringify(promoData)
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.ok) {
            // –°–ø–∏—Å—ã–≤–∞–µ–º –±–∞–ª–ª—ã —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞
            balance -= points;
            gameProgress.promoCodesCreated++; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
            console.log(`–°–æ–∑–¥–∞–Ω–æ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤: ${gameProgress.promoCodesCreated}`);
            checkArtifactUnlocks();
            updateProfile();
            saveProgress();
            playSaveSuccessSound();
            copyToClipboard(promoId); // –ö–æ–ø–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ ID –ø—Ä–æ–º–æ–∫–æ–¥–∞
            document.getElementById("gift-result").textContent = `–ü—Ä–æ–º–æ–∫–æ–¥ ${promoId} —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!`;
        } else {
            throw new Error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞.");
        }
    })
    .catch(error => {
        console.error("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞:", error);
        showCustomAlert("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞. –ë–∞–ª–ª—ã –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã –Ω–∞ –±–∞–ª–∞–Ω—Å.");
        playErrorSound();
        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –±–∞–ª–ª—ã –ø—Ä–∏ –æ—à–∏–±–∫–µ
        updateProfile();
    });
}

function publishPromoAsUsed(promoId, points) {
    console.log("–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:", promoId, points);

    const botToken = "7165256211:AAEU4j9x9pGxdPeXkBoBV7A08myCtoOM-ZE"; // –¢–æ–∫–µ–Ω –¢—Ä–µ—Ç—å–µ–≥–æ –±–æ—Ç–∞
    const chatId = "-1002479408696"; // ID –∫–∞–Ω–∞–ª–∞

    if (!promoId || !points) {
        console.error("–û—à–∏–±–∫–∞: promoId –∏–ª–∏ points –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç!", { promoId, points });
        throw new ReferenceError("promoId –∏–ª–∏ points –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã");
    }

    const promoData = { id: promoId, points: points, used: true };
    console.log("–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å —Å –¥–∞–Ω–Ω—ã–º–∏:", {
        chat_id: chatId,
        text: JSON.stringify(promoData)
    });

    fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            chat_id: chatId,
            text: JSON.stringify(promoData)
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.ok) {
            console.log(`–ü—Ä–æ–º–æ–∫–æ–¥ ${promoId} –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω —Å "true".`);
        } else {
            showCustomAlert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ 'true'.");
            console.error(data);
        }
    })
    .catch(error => {
        showCustomAlert("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –ø—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ 'true'.");
        console.error(error);
    });
}

// –û—Ç–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ò–º–ø/–≠–∫—Å
function showImportExport() {
    showScreen("import-export-menu");
}

// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∑–≤—É–∫–∞
function toggleSound() {
    soundEnabled = !soundEnabled;
    localStorage.setItem("soundEnabled", JSON.stringify(soundEnabled));
    showCustomAlert(soundEnabled ? "üîä –ó–≤—É–∫ –≤–∫–ª—é—á—ë–Ω" : "üîá –ó–≤—É–∫ –≤—ã–∫–ª—é—á–µ–Ω");
}

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è QR —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º ID –∏ –≤—Ä–µ–º–µ–Ω–µ–º
function exportData() {
    console.log("–ù–∞—á–∞—Ç —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö...");

    const botToken = "7888258193:AAH_GCsOOZ64BznEToOKd6t0miKxR60lYNA";
    const chatId = "-1002479408696";

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è API-–∫–ª—é—á–∞
    const apiKey = `API_${Math.floor(1000000 + Math.random() * 9000000)}`;
    console.log("–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω API-–∫–ª—é—á:", apiKey);

    try {
        // –î–∞–Ω–Ω—ã–µ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞
        const data = {
            apiKey: apiKey,
            nickname: nickname || "–ò–≥—Ä–æ–∫",
            balance: balance || 0,
            progress: progress || 0,
            multipliers: multipliers || 0,
            unlockedGames: {
                memoryGame: !!memoryGameUnlocked,
                englishGame: !!englishGameUnlocked,
                countriesGame: !!countriesGameUnlocked,
                findDifferenceGame: !!findDifferenceUnlocked,
                flowersGame: !!flowersGameUnlocked,
                musicGame: !!musicGameUnlocked,
                chemistryGame: !!chemistryGameUnlocked,
                snakeGame: !!snakeGameUnlocked,
                fishGame: !!fishGameUnlocked,
                pongGame: !!pongGameUnlocked,
                programmingGame: !!programmingGameUnlocked
            },
            favoriteArtifact: favoriteArtifact || null,
            gameProgress: gameProgress,
            artifacts: artifacts.map(a => ({ id: a.id, unlocked: a.unlocked })),
            promotions: currentPromotions.map(p => ({ id: p.id, purchased: p.purchased })),
            lastUsed: false
        };

        console.log("–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ:", data);

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ Telegram
        fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                chat_id: chatId,
                text: JSON.stringify(data),
            }),
        })
        .then(response => response.json())
        .then(res => {
            console.log("–û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞ Telegram:", res);
            if (res.ok) {
                showCustomAlert(`–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã! –í–∞—à API-–∫–ª—é—á: ${apiKey}`);
                copyToClipboard(apiKey);
                playSaveSuccessSound();
            } else {
                showCustomAlert("–û—à–∏–±–∫–∞ –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ –¥–∞–Ω–Ω—ã—Ö.");
                playErrorSound();
            }
        })
        .catch(err => {
            console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–ø—Ä–æ—Å–∞:", err);
            showCustomAlert("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ –¥–∞–Ω–Ω—ã—Ö!");
            playErrorSound();
        });

    } catch (error) {
        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞:", error);
        showCustomAlert("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–±–æ—Ä–µ –¥–∞–Ω–Ω—ã—Ö!");
        playErrorSound();
    }
}

function promptImport() {
    showCustomPrompt("–í–≤–µ–¥–∏—Ç–µ API-–∫–ª—é—á –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞:", function(apiKey) {
        if (apiKey && apiKey.trim()) {
            importData(apiKey.trim());
        } else {
            showCustomAlert("–ò–º–ø–æ—Ä—Ç –æ—Ç–º–µ–Ω—ë–Ω. API-–∫–ª—é—á –Ω–µ –≤–≤–µ–¥—ë–Ω.");
        }
    });
}

function importData(apiKey) {
    console.log("–ù–∞—á–∞—Ç –∏–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö, API-–∫–ª—é—á:", apiKey);

    const botToken = "7888258193:AAH_GCsOOZ64BznEToOKd6t0miKxR60lYNA";
    const groupId = "-1002272656448";

    fetch(`https://api.telegram.org/bot${botToken}/getUpdates`)
        .then(response => response.json())
        .then(data => {
            console.log("–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ Telegram:", data);

            if (!data.result || data.result.length === 0) {
                showCustomAlert("–û—à–∏–±–∫–∞: –°–æ–æ–±—â–µ–Ω–∏—è –≤ –≥—Ä—É–ø–ø–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.");
                playErrorSound();
                return;
            }

            let importedData = null;

            for (let i = data.result.length - 1; i >= 0; i--) {
                const message = data.result[i].message;
                if (!message || message.chat.id != groupId || !message.text) continue;

                try {
                    const jsonData = JSON.parse(message.text);
                    console.log("–†–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è:", jsonData);
                    if (jsonData.apiKey === apiKey) {
                        importedData = jsonData;
                        break;
                    }
                } catch (e) {
                    console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ —Å–æ–æ–±—â–µ–Ω–∏—è:", e);
                    continue;
                }
            }

            if (!importedData) {
                showCustomAlert("–î–∞–Ω–Ω—ã–µ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º API-–∫–ª—é—á–æ–º –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.");
                playErrorSound();
                return;
            }

            if (importedData.lastUsed) {
                showCustomAlert("–≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ —É–∂–µ –±—ã–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã. –ò–º–ø–æ—Ä—Ç –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω.");
                playErrorSound();
                return;
            }

            console.log("–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ:", importedData);

            try {
                // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —à–∞–≥–æ–º
                console.log("–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –±–∞–ª–∞–Ω—Å:", importedData.balance);
                balance = importedData.balance || 0;

                console.log("–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å:", importedData.progress);
                progress = importedData.progress || 0;

                console.log("–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–Ω–æ–∂–∏—Ç–µ–ª–∏:", importedData.multipliers);
                multipliers = importedData.multipliers || 0;

                console.log("–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–≥—Ä—ã:", importedData.unlockedGames);
                memoryGameUnlocked = !!importedData.unlockedGames.memoryGame;
                englishGameUnlocked = !!importedData.unlockedGames.englishGame;
                countriesGameUnlocked = !!importedData.unlockedGames.countriesGame;
                findDifferenceUnlocked = !!importedData.unlockedGames.findDifferenceGame;
                flowersGameUnlocked = !!importedData.unlockedGames.flowersGame;
                musicGameUnlocked = !!importedData.unlockedGames.musicGame;
                chemistryGameUnlocked = !!importedData.unlockedGames.chemistryGame;
                snakeGameUnlocked = !!importedData.unlockedGames.snakeGame;
                fishGameUnlocked = !!importedData.unlockedGames.fishGame;
                pongGameUnlocked = !!importedData.unlockedGames.pongGame;
                programmingGameUnlocked = !!importedData.unlockedGames.programmingGame;

                console.log("–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –ª—é–±–∏–º—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç:", importedData.favoriteArtifact);
                favoriteArtifact = importedData.favoriteArtifact || null;

                console.log("–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –Ω–∏–∫–Ω–µ–π–º:", importedData.nickname);
                nickname = importedData.nickname || "–ò–≥—Ä–æ–∫";

                console.log("–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∏–≥—Ä–∞–º:", importedData.gameProgress);
                if (importedData.gameProgress) {
                    Object.assign(gameProgress, importedData.gameProgress);
                }

                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
                if (importedData.artifacts) {
                    console.log("–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã...");
                    artifacts.forEach(artifact => {
                        const savedArtifact = importedData.artifacts.find(a => a.id === artifact.id);
                        if (savedArtifact) {
                            console.log(`–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∞—Ä—Ç–µ—Ñ–∞–∫—Ç ${artifact.id}: ${savedArtifact.unlocked}`);
                            artifact.unlocked = savedArtifact.unlocked;
                        }
                    });
                }

                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–∫—Ü–∏–∏
                if (importedData.promotions) {
                    console.log("–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–∫—Ü–∏–∏...");
                    currentPromotions.forEach(promo => {
                        const savedPromo = importedData.promotions.find(p => p.id === promo.id);
                        if (savedPromo) {
                            console.log(`–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∞–∫—Ü–∏—è ${promo.id}: ${savedPromo.purchased}`);
                            promo.purchased = savedPromo.purchased;
                        }
                    });
                }

                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                console.log("–û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å...");
                console.log("–¢–µ–∫—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å:", gameProgress);
                console.log("–¢–µ–∫—É—â–∏–π –Ω–∏–∫–Ω–µ–π–º:", nickname);
                console.log("–¢–µ–∫—É—â–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã:", artifacts);
                console.log("–¢–µ–∫—É—â–∏–µ –∞–∫—Ü–∏–∏:", currentPromotions);

                // –î–æ–±–∞–≤–∏–º –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
                try {
                    updateProfile();
                    document.getElementById("nickname-display").textContent = nickname;
                    toggleGameButtons();
                    updateProfileCards();
                    updateFavoriteArtifactCard();
                    updateMultipliers();
                    saveProgress();
                    playSaveSuccessSound();
                } catch (error) {
                    console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:", error);
                    showCustomAlert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞!");
                    playErrorSound();
                }

                console.log("–ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à—ë–Ω —É—Å–ø–µ—à–Ω–æ!");
                showCustomAlert("–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã!");
                markAsUsed(apiKey, importedData);

            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:", error);
                showCustomAlert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö!");
                playErrorSound();
            }

        })
        .catch(error => {
            console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ Telegram:", error);
            showCustomAlert("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –¥–∞–Ω–Ω—ã—Ö!");
            playErrorSound();
        });
}

function markAsUsed(apiKey, importedData) {
    const botToken = "7165256211:AAEU4j9x9pGxdPeXkBoBV7A08myCtoOM-ZE"; // –ë–æ—Ç –∑–∞ "true"
    const chatId = "-1002479408696"; // ID –∫–∞–Ω–∞–ª–∞

    const updatedData = { ...importedData, lastUsed: true }; // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å

    fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            chat_id: chatId,
            text: JSON.stringify(updatedData),
        }),
    })
        .then(response => response.json())
        .then(res => {
            if (res.ok) {
                console.log(`–î–∞–Ω–Ω—ã–µ —Å API-–∫–ª—é—á–æ–º ${apiKey} –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ "true".`);
            } else {
                showCustomAlert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–º–µ—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö –∫–∞–∫ 'true'.");
            }
        })
        .catch(err => {
            console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–º–µ—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö:", err);
        });
}

    function resetTimer() {
    document.getElementById("math-timer").textContent = 10; // –°–±—Ä–æ—Å –¥–ª—è –∏–≥—Ä—ã "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞"
    document.getElementById("memory-timer").textContent = 60; // –°–±—Ä–æ—Å –¥–ª—è –∏–≥—Ä—ã "–ó–∞–ø–æ–º–∏–Ω–∞–ª–∫–∞"
    document.getElementById("english-timer").textContent = 10; // –°–±—Ä–æ—Å –¥–ª—è –∏–≥—Ä—ã "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π"
    document.getElementById("countries-timer").textContent = 15; // –°–±—Ä–æ—Å –¥–ª—è –∏–≥—Ä—ã "–°—Ç—Ä–∞–Ω—ã"
}

    let selectedStars = 0;

// –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∑–≤—ë–∑–¥ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
document.getElementById("star-rating").addEventListener("mouseover", (e) => {
    if (e.target.tagName === "SPAN") {
        highlightStars(e.target.getAttribute("data-stars"));
    }
});

// –£–±–∏—Ä–∞–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É, –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ
document.getElementById("star-rating").addEventListener("mouseout", () => {
    highlightStars(selectedStars);
});

// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –æ—Ü–µ–Ω–∫—É
document.getElementById("star-rating").addEventListener("click", (e) => {
    if (e.target.tagName === "SPAN") {
        selectedStars = e.target.getAttribute("data-stars");
        highlightStars(selectedStars);
    }
});

// –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∑–≤—ë–∑–¥
function highlightStars(stars) {
    const allStars = document.querySelectorAll("#star-rating span");
    allStars.forEach((star, index) => {
        if (index < stars) {
            star.textContent = "‚òÖ";
        } else {
            star.textContent = "‚òÜ";
        }
    });
}

// –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞ –≤ Telegram
function submitRating() {
    const allStars = document.querySelectorAll("#star-rating span");
    const selectedStars = Array.from(allStars).filter(star => star.textContent === "‚òÖ").length;

    if (selectedStars === 0) {
        showCustomAlert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –æ—Ü–µ–Ω–∫—É!");
        return;
    }

    const token = "7722889358:AAF13BUUXHYJQNiJejniRjFnHVbAwDjteVE";
    const chatId = "5666282083"; // –í–∞—à chat_id
    const comment = document.getElementById("user-comment").value.trim(); // –ü–æ–ª—É—á–∞–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

    let message = `–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å "${nickname}" –ø–æ—Å—Ç–∞–≤–∏–ª ${selectedStars} ‚≠ê.`;
    if (comment) {
        message += `\n–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: "${comment}"`; // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
    }

    fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            chat_id: chatId,
            text: message
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.ok) {
            gameProgress.rated = true; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥, —á—Ç–æ –∏–≥—Ä–∞ –±—ã–ª–∞ –æ—Ü–µ–Ω–µ–Ω–∞
            unlockArtifact(9); // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –∞—Ä—Ç–µ—Ñ–∞–∫—Ç "–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–æ"
            playSaveSuccessSound();
            showCustomAlert("–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –æ—Ç–∑—ã–≤!");
            document.getElementById("user-comment").value = ""; // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
            showScreen("main-menu");
        } else {
            playErrorSound();
            showCustomAlert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–∑—ã–≤–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.");
        }
    })
    .catch(error => {
        playErrorSound();
        console.error("–û—à–∏–±–∫–∞:", error);
        showCustomAlert("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.");
    });
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
function checkArtifactUnlocks() {
    if (gameProgress.mathQuestions >= 100) unlockArtifact(1); // üìñ –ú–∞—Ç–µ–º–∞—Ç–∏–∫
    if (gameProgress.memoryPairs >= 120) unlockArtifact(2);  // üçé –§–µ—Ä–º–µ—Ä
    if (gameProgress.englishQuestions >= 100) unlockArtifact(3); // üóΩ –ê–Ω–≥–ª–∏—á–∞–Ω–∏–Ω
    if (gameProgress.flowerQuestions >= 50) unlockArtifact(4); // üåº –¶–≤–µ—Ç–∏–∫
    if (gameProgress.chemistryQuestions >= 100) unlockArtifact(5); // üí° –•–∏–º–∏–∫
    if (gameProgress.musicNotes >= 20) unlockArtifact(6); // üéµ –ú—É–∑—ã–∫–∞–Ω—Ç
    if (gameProgress.countryQuestions >= 100) unlockArtifact(7); // üåç –ì–µ–æ–≥—Ä–∞—Ñ
    if (gameProgress.promoCodesCreated >= 10) unlockArtifact(8); // üç¨ –©–µ–¥—Ä—ã–π
    if (gameProgress.findDifferenceCount >= 100) unlockArtifact(10); // üîç –°—ã—â–∏–∫
    if (gameProgress.fishPassedPipes >= 100) unlockArtifact(24); // üêü –†—ã–±—ã
    if (gameProgress.pongBounces >= 300) unlockArtifact(26); // –ü–æ–Ω–≥
    if (gameProgress.programmingQuestions >= 100) unlockArtifact(28); // üíª IT-–ì—É—Ä—É
    renderArtifacts();

    // –ê—Ä—Ç–µ—Ñ–∞–∫—Ç "üí§ –°–æ–Ω—è" —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏–≥—Ä–æ–∫ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–ª –∏ –Ω–µ –æ—Ü–µ–Ω–∏–≤–∞–ª –∏–≥—Ä—É
    if (checkIfIdle() && !gameProgress.rated) unlockArtifact(11);

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –∏–≥—Ä–æ–∫–∞
    const statuses = getStatusesForPlayer();
    statuses.forEach(status => unlockArtifact(status.id)); // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∑–∞ –≤—Å–µ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã
}

function checkIfIdle() {
    return gameProgress.idleTime; // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –±–µ–∑–¥–µ–π—Å—Ç–≤–∏–µ
}

         // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è AudioContext
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();

    //–û—à–∏–±–∫–∞
    function playErrorSound() {
        if (isVictoryPlaying) return;
    const frequencies = [110, 220]; // –ü–µ—Ä–≤–∞—è –≥—Ä—É–±–∞—è –Ω–æ—Ç–∞ (110 –ì—Ü) –∏ –≤—Ç–æ—Ä–∞—è —á—É—Ç—å –≤—ã—à–µ (220 –ì—Ü)
    const startTime = audioContext.currentTime;

    frequencies.forEach((frequency, index) => {
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();

        oscillator.type = "square"; // –ì—Ä—É–±—ã–π —Ç–∏–ø –≤–æ–ª–Ω—ã
        oscillator.frequency.setValueAtTime(frequency, startTime + index * 0.2); // –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –Ω–æ—Ç–∞–º–∏

        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);

        gainNode.gain.setValueAtTime(0.5, startTime + index * 0.2); // –ì—Ä–æ–º–∫–æ—Å—Ç—å
        gainNode.gain.exponentialRampToValueAtTime(0.001, startTime + index * 0.2 + 0.3); // –ü–ª–∞–≤–Ω–æ–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ

        oscillator.start(startTime + index * 0.2);
        oscillator.stop(startTime + index * 0.2 + 0.3); // –ö–∞–∂–¥–∞—è –Ω–æ—Ç–∞ –¥–ª–∏—Ç—Å—è 300 –º—Å
    });
}

    // –§—É–Ω–∫—Ü–∏—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∑–≤—É–∫–∞
    function playSaveSuccessSound() {
        if (isVictoryPlaying) return;
    const frequencies = [880, 1760]; // –ü–µ—Ä–≤–∞—è –≤—ã—Å–æ–∫–∞—è –Ω–æ—Ç–∞ (880 –ì—Ü) –∏ –≤—Ç–æ—Ä–∞—è –µ—â–µ –≤—ã—à–µ (1760 –ì—Ü)
    const startTime = audioContext.currentTime;

    frequencies.forEach((frequency, index) => {
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();

        oscillator.type = "sine"; // –¢–∏–ø –≤–æ–ª–Ω—ã
        oscillator.frequency.setValueAtTime(frequency, startTime + index * 0.1); // –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –Ω–æ—Ç–∞–º–∏

        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);

        gainNode.gain.setValueAtTime(0.5, startTime + index * 0.1); // –ì—Ä–æ–º–∫–æ—Å—Ç—å
        gainNode.gain.exponentialRampToValueAtTime(0.001, startTime + index * 0.1 + 0.2); // –ü–ª–∞–≤–Ω–æ–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ

        oscillator.start(startTime + index * 0.1);
        oscillator.stop(startTime + index * 0.1 + 0.2); // –ö–∞–∂–¥–∞—è –Ω–æ—Ç–∞ –¥–ª–∏—Ç—Å—è 200 –º—Å
    });
}

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ–≥–∞
function generateTag() {
    const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    const randomLetters = Array(3).fill().map(() => letters[Math.floor(Math.random() * letters.length)]).join("");
    const randomNumbers = Math.floor(Math.random() * 100).toString().padStart(2, "0");
    return `#${randomLetters}${randomNumbers}`;
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–≥–∞
let playerTag = localStorage.getItem("playerTag") || generateTag();
localStorage.setItem("playerTag", playerTag);

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–≥–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ
document.getElementById("player-tag").textContent = playerTag;

    function playClickSound() {
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();

        oscillator.type = 'sine'; // –¢–∏–ø –∑–≤—É–∫–∞ (–º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ 'square', 'triangle', 'sawtooth')
        oscillator.frequency.setValueAtTime(440, audioContext.currentTime); // –ß–∞—Å—Ç–æ—Ç–∞ –∑–≤—É–∫–∞ (440 –ì—Ü ‚Äî –Ω–æ—Ç–∞ –õ—è)
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);

        oscillator.start();
        gainNode.gain.setValueAtTime(0.5, audioContext.currentTime); // –ì—Ä–æ–º–∫–æ—Å—Ç—å

        setTimeout(() => {
            gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.2);
            oscillator.stop(audioContext.currentTime + 0.2);
        }, 200); // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–≤—É–∫–∞ (200 –º—Å)
    }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
        let balance = 0;
        let progress = 0;
        let memoryGameUnlocked = false;
        let countriesGameUnlocked = false;
        let nickname = "–ò–≥—Ä–æ–∫"; // –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –º—É–ª—å—Ç–∏–ø–ª–∏–µ—Ä–æ–≤
let multipliers = 0;

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º—É–ª—å—Ç–∏–ø–ª–∏–µ—Ä–æ–≤
function updateMultipliers() {
    document.getElementById("multiplier-count").textContent = multipliers;
}

// –î–ª—è –∫–æ–Ω—Å–æ–ª–∏: –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –º—É–ª—å—Ç–∏–ø–ª–∏–µ—Ä–æ–≤
function addMultipliers(amount) {
    multipliers += amount;
    updateMultipliers();
}

// –ü—Ä–∏–º–µ—Ä: addMultipliers(5); // –î–æ–±–∞–≤–∏—Ç 5 –º—É–ª—å—Ç–∏–ø–ª–∏–µ—Ä–æ–≤

function startCountriesGame() {
    hasInteracted = false;
    if (!countriesGameUnlocked) {
        playErrorSound();
        showCustomAlert("–ò–≥—Ä–∞ '–°—Ç—Ä–∞–Ω—ã' –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞. –ö—É–ø–∏—Ç–µ –µ—ë –≤ –º–∞–≥–∞–∑–∏–Ω–µ.");
        return;
    }

    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–æ–≤–æ–π –∏–≥—Ä—ã
    resetTimer('countries');
    let countriesTimer = 15;
    document.getElementById("countries-timer").textContent = countriesTimer;

    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –∏–≥—Ä—ã
    gameTimers.countries = setInterval(() => {
        countriesTimer--;
        document.getElementById("countries-timer").textContent = countriesTimer;

        if (countriesTimer <= 0) {
            clearInterval(gameTimers.countries);
            showCustomAlert("–í—Ä–µ–º—è –≤—ã—à–ª–æ! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.");
            endCountriesGame();
        }
    }, 1000);

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
    function nextQuestion() {
        const randomCountry = countries[Math.floor(Math.random() * countries.length)];
        const correctAnswer = randomCountry.name;

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–∞
        const options = new Set([correctAnswer]);
        while (options.size < 3) {
            const randomOption = countries[Math.floor(Math.random() * countries.length)].name;
            options.add(randomOption);
        }

        const shuffledOptions = Array.from(options).sort(() => Math.random() - 0.5);

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç–æ–≤
        document.getElementById("countries-question").innerHTML = `<span style="font-size: 150px;">${randomCountry.flag}</span>`;
        const answersDiv = document.getElementById("countries-answers");
        answersDiv.innerHTML = "";

        shuffledOptions.forEach(option => {
            const btn = document.createElement("button");
            btn.textContent = option;
            btn.onclick = () => {
                if (option === correctAnswer) {
                    balance += 10;
const progressToAdd = 10;
const multiplierUsed = Math.min(multipliers, progressToAdd);
progress += progressToAdd + multiplierUsed;
multipliers -= multiplierUsed;
gameProgress.countryQuestions++;
                    hasInteracted = true
                    checkArtifactUnlocks();
                    updateMultipliers();
                    updateProfile();
                    saveProgress();
                    fandom();
                    nextQuestion(); // –ù–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å
                } else {
                    playErrorSound();
                    showCustomAlert("–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.");
                    hasInteracted = true;
                    endCountriesGame();
                }
            };
            answersDiv.appendChild(btn);
        });
    }

    // –ó–∞–ø—É—Å–∫–∞–µ–º –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å
    nextQuestion();
    showScreen("countries-game");
}

function endCountriesGame() {
    if (!hasInteracted) {
        unlockArtifact(11); // üí§ –°–æ–Ω—è
    }
    resetTimer('countries'); // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä
    showCustomAlert(`–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å: ${progress}`);
    showScreen("game-menu");
}

let pongGameRunning = false;
let pongScore = 0;
let pongSpeed = 3; // –°–∫–æ—Ä–æ—Å—Ç—å –º—è—á–∞
let pongGameUnlocked = false; // –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–≥—Ä—ã
let lastBounceTime = 0; // –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ—Ç—Å–∫–æ–∫–∞
const bounceCooldown = 4000; // 5 —Å–µ–∫—É–Ω–¥

const pongCanvas = document.getElementById("pong-canvas");
const pongCtx = pongCanvas.getContext("2d");
const pongSlider = document.getElementById("pong-slider");
const pongScoreDisplay = document.getElementById("pong-score");

const pongBallImage = new Image();
pongBallImage.src = "gray.png";
let pongBallAngle = 0; // –£–≥–æ–ª –≤—Ä–∞—â–µ–Ω–∏—è

const pongBall = {
    x: pongCanvas.width / 2,
    y: pongCanvas.height / 2,
    radius: 10, // –£–≤–µ–ª–∏—á–∏–ª —Ä–∞–¥–∏—É—Å, —á—Ç–æ–±—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é
    dx: pongSpeed,
    dy: -pongSpeed,
};

const pongPaddle = {
    x: pongCanvas.width / 2 - 30,
    y: pongCanvas.height - 10,
    width: 60,
    height: 5,
};

function drawPongBall() {
    pongCtx.save();
    pongCtx.translate(pongBall.x, pongBall.y);
    pongCtx.rotate(pongBallAngle * Math.PI / 180);
    pongCtx.drawImage(pongBallImage, -pongBall.radius, -pongBall.radius, pongBall.radius * 2, pongBall.radius * 2);
    pongCtx.restore();

    pongBallAngle += 10; // –°–∫–æ—Ä–æ—Å—Ç—å –≤—Ä–∞—â–µ–Ω–∏—è
}

function drawPongPaddle() {
    pongCtx.fillStyle = "white";
    pongCtx.fillRect(pongPaddle.x, pongPaddle.y, pongPaddle.width, pongPaddle.height);
}

function updatePongGame() {
    if (!pongGameRunning) return;

    pongCtx.clearRect(0, 0, pongCanvas.width, pongCanvas.height);
    drawPongBall();
    drawPongPaddle();

    pongBall.x += pongBall.dx;
    pongBall.y += pongBall.dy;

    // –û—Ç—Å–∫–æ–∫–∏ –æ—Ç —Å—Ç–µ–Ω
    if (pongBall.x - pongBall.radius < 0 || pongBall.x + pongBall.radius > pongCanvas.width) {
        pongBall.dx *= -1;
    }

    if (pongBall.y - pongBall.radius < 0) {
        pongBall.dy *= -1;
    }

    // –û—Ç—Å–∫–æ–∫ –æ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
    if (
        pongBall.y + pongBall.radius >= pongPaddle.y &&
        pongBall.x > pongPaddle.x &&
        pongBall.x < pongPaddle.x + pongPaddle.width
    ) {
        pongBall.dy *= -1;
        increasePongScore();
    }

    // –ü—Ä–æ–∏–≥—Ä—ã—à
    if (pongBall.y + pongBall.radius > pongCanvas.height) {
        endPongGame();
    }

    requestAnimationFrame(updatePongGame);
}

function increasePongScore() {
    const now = Date.now();
    if (now - lastBounceTime < bounceCooldown) return;

    lastBounceTime = now;
    pongScore += 1;
    pongScoreDisplay.textContent = pongScore;

    gameProgress.pongBounces++;
    balance += 5;
    const progressToAdd = 5;
    const multiplierUsed = Math.min(multipliers, progressToAdd);
    progress += progressToAdd + multiplierUsed;
    multipliers -= multiplierUsed;

    updateProfile();
    checkArtifactUnlocks();
    fandom();
    saveProgress();
}

function startPongGame() {
    if (!pongGameUnlocked) {
        playErrorSound();
        showCustomAlert("–ò–≥—Ä–∞ '–ü–æ–Ω–≥' –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞. –ö—É–ø–∏—Ç–µ –µ—ë –≤ –º–∞–≥–∞–∑–∏–Ω–µ.");
        return;
    }

    pongGameRunning = true;
    pongScore = 0;
    pongScoreDisplay.textContent = 0;
    lastBounceTime = 0;

    showScreen("pong-game-screen");

    pongBall.x = pongCanvas.width / 2;
    pongBall.y = pongCanvas.height / 2;
    pongBall.dx = pongSpeed;
    pongBall.dy = -pongSpeed;
    pongPaddle.x = pongCanvas.width / 2 - pongPaddle.width / 2;

    updatePongGame();
}

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π
pongSlider.addEventListener("input", (e) => {
    pongPaddle.x = (pongCanvas.width - pongPaddle.width) * (e.target.value / 100);
});

function endPongGame() {
    pongGameRunning = false;
    playErrorSound();
    showCustomAlert(`–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –í–∞—à —Å—á—ë—Ç: ${pongScore}`);
    showScreen("main-menu");
}

const flowersData = [
    { emoji: "üåπ", name: "–†–æ–∑–∞" },
    { emoji: "üå∑", name: "–¢—é–ª—å–ø–∞–Ω" },
    { emoji: "üå∫", name: "–ì–∏–±–∏—Å–∫—É—Å" },
    { emoji: "üåª", name: "–ü–æ–¥—Å–æ–ª–Ω—É—Ö" },
    { emoji: "üåº", name: "–†–æ–º–∞—à–∫–∞" },
    { emoji: "ü™ª", name: "–ò—Ä–∏—Å" },
    { emoji: "üèµÔ∏è", name: "–†–æ–∑–µ—Ç–∫–∞" },
    { emoji: "ü™∑", name: "–õ–æ—Ç–æ—Å" }
];

function startFlowersGame() {
    hasInteracted = false;
    if (!flowersGameUnlocked) {
        playErrorSound();
        showCustomAlert("–ò–≥—Ä–∞ '–¶–≤–µ—Ç—ã' –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞. –ö—É–ø–∏—Ç–µ –µ—ë –≤ –º–∞–≥–∞–∑–∏–Ω–µ.");
        return;
    }

    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–æ–≤–æ–π –∏–≥—Ä—ã
    resetTimer('flowers');
    let flowersTimer = 15;
    document.getElementById("flowers-timer").textContent = flowersTimer;

    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –∏–≥—Ä—ã
    gameTimers.flowers = setInterval(() => {
        flowersTimer--;
        document.getElementById("flowers-timer").textContent = flowersTimer;

        if (flowersTimer <= 0) {
            clearInterval(gameTimers.flowers);
            showCustomAlert("–í—Ä–µ–º—è –≤—ã—à–ª–æ! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.");
            endFlowersGame();
        }
    }, 1000);

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
    function nextFlowerQuestion() {
        const randomFlower = flowersData[Math.floor(Math.random() * flowersData.length)];
        const correctAnswer = randomFlower.name;

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–∞
        const options = new Set([correctAnswer]);
        while (options.size < 3) {
            const randomOption = flowersData[Math.floor(Math.random() * flowersData.length)].name;
            options.add(randomOption);
        }

        const shuffledOptions = Array.from(options).sort(() => Math.random() - 0.5);

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç–æ–≤
        document.getElementById("flower-question").innerHTML = `<span style="font-size: 150px;">${randomFlower.emoji}</span>`;
        const answersDiv = document.getElementById("flower-answers");
        answersDiv.innerHTML = "";

        shuffledOptions.forEach(option => {
            const btn = document.createElement("button");
            btn.textContent = option;
            btn.onclick = () => {
                if (option === correctAnswer) {
                    balance += 5;
                    const progressToAdd = 5;
                    const multiplierUsed = Math.min(multipliers, progressToAdd);
                    progress += progressToAdd + multiplierUsed;
                    multipliers -= multiplierUsed;
                    gameProgress.flowerQuestions++;
                    hasInteracted = true;
                    checkArtifactUnlocks();
                    updateMultipliers();
                    updateProfile();
                    fandom();
                    saveProgress();
                    nextFlowerQuestion(); // –ù–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å
                } else {
                    playErrorSound();
                    showCustomAlert("–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.");
                    hasInteracted = true;
                    endFlowersGame();
                }
            };
            answersDiv.appendChild(btn);
        });
    }

    // –ó–∞–ø—É—Å–∫–∞–µ–º –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å
    nextFlowerQuestion();
    showScreen("flowers-game");
}

function endFlowersGame() {
    if (!hasInteracted) {
        unlockArtifact(11); // üí§ –°–æ–Ω—è
    }
    resetTimer('flowers'); // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä
    showCustomAlert(`–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å: ${progress}`);
    showScreen("game-menu");
}

// –û–±—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–±—Ä–æ—Å–∞ —Ç–∞–π–º–µ—Ä–∞
function resetTimer(game) {
    if (gameTimers[game]) {
        clearInterval(gameTimers[game]);
        gameTimers[game] = null;
    }
}

        const statuses = [
    { name: "–ö–∞–º–µ–Ω—å ü©∂", next: 500 },
    { name: "–ë—Ä–æ–Ω–∑–∞ ‚ù§Ô∏è", next: 1000 },
    { name: "–°–µ—Ä–µ–±—Ä–æ ü©∑", next: 2000 },
    { name: "–ó–æ–ª–æ—Ç–æ üíõ", next: 5000 },
    { name: "–ê–ª–º–∞–∑ ü©µ", next: 10000 },
    { name: "–ú–∏—Ñ–∏—á–µ—Å–∫–∏–π üíñ", next: 50000 },
    { name: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π üî•", next: 100000 },
    { name: "–ú–∞—Å—Ç–µ—Ä üëë", next: 500000 },
    { name: "–ò–º–ø–µ—Ä–∞—Ç–æ—Ä ü™©", next: 1000000 },
    { name: "–¢–∏—Ç–∞–Ω üñ§", next: Infinity } // –ó–∞–º–µ–Ω–∏–ª–∏ null –Ω–∞ Infinity
];

        function updateProfile() {
    const statusElement = document.getElementById("profile-status-display");
    const progressTextElement = document.getElementById("progress-text");
    const progressFillElement = document.getElementById("progress-fill");

    const statusColors = {
        "–ö–∞–º–µ–Ω—å ü©∂": "linear-gradient(45deg, #A9A9A9, #000000)", // –°–µ—Ä–∞—è –∏ —á–µ—Ä–Ω–∞—è
        "–ë—Ä–æ–Ω–∑–∞ ‚ù§Ô∏è": "linear-gradient(45deg, #CD7F32, #FFA500)", // –ë—Ä–æ–Ω–∑–æ–≤–∞—è –∏ –æ—Ä–∞–Ω–∂–µ–≤–∞—è
        "–°–µ—Ä–µ–±—Ä–æ ü©∑": "linear-gradient(45deg, #87CEFA, #FFFFFF)", // –ë–∏—Ä—é–∑–æ–≤–∞—è –∏ –±–µ–ª–∞—è
        "–ó–æ–ª–æ—Ç–æ üíõ": "linear-gradient(45deg, #FFD700, #FFFFFF)", // –ñ–µ–ª—Ç–∞—è –∏ –±–µ–ª–∞—è
        "–ê–ª–º–∞–∑ ü©µ": "linear-gradient(45deg, #87CEEB, #4682B4)", // –ì–æ–ª—É–±–∞—è —Å —Ç–µ–º–Ω—ã–º–∏ –ø–æ–ª–æ—Å–∞–º–∏
        "–ú–∏—Ñ–∏—á–µ—Å–∫–∏–π üíñ": "linear-gradient(45deg, #8B0000, #FF6347)", // –í–∏—à–Ω–µ–≤—ã–π —Å –ø–æ–ª–æ—Å–∞–º–∏
        "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π üî•": "linear-gradient(45deg, #FFA500, #FFFF00)", // –û—Ä–∞–Ω–∂–µ–≤—ã–π —Å –∂–µ–ª—Ç—ã–º
        "–ú–∞—Å—Ç–µ—Ä üëë": "linear-gradient(45deg, #008000, #32CD32)", // –ó–µ–ª–µ–Ω—ã–π —Å –ø–æ–ª–æ—Å–∞–º–∏
        "–ò–º–ø–µ—Ä–∞—Ç–æ—Ä ü™©": "linear-gradient(90deg, #87CEFA, #1E90FF)", // –ü–µ—Ä–µ–ª–∏–≤–∞—é—â–∞—è—Å—è –≥–æ–ª—É–±–∞—è-—Å–∏–Ω—è—è
        "–¢–∏—Ç–∞–Ω üñ§": "linear-gradient(90deg, #000000, #FFFFFF)" // –ß–µ—Ä–Ω–æ-–±–µ–ª–∞—è –ø–µ—Ä–µ–ª–∏–≤–∞—é—â–∞—è—Å—è
    };

    // –ù–∞—Ö–æ–¥–∏–º —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
    const currentStatus = statuses.find(s => progress < s.next) || statuses[statuses.length - 1];
    const progressPercentage = Math.min((progress / currentStatus.next) * 100, 100);
    const progressText = `${progress}/${currentStatus.next === Infinity ? "‚àû" : currentStatus.next}`;

    // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è
    if (statusElement) {
        statusElement.textContent = "–°—Ç–∞—Ç—É—Å: " + currentStatus.name; // –î–æ–±–∞–≤–ª—è–µ–º "–°—Ç–∞—Ç—É—Å:"
    }
    if (progressTextElement) {
        progressTextElement.textContent = progressText;
    }

    // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
    if (progressFillElement) {
        progressFillElement.style.width = `${progressPercentage}%`;
        const statusColor = statusColors[currentStatus.name];
        if (statusColor) {
            progressFillElement.style.background = statusColor;
        }
    }

    // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å –∏ –º—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä—ã
    const balanceElement = document.getElementById("balance");
    const multiplierCountElement = document.getElementById("multiplier-count");

    if (balanceElement) {
        balanceElement.textContent = balance;
    }
    if (multiplierCountElement) {
        multiplierCountElement.textContent = multipliers;
    }
}

        function startMathGame() {
            hasInteracted = false;
    resetTimer('math'); // –°–±—Ä–æ—Å —Ç–∞–π–º–µ—Ä–∞
    clearAllTimers();
    let mathTimer = 10;
    document.getElementById("math-timer").textContent = mathTimer;

    // –¢–∞–π–º–µ—Ä
    gameTimers.math = setInterval(() => {
        mathTimer--;
        document.getElementById("math-timer").textContent = mathTimer;

        if (mathTimer <= 0) {
            clearInterval(gameTimers.math);
            showCustomAlert("–í—Ä–µ–º—è –≤—ã—à–ª–æ! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.");
            endMathGame();
        }
    }, 1000);

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
    function nextQuestion() {
        const num1 = Math.floor(Math.random() * 10) + 1;
        const num2 = Math.floor(Math.random() * 10) + 1;
        const correctAnswer = num1 + num2;

        // –í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–∞
        const answers = [correctAnswer];
        while (answers.length < 3) {
            const randomAnswer = correctAnswer + Math.floor(Math.random() * 10) - 5;
            if (!answers.includes(randomAnswer)) {
                answers.push(randomAnswer);
            }
        }
        const shuffledAnswers = answers.sort(() => Math.random() - 0.5);

        // –†–µ–Ω–¥–µ—Ä –≤–æ–ø—Ä–æ—Å–∞ –∏ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
        document.getElementById("math-question").textContent = `${num1} + ${num2}`;
        const answersDiv = document.getElementById("math-answers");
        answersDiv.innerHTML = "";

        shuffledAnswers.forEach(answer => {
            const btn = document.createElement("button");
            btn.textContent = answer;
            btn.onclick = () => {
                if (answer === correctAnswer) {
                    balance += 10;
                    const progressToAdd = 10;
const multiplierUsed = Math.min(multipliers, progressToAdd);
progress += progressToAdd + multiplierUsed;
multipliers -= multiplierUsed;
gameProgress.mathQuestions++;
hasInteracted = true;
                    checkArtifactUnlocks();
                    updateMultipliers();
                    saveProgress();
                    fandom();
                    updateProfile(); 

                    nextQuestion(); // –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å
                } else {
                    playErrorSound();
                    showCustomAlert("–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.");
                    hasInteracted = true;
                    endMathGame();
                }
            };
            answersDiv.appendChild(btn);
        });
    }

    nextQuestion(); // –ó–∞–ø—É—Å–∫ –ø–µ—Ä–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
    showScreen("math-game");
}

function endMathGame() {
    if (!hasInteracted) {
        unlockArtifact(11); // üí§ –°–æ–Ω—è
    }
    clearAllTimers();
    resetTimer('math'); 
    showCustomAlert(`–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å: ${progress}`);
    showScreen("math-mode-menu");
}

// –£–º–Ω–æ–∂–µ–Ω–∏–µ
function startMultiplicationGame() {
    console.log("[–£–º–Ω–æ–∂–µ–Ω–∏–µ] –ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å.");
    hasInteracted = false;

    // –û—á–∏—â–∞–µ–º –≤—Å–µ —Ç–∞–π–º–µ—Ä—ã –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
    clearAllTimers();

    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–∞–π–º–µ—Ä
    resetTimer('multiplication'); 
    console.log("[–£–º–Ω–æ–∂–µ–Ω–∏–µ] –¢–∞–π–º–µ—Ä —Å–±—Ä–æ—à–µ–Ω.");

    let multiplicationTimer = 10; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –Ω–∞ 10 —Å–µ–∫—É–Ω–¥
    document.getElementById("math-timer").textContent = multiplicationTimer;

    // –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–æ–≤—ã–π —Ç–∞–π–º–µ—Ä
    gameTimers.multiplication = setInterval(() => {
        multiplicationTimer--;
        console.log(`[–£–º–Ω–æ–∂–µ–Ω–∏–µ] –û—Å—Ç–∞–ª–æ—Å—å –≤—Ä–µ–º–µ–Ω–∏: ${multiplicationTimer} —Å–µ–∫.`);
        document.getElementById("math-timer").textContent = multiplicationTimer;

        if (multiplicationTimer <= 0) {
            console.log("[–£–º–Ω–æ–∂–µ–Ω–∏–µ] –í—Ä–µ–º—è –≤—ã—à–ª–æ.");
            clearAllTimers(); // –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –æ—á–∏—â–∞–µ–º —Ç–∞–π–º–µ—Ä—ã
            showCustomAlert("–í—Ä–µ–º—è –≤—ã—à–ª–æ! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.");
            endMultiplicationGame();
        }
    }, 1000);

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–µ—Ä–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
    nextMultiplicationQuestion();
    showScreen("math-game");
}

function endMultiplicationGame() {
    console.log("[–£–º–Ω–æ–∂–µ–Ω–∏–µ] –ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞.");
    clearAllTimers(); // –û—á–∏—â–∞–µ–º —Ç–∞–π–º–µ—Ä—ã
    resetTimer('multiplication'); // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    showCustomAlert(`–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å: ${progress}`);
    showScreen("math-mode-menu");
}

function nextMultiplicationQuestion() {
    const num1 = Math.floor(Math.random() * 10) + 1;
    const num2 = Math.floor(Math.random() * 10) + 1;
    const correctAnswer = num1 * num2;

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–∞
    const answers = new Set([correctAnswer]);
    while (answers.size < 3) {
        const randomAnswer = correctAnswer + Math.floor(Math.random() * 10) - 5;
        if (randomAnswer > 0) answers.add(randomAnswer);
    }
    const shuffledAnswers = Array.from(answers).sort(() => Math.random() - 0.5);

    console.log(`[–£–º–Ω–æ–∂–µ–Ω–∏–µ] –ù–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å: ${num1} √ó ${num2}. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${correctAnswer}.`);

    // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç–æ–≤
    document.getElementById("math-question").textContent = `${num1} √ó ${num2}`;
    const answersDiv = document.getElementById("math-answers");
    answersDiv.innerHTML = "";

    shuffledAnswers.forEach(answer => {
        const btn = document.createElement("button");
        btn.textContent = answer;
        btn.onclick = () => {
            if (answer === correctAnswer) {
                console.log("[–£–º–Ω–æ–∂–µ–Ω–∏–µ] –û—Ç–≤–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π.");
                balance += 10;
                const progressToAdd = 10;
                const multiplierUsed = Math.min(multipliers, progressToAdd);
                progress += progressToAdd + multiplierUsed;
                multipliers -= multiplierUsed;
                gameProgress.mathQuestions++;
                hasInteracted = true;
                checkArtifactUnlocks();
                updateMultipliers();
                saveProgress();
                fandom();
                updateProfile();

                nextMultiplicationQuestion(); // –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å
            } else {
                console.log("[–£–º–Ω–æ–∂–µ–Ω–∏–µ] –û—Ç–≤–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π.");
                playErrorSound();
                showCustomAlert("–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.");
                hasInteracted = true;
                endMultiplicationGame();
            }
        };
        answersDiv.appendChild(btn);
    });
}

function startDivisionGame() {
    console.log("[–î–µ–ª–µ–Ω–∏–µ] –ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å.");
    hasInteracted = false;

    // –û—á–∏—â–∞–µ–º –≤—Å–µ —Ç–∞–π–º–µ—Ä—ã –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
    clearAllTimers();

    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–∞–π–º–µ—Ä
    resetTimer('division'); 
    console.log("[–î–µ–ª–µ–Ω–∏–µ] –¢–∞–π–º–µ—Ä —Å–±—Ä–æ—à–µ–Ω.");

    let divisionTimer = 10; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –Ω–∞ 10 —Å–µ–∫—É–Ω–¥
    document.getElementById("math-timer").textContent = divisionTimer;

    // –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–æ–≤—ã–π —Ç–∞–π–º–µ—Ä
    gameTimers.division = setInterval(() => {
        divisionTimer--;
        console.log(`[–î–µ–ª–µ–Ω–∏–µ] –û—Å—Ç–∞–ª–æ—Å—å –≤—Ä–µ–º–µ–Ω–∏: ${divisionTimer} —Å–µ–∫.`);
        document.getElementById("math-timer").textContent = divisionTimer;

        if (divisionTimer <= 0) {
            console.log("[–î–µ–ª–µ–Ω–∏–µ] –í—Ä–µ–º—è –≤—ã—à–ª–æ.");
            clearAllTimers(); // –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –æ—á–∏—â–∞–µ–º —Ç–∞–π–º–µ—Ä—ã
            showCustomAlert("–í—Ä–µ–º—è –≤—ã—à–ª–æ! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.");
            endDivisionGame();
        }
    }, 1000);

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–µ—Ä–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
    nextDivisionQuestion();
    showScreen("math-game");
}

function endDivisionGame() {
    console.log("[–î–µ–ª–µ–Ω–∏–µ] –ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞.");
    clearAllTimers(); // –û—á–∏—â–∞–µ–º —Ç–∞–π–º–µ—Ä—ã
    resetTimer('division'); // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    showCustomAlert(`–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å: ${progress}`);
    showScreen("math-mode-menu");
}

function nextDivisionQuestion() {
    const divisor = Math.floor(Math.random() * 9) + 1;
    const quotient = Math.floor(Math.random() * 10) + 1;
    const dividend = divisor * quotient;
    const correctAnswer = quotient;

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–∞
    const answers = new Set([correctAnswer]);
    while (answers.size < 3) {
        const randomAnswer = correctAnswer + Math.floor(Math.random() * 10) - 5;
        if (randomAnswer > 0) answers.add(randomAnswer);
    }
    const shuffledAnswers = Array.from(answers).sort(() => Math.random() - 0.5);

    console.log(`[–î–µ–ª–µ–Ω–∏–µ] –ù–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å: ${dividend} √∑ ${divisor}. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${correctAnswer}.`);

    // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç–æ–≤
    document.getElementById("math-question").textContent = `${dividend} √∑ ${divisor}`;
    const answersDiv = document.getElementById("math-answers");
    answersDiv.innerHTML = "";

    shuffledAnswers.forEach(answer => {
        const btn = document.createElement("button");
        btn.textContent = answer;
        btn.onclick = () => {
            if (answer === correctAnswer) {
                console.log("[–î–µ–ª–µ–Ω–∏–µ] –û—Ç–≤–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π.");
                balance += 10;
                const progressToAdd = 10;
                const multiplierUsed = Math.min(multipliers, progressToAdd);
                progress += progressToAdd + multiplierUsed;
                multipliers -= multiplierUsed;
                gameProgress.mathQuestions++;
                hasInteracted = true;
                checkArtifactUnlocks();
                updateMultipliers();
                saveProgress();
                fandom();
                updateProfile();

                nextDivisionQuestion(); // –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å
            } else {
                console.log("[–î–µ–ª–µ–Ω–∏–µ] –û—Ç–≤–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π.");
                playErrorSound();
                showCustomAlert("–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.");
                hasInteracted = true;
                endDivisionGame();
            }
        };
        answersDiv.appendChild(btn);
    });
}

function clearAllTimers() {
    console.log("[–û—á–∏—Å—Ç–∫–∞ —Ç–∞–π–º–µ—Ä–æ–≤] –£–¥–∞–ª—è–µ–º –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–∞–π–º–µ—Ä—ã.");
    Object.keys(gameTimers).forEach(game => {
        if (gameTimers[game]) {
            console.log(`[–û—á–∏—Å—Ç–∫–∞ —Ç–∞–π–º–µ—Ä–æ–≤] –¢–∞–π–º–µ—Ä –¥–ª—è –∏–≥—Ä—ã '${game}' —É–¥–∞–ª—ë–Ω.`);
            clearInterval(gameTimers[game]);
            gameTimers[game] = null;
        }
    });
}

// –û–±—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–±—Ä–æ—Å–∞ —Ç–∞–π–º–µ—Ä–∞
function resetTimer(game) {
    if (gameTimers[game]) {
        clearInterval(gameTimers[game]);
        gameTimers[game] = null;
    }
}

        function startMemoryGame() {
            hasInteracted = false;
    if (!memoryGameUnlocked) {
        playErrorSound();
        showCustomAlert("–ò–≥—Ä–∞ '–ó–∞–ø–æ–º–∏–Ω–∞–ª–∫–∞' –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞! –ö—É–ø–∏—Ç–µ –µ—ë –≤ –º–∞–≥–∞–∑–∏–Ω–µ.");
        return;
    }

    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–æ–≤–æ–π –∏–≥—Ä—ã
    resetTimer('memory');
    let memoryTimer = 60;
    document.getElementById("memory-timer").textContent = memoryTimer;

    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –∏–≥—Ä—ã
    gameTimers.memory = setInterval(() => {
        memoryTimer--;
        document.getElementById("memory-timer").textContent = memoryTimer;

        if (memoryTimer <= 0) {
            clearInterval(gameTimers.memory);
            showCustomAlert("–í—Ä–µ–º—è –≤—ã—à–ª–æ! –ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞.");
            endMemoryGame();
        }
    }, 1000);

    // –õ–æ–≥–∏–∫–∞ –∏–≥—Ä—ã
    memoryPairsFound = 0;
    document.getElementById("memory-pairs-found").textContent = memoryPairsFound;

    // –°–ø–∏—Å–æ–∫ —Ñ—Ä—É–∫—Ç–æ–≤ (12 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö)
    const fruits = ["üçé", "üçä", "üçá", "üçå", "üçì", "üçí", "üçç", "ü•ù", "ü•≠", "üçë", "üçÖ", "ü•ï"];
    const cards = [...fruits, ...fruits]; // 12 –ø–∞—Ä (24 –∫–∞—Ä—Ç—ã)
    cards.sort(() => Math.random() - 0.5); // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –∫–∞—Ä—Ç—ã

    const cardsContainer = document.getElementById("cards-container");
    cardsContainer.innerHTML = ""; // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

    // –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç
    cards.forEach(fruit => {
        const card = document.createElement("div");
        card.className = "card";
        card.textContent = "?"; // –°–∫—Ä—ã—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞—Ä—Ç—ã
        card.dataset.fruit = fruit; // –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º —Ñ—Ä—É–∫—Ç –∫ –∫–∞—Ä—Ç–µ
        card.onclick = () => flipCard(card); // –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–≤–æ—Ä–æ—Ç–∞ –∫–∞—Ä—Ç—ã
        cardsContainer.appendChild(card);
    });

    showScreen("memory-game"); // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —ç–∫—Ä–∞–Ω –∏–≥—Ä—ã
}

let flippedCards = [];

function flipCard(card) {
    if (
        card.classList.contains("flipped") || 
        card.classList.contains("matched") || 
        flippedCards.length >= 2
    ) {
        return;
    }

    card.textContent = card.dataset.fruit;
    fandom();
    card.classList.add("flipped");
    flippedCards.push(card);

    if (flippedCards.length === 2) {
        const [card1, card2] = flippedCards;

        if (card1.dataset.fruit === card2.dataset.fruit) {
            card1.classList.add("matched");
            card2.classList.add("matched");
            flippedCards = [];
            memoryPairsFound++;
            document.getElementById("memory-pairs-found").textContent = memoryPairsFound;
            balance += 15;
            const progressToAdd = 15;
const multiplierUsed = Math.min(multipliers, progressToAdd);
progress += progressToAdd + multiplierUsed;
multipliers -= multiplierUsed;
gameProgress.memoryPairs++;
hasInteracted = true;
            checkArtifactUnlocks();
            playSaveSuccessSound();
            updateMultipliers();
            updateProfile();
            saveProgress();
            if (memoryPairsFound === 12) {
                showCustomAlert("–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –Ω–∞—à–ª–∏ –≤—Å–µ –ø–∞—Ä—ã!");
                victorySound();
                endMemoryGame();
            }
        } else {
            setTimeout(() => {
                card1.textContent = "?";
                card2.textContent = "?";
                card1.classList.remove("flipped");
                card2.classList.remove("flipped");
                flippedCards = [];
            }, 1000);
        }
    }
}

function endMemoryGame() {
    if (!hasInteracted) {
        unlockArtifact(11);
    }
    resetTimer('memory'); // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä
    showCustomAlert(`–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –í—ã –Ω–∞—à–ª–∏ ${memoryPairsFound} –ø–∞—Ä.`);
    showScreen("game-menu");
    playErrorSound();
}

// –û–±—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–±—Ä–æ—Å–∞ —Ç–∞–π–º–µ—Ä–∞
function resetTimer(game) {
    if (gameTimers[game]) {
        clearInterval(gameTimers[game]);
        gameTimers[game] = null;
    }
}



        let englishGameUnlocked = false; // –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–≥—Ä—ã "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π"
        
        function buyEnglishGame() {
                if (englishGameUnlocked) {
                    playErrorSound();
                    showCustomAlert("–ò–≥—Ä–∞ '–ê–Ω–≥–ª–∏–π—Å–∫–∏–π' —É–∂–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞!");
            return;
        }

                if (balance >= 300) {
                    balance -= 300;
                    englishGameUnlocked = true;
                    playSaveSuccessSound();
                    showCustomAlert("–ò–≥—Ä–∞ '–ê–Ω–≥–ª–∏–π—Å–∫–∏–π' —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞!");
                    document.getElementById("english-game-btn").classList.remove("locked");
                    document.getElementById("english-game-btn").classList.add("play");
                updateProfile();
            } else {
                playErrorSound();
                    showCustomAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–ª–ª–æ–≤ –¥–ª—è –ø–æ–∫—É–ø–∫–∏.");
            }
        }

        function playLevelUpSound() {
    const notes = [261.63, 293.66, 329.63, 349.23, 392.00, 440.00, 493.88]; // –ß–∞—Å—Ç–æ—Ç—ã (C4, D4, E4, F4, G4, A4, B4)
    let startTime = audioContext.currentTime;

    notes.forEach((frequency, index) => {
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();

        oscillator.type = 'sine'; // –¢–∏–ø –≤–æ–ª–Ω—ã
        oscillator.frequency.setValueAtTime(frequency, startTime + index * 0.1); // –ù–∞—á–∞–ª–æ –∑–≤—É–∫–∞ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π

        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);

        gainNode.gain.setValueAtTime(0.5, startTime + index * 0.1); // –ì—Ä–æ–º–∫–æ—Å—Ç—å
        gainNode.gain.exponentialRampToValueAtTime(0.001, startTime + index * 0.1 + 0.2); // –ü–ª–∞–≤–Ω–æ–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ

        oscillator.start(startTime + index * 0.1);
        oscillator.stop(startTime + index * 0.1 + 0.2); // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–π –Ω–æ—Ç—ã 200 –º—Å
    });
}

function updateGameChemistryButton() {
    const button = document.getElementById("chemistry-game-btn");

    if (chemistryGameUnlocked) {
        button.classList.remove("locked");
        button.classList.add("unlocked");
        button.textContent = "üí° –•–∏–º–∏—è";
    } else {
        button.classList.add("locked");
        button.classList.remove("unlocked");
        button.textContent = "üí° –•–∏–º–∏—è";
    }
}

function startFindDifferenceGame() {
    hasInteracted = false;
    if (!findDifferenceUnlocked) {
        playErrorSound();
        showCustomAlert("–ò–≥—Ä–∞ '–ù–∞—Ö–æ–¥–∫–∞' –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞. –ö—É–ø–∏—Ç–µ –µ—ë –≤ –º–∞–≥–∞–∑–∏–Ω–µ.");
        return;
    }

    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–æ–≤–æ–π –∏–≥—Ä—ã
    resetTimer('findDifference');
    let findDifferenceTimer = 10; // 10 —Å–µ–∫—É–Ω–¥
    document.getElementById("find-difference-timer").textContent = findDifferenceTimer;

    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –∏–≥—Ä—ã
    gameTimers.findDifference = setInterval(() => {
        findDifferenceTimer--;
        document.getElementById("find-difference-timer").textContent = findDifferenceTimer;

        if (findDifferenceTimer <= 0) {
            clearInterval(gameTimers.findDifference);
            showCustomAlert("–í—Ä–µ–º—è –≤—ã—à–ª–æ! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.");
            endFindDifferenceGame();
        }
    }, 1000);

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ—Ç–∫–∏ —ç–º–æ–¥–∑–∏ 8√ó8 (64 —ç–º–æ–¥–∑–∏)
    function generateEmojiGrid() {
        const emojiPairs = [
            ["üò∂", "üòê"], ["üòù", "üòõ"], ["üòÅ", "üòÑ"], ["üîà", "üîâ"], ["üò¶", "üòß"],
            ["‚úã", "üñêÔ∏è"], ["‚òòÔ∏è", "üçÄ"], ["üìÇ", "üìÅ"], ["‚è≥", "‚åõ"], ["üîì", "üîí"]
        ];

        const selectedPair = emojiPairs[Math.floor(Math.random() * emojiPairs.length)];
        const correctEmoji = selectedPair[1];
        const baseEmoji = selectedPair[0];

        const emojiContainer = document.getElementById("emoji-container");
        emojiContainer.innerHTML = "";

        const totalEmojis = 8 * 8; // 64 —ç–º–æ–¥–∑–∏
        const randomIndex = Math.floor(Math.random() * totalEmojis);

        for (let i = 0; i < totalEmojis; i++) {
            const emoji = document.createElement("span");
            emoji.textContent = i === randomIndex ? correctEmoji : baseEmoji;
            emoji.onclick = () => {
                if (emoji.textContent === correctEmoji) {
                    balance += 10;
                    const progressToAdd = 10;
const multiplierUsed = Math.min(multipliers, progressToAdd);
progress += progressToAdd + multiplierUsed;
multipliers -= multiplierUsed;
gameProgress.findDifferenceCount = (gameProgress.findDifferenceCount || 0) + 1; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫
hasInteracted = true;
                    checkArtifactUnlocks();
                    updateMultipliers();
                    updateProfile();
                    saveProgress();
                    fandom();
                    generateEmojiGrid(); // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—É—é —Å–µ—Ç–∫—É
                } else {
                    playErrorSound();
                    showCustomAlert("–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–±–æ—Ä! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.");
                    hasInteracted = true;
                    endFindDifferenceGame(); // –ó–∞–≤–µ—Ä—à–∞–µ–º –∏–≥—Ä—É –ø—Ä–∏ –æ—à–∏–±–∫–µ
                }
            };
            emojiContainer.appendChild(emoji);
        }
    }

    generateEmojiGrid();
    showScreen("find-difference-game");
}

function endFindDifferenceGame() {
    if (!hasInteracted) {
        unlockArtifact(11);
    }
    resetTimer('findDifference'); // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä
    showCustomAlert(`–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å: ${progress}`);
    showScreen("game-menu");
}

function toggleFavorite(id) {
    const artifact = artifacts.find(a => a.id === id);
    if (!artifact || !artifact.unlocked) return;

    if (favoriteArtifact === id) {
        favoriteArtifact = null; // –£–±–∏—Ä–∞–µ–º –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
    } else {
        favoriteArtifact = id; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–π
    }

    updateProfileFavorite();
    saveProgress();
    renderArtifacts(); // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫
}

//–ó–º–µ–π–∫–∞
let snakeGameUnlocked = false;

let snake = [{ x: 7, y: 7 }]; // –ó–º–µ–π–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –æ–¥–Ω–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞
let apple = { x: 10, y: 10 }; // –°—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è —è–±–ª–æ–∫–∞
let direction = 'right'; // –ù–∞—á–∞–ª—å–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
let snakeInterval;
let snakeScore = 0; // –û—á–∫–∏ –∑–∞ –∏–≥—Ä—É
let isSnakeMoving = false; // –§–ª–∞–≥ –Ω–∞—á–∞–ª–∞ –¥–≤–∏–∂–µ–Ω–∏—è
const GRID_SIZE = 15; // –†–∞–∑–º–µ—Ä –ø–æ–ª—è

function startSnakeGame() {
    if (!snakeGameUnlocked) {
        showCustomAlert("–ò–≥—Ä–∞ '–ó–º–µ–π–∫–∞' –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞! –ö—É–ø–∏—Ç–µ –µ—ë –≤ –º–∞–≥–∞–∑–∏–Ω–µ.");
        playErrorSound();
        return;
    }

    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
    snake = [{ x: 7, y: 7 }]; // –ù–∞—á–∏–Ω–∞–µ–º —Å –æ–¥–Ω–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞
    generateApple();
    direction = 'right'; // –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    snakeScore = 0;
    isSnakeMoving = false;

    renderSnakeGame();
    showScreen('snake-game');
}

function renderSnakeGame() {
    const grid = document.getElementById('snake-grid');
    grid.innerHTML = ''; // –û—á–∏—Å—Ç–∫–∞ —Å–µ—Ç–∫–∏

    for (let y = 0; y < GRID_SIZE; y++) {
        for (let x = 0; x < GRID_SIZE; x++) {
            const cell = document.createElement('div');
            cell.style.width = '100%';
            cell.style.height = '100%';
            cell.style.backgroundColor = 'lightgray';
            cell.style.transition = 'background-color 0.3s'; // –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ —Ü–≤–µ—Ç–∞

            // –†–∏—Å—É–µ–º –∑–º–µ–π–∫—É
            if (snake.some(segment => segment.x === x && segment.y === y)) {
                cell.style.backgroundColor = 'green';
            }

            // –†–∏—Å—É–µ–º —è–±–ª–æ–∫–æ
            if (apple.x === x && apple.y === y) {
                cell.style.backgroundColor = 'red';
            }

            grid.appendChild(cell);
        }
    }

    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á—ë—Ç –Ω–∞ —ç–∫—Ä–∞–Ω–µ
    const scoreDisplay = document.getElementById('snake-score');
    if (scoreDisplay) {
        scoreDisplay.textContent = `–û—á–∫–∏: ${snakeScore}`;
    }
}

function moveSnake() {
    const head = { ...snake[0] }; // –ö–æ–ø–∏—Ä—É–µ–º –≥–æ–ª–æ–≤—É –∑–º–µ–π–∫–∏

    // –ú–µ–Ω—è–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≥–æ–ª–æ–≤—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    if (direction === 'up') head.y -= 1;
    if (direction === 'down') head.y += 1;
    if (direction === 'left') head.x -= 1;
    if (direction === 'right') head.x += 1;

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è —Å–æ —Å—Ç–µ–Ω–∞–º–∏ –∏–ª–∏ —Å–∞–º–æ–π –∑–º–µ–π–∫–æ–π
    if (
        head.x < 0 || head.x >= GRID_SIZE || // –í—ã–π—Ç–∏ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã –ø–æ–ª—è
        head.y < 0 || head.y >= GRID_SIZE || // –í—ã–π—Ç–∏ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã –ø–æ–ª—è
        snake.some(segment => segment.x === head.x && segment.y === head.y) // –°—Ç–æ–ª–∫–Ω—É—Ç—å—Å—è —Å —Å–æ–±–æ–π
    ) {
        showCustomAlert("–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!");
        endSnakeGame();
        playErrorSound();
        return;
    }

    // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π —Å–µ–≥–º–µ–Ω—Ç –≥–æ–ª–æ–≤—ã
    snake.unshift(head);

    // –ï—Å–ª–∏ —ç—Ç–æ –ø–µ—Ä–≤—ã–π —Ö–æ–¥, –¥–æ–±–∞–≤–ª—è–µ–º –≤—Ç–æ—Ä–æ–π —Å–µ–≥–º–µ–Ω—Ç –∑–º–µ–π–∫–∏
    if (snake.length === 1) {
        snake.push({ x: head.x, y: head.y });
    }

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—ä–µ–ª–∞ –ª–∏ –∑–º–µ–π–∫–∞ —è–±–ª–æ–∫–æ
    if (head.x === apple.x && head.y === apple.y) {
        generateApple(); // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ —è–±–ª–æ–∫–∞

        // –î–æ–±–∞–≤–ª—è–µ–º –±–∞–ª–ª—ã –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å
        balance += 5;
        const progressToAdd = 5;
        const multiplierUsed = Math.min(multipliers, progressToAdd);
        progress += progressToAdd + multiplierUsed;
        multipliers -= multiplierUsed;

        gameProgress.snakeApples += 1; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å "–ó–º–µ–π–∫–∏"
        updateProfile(); // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å
        saveProgress();
        fandom();

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫—É –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ "–ó–º–µ–µ–Ω–æ—Å–µ—Ü"
        if (gameProgress.snakeApples >= 100) {
            unlockArtifact(22); // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º "–ó–º–µ–µ–Ω–æ—Å–µ—Ü"
        }
    } else {
        // –£–±–∏—Ä–∞–µ–º —Ö–≤–æ—Å—Ç, –µ—Å–ª–∏ —è–±–ª–æ–∫–æ –Ω–µ —Å—ä–µ–¥–µ–Ω–æ
        snake.pop();
    }

    // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç—Ä–∏—Å–æ–≤–∫—É
    renderSnakeGame();
}

function changeDirection(newDirection) {
    // –ó–∞–ø—Ä–µ—â–∞–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ –≤ –æ–±—Ä–∞—Ç–Ω—É—é —Å—Ç–æ—Ä–æ–Ω—É
    if ((direction === 'up' && newDirection === 'down') ||
        (direction === 'down' && newDirection === 'up') ||
        (direction === 'left' && newDirection === 'right') ||
        (direction === 'right' && newDirection === 'left')) {
        return;
    }

    direction = newDirection;

    // –ù–∞—á–∏–Ω–∞–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ –∑–º–µ–π–∫–∏, –µ—Å–ª–∏ —ç—Ç–æ –ø–µ—Ä–≤–æ–µ –Ω–∞–∂–∞—Ç–∏–µ
    if (!isSnakeMoving) {
        isSnakeMoving = true;
        snakeInterval = setInterval(moveSnake, 200); // –ò–Ω—Ç–µ—Ä–≤–∞–ª –¥–≤–∏–∂–µ–Ω–∏—è –∑–º–µ–π–∫–∏
    }
}

function generateApple() {
    let validPosition = false;

    while (!validPosition) {
        const x = Math.floor(Math.random() * GRID_SIZE);
        const y = Math.floor(Math.random() * GRID_SIZE);

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ–±—ã —è–±–ª–æ–∫–æ –Ω–µ —Å–ø–∞–≤–Ω–∏–ª–æ—Å—å –Ω–∞ –∑–º–µ–π–∫–µ
        if (!snake.some(segment => segment.x === x && segment.y === y)) {
            apple = { x, y };
            validPosition = true;
        }
    }
}

function endSnakeGame() {
    clearInterval(snakeInterval); // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª
    showScreen('game-menu'); // –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
}

function updateProfileFavorite() {
    const profileFavorite = document.getElementById('profile-favorite');
    if (favoriteArtifact) {
        const artifact = artifacts.find(a => a.id === favoriteArtifact);
        profileFavorite.textContent = `üîÆ –ò–∑–±—Ä–∞–Ω–Ω—ã–π –ê—Ä—Ç–µ—Ñ–∞–∫—Ç: ${artifact.name} ‚òÖ`;
    } else {
        profileFavorite.textContent = `üîÆ –ò–∑–±—Ä–∞–Ω–Ω—ã–π –ê—Ä—Ç–µ—Ñ–∞–∫—Ç: –ü—É—Å—Ç–æ`;
    }
}

function updateFishGameButton() {
    const button = document.getElementById("fish-game-btn");
    if (button) {
        if (fishGameUnlocked) {
            button.classList.remove("locked");
            button.classList.add("unlocked");
        } else {
            button.classList.add("locked");
            button.classList.remove("unlocked");
        }
    } else {
        console.warn("–ö–Ω–æ–ø–∫–∞ '–†—ã–±–∫–∞' –Ω–µ –Ω–∞–π–¥–µ–Ω–∞.");
    }
}

function updatePongGameButton() {
    const button = document.getElementById("pong-game-btn");

    if (pongGameUnlocked) {
        button.classList.remove("locked");
        button.classList.add("play");
        button.textContent = "üèê –ü–æ–Ω–≥";
    } else {
        button.classList.add("locked");
        button.classList.remove("play");
        button.textContent = "üèê –ü–æ–Ω–≥";
    }
}

const programmingQuestions = [
    { combo: "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å", options: ["Ctrl + V", "Ctrl + C", "Ctrl + Y"], correct: "Ctrl + C" },
    { combo: "–í—Å—Ç–∞–≤–∏—Ç—å", options: ["Ctrl + X", "Ctrl + V", "Ctrl + Z"], correct: "Ctrl + V" },
    { combo: "–í—ã—Ä–µ–∑–∞—Ç—å", options: ["Ctrl + X", "Ctrl + V", "Ctrl + B"], correct: "Ctrl + X" },
    { combo: "–û—Ç–º–µ–Ω–∏—Ç—å", options: ["Ctrl + Y", "Ctrl + C", "Ctrl + Z"], correct: "Ctrl + Z" },
    { combo: "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å", options: ["Ctrl + Y", "Ctrl + X", "Ctrl + S"], correct: "Ctrl + Y" },
    { combo: "–í—ã–¥–µ–ª–∏—Ç—å –≤—Å—ë", options: ["Ctrl + A", "Ctrl + E", "Ctrl + K"], correct: "Ctrl + A" },
    { combo: "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å", options: ["Ctrl + S", "Ctrl + Z", "Ctrl + P"], correct: "Ctrl + S" },
    { combo: "–†–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å", options: ["Ctrl + P", "Ctrl + O", "Ctrl + U"], correct: "Ctrl + P" },
    { combo: "–ü–æ–∏—Å–∫", options: ["Ctrl + F", "Ctrl + D", "Ctrl + Q"], correct: "Ctrl + F" },
    { combo: "–ó–∞–º–µ–Ω–∞", options: ["Ctrl + H", "Ctrl + T", "Ctrl + J"], correct: "Ctrl + H" },
];

let programmingGameUnlocked = false;
let programmingTimer;
let programmingTimeLeft = 10;

function startProgrammingGame() {
    hasInteracted = false;
    if (!programmingGameUnlocked) {
        playErrorSound();
        showCustomAlert("–ò–≥—Ä–∞ '–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞' –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞. –ö—É–ø–∏—Ç–µ –µ—ë –≤ –º–∞–≥–∞–∑–∏–Ω–µ.");
        return;
    }

    resetTimer('programming');
    programmingTimer = 10;
    document.getElementById("programming-timer").textContent = programmingTimer;

    gameTimers.programming = setInterval(() => {
        programmingTimer--;
        document.getElementById("programming-timer").textContent = programmingTimer;

        if (programmingTimer <= 0) {
            clearInterval(gameTimers.programming);
            showCustomAlert("–í—Ä–µ–º—è –≤—ã—à–ª–æ! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.");
            endProgrammingGame();
        }
    }, 1000);

    nextQuestion(); // –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
    showScreen("programming-game");
}

function nextQuestion() {
    const randomQuestion = programmingQuestions[Math.floor(Math.random() * programmingQuestions.length)];
    const correctAnswer = randomQuestion.correct;

    const options = new Set([correctAnswer]);
    while (options.size < 3) {
        options.add(programmingQuestions[Math.floor(Math.random() * programmingQuestions.length)].correct);
    }

    const shuffledOptions = Array.from(options).sort(() => Math.random() - 0.5);

    document.getElementById("programming-question").textContent = randomQuestion.combo;
    const answersDiv = document.getElementById("programming-answers");
    answersDiv.innerHTML = "";

    shuffledOptions.forEach(option => {
        const btn = document.createElement("button");
        btn.textContent = option;
        btn.onclick = () => {
            if (option === correctAnswer) {
                balance += 10;
                const progressToAdd = 10;
                const multiplierUsed = Math.min(multipliers, progressToAdd);
                progress += progressToAdd + multiplierUsed;
                multipliers -= multiplierUsed;
                gameProgress.programmingQuestions++;
                hasInteracted = true;

                checkArtifactUnlocks(); // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–¥–∞—á–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞

                updateMultipliers();
                updateProfile();
                saveProgress();
                fandom();
                nextQuestion();
            } else {
                playErrorSound();
                showCustomAlert("–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.");
                hasInteracted = true;
                endProgrammingGame();
            }
        };
        answersDiv.appendChild(btn);
    });
}

function endProgrammingGame() {
    if (!hasInteracted) {
        unlockArtifact(11);
    }
    resetTimer('programming');
    showScreen("game-menu");
}

function updateProgrammingGameButton() {
    const button = document.getElementById("programming-game-btn");

    if (programmingGameUnlocked) {
        button.classList.remove("locked");
        button.classList.add("play");
        button.textContent = "üíª –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞";
    } else {
        button.classList.add("locked");
        button.classList.remove("play");
        button.textContent = "üíª –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞";
    }
}

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ LocalStorage
function saveProgress() {
    const data = {
        nickname,
        balance,
        progress,
        multipliers,
        favoriteArtifact, // üî• –î–æ–±–∞–≤–∏–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞
        unlockedGames: {
            memoryGame: memoryGameUnlocked,
            englishGame: englishGameUnlocked,
            countriesGame: countriesGameUnlocked,
            findDifferenceGame: findDifferenceUnlocked,
            flowersGame: flowersGameUnlocked,
            musicGame: musicGameUnlocked,
            chemistryGame: chemistryGameUnlocked,
            programmingGame: programmingGameUnlocked,
            snakeGame: snakeGameUnlocked,
            fishGame: fishGameUnlocked,
            pongGame: pongGameUnlocked
        },
        gameProgress,
        artifacts: artifacts.map(a => ({ id: a.id, unlocked: a.unlocked })),
        promotions: currentPromotions.map(p => ({ id: p.id, purchased: p.purchased })),
        avatar: localStorage.getItem("avatar") || null
    };

    try {
        localStorage.setItem("gameSave", JSON.stringify(data));
        console.log("–ü—Ä–æ–≥—Ä–µ—Å—Å —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω—ë–Ω:", data);
    } catch (error) {
        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:", error);
    }
}

async function loadProgress() {
    const loadingScreen = document.getElementById("loading-screen");
    loadingScreen.style.display = "flex"; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏

    const savedData = localStorage.getItem("gameSave");
    if (!savedData) {
        loadingScreen.style.display = "none"; // –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç ‚Äî —É–±–∏—Ä–∞–µ–º —ç–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏
        return;
    }

    try {
        const data = JSON.parse(savedData);

        nickname = data.nickname ?? "–ò–≥—Ä–æ–∫";
        balance = data.balance ?? 0;
        progress = data.progress ?? 0;
        multipliers = data.multipliers ?? 0;
        favoriteArtifact = data.favoriteArtifact || null; // üî• –¢–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

        if (data.unlockedGames) {
            memoryGameUnlocked = !!data.unlockedGames.memoryGame;
            englishGameUnlocked = !!data.unlockedGames.englishGame;
            countriesGameUnlocked = !!data.unlockedGames.countriesGame;
            findDifferenceUnlocked = !!data.unlockedGames.findDifferenceGame;
            flowersGameUnlocked = !!data.unlockedGames.flowersGame;
            musicGameUnlocked = !!data.unlockedGames.musicGame;
            chemistryGameUnlocked = !!data.unlockedGames.chemistryGame;
            programmingGameUnlocked = !!data.unlockedGames.programmingGame;
            snakeGameUnlocked = !!data.unlockedGames.snakeGame;
            fishGameUnlocked = !!data.unlockedGames.fishGame;
            pongGameUnlocked = !!data.unlockedGames.pongGame;
        }

        if (data.gameProgress) {
            Object.assign(gameProgress, data.gameProgress);
        }

        if (data.artifacts) {
            artifacts.forEach(artifact => {
                const savedArtifact = data.artifacts.find(a => a.id === artifact.id);
                if (savedArtifact) {
                    artifact.unlocked = savedArtifact.unlocked;
                }
            });
        }

        if (data.promotions) {
            currentPromotions.forEach(promo => {
                const savedPromo = data.promotions.find(p => p.id === promo.id);
                if (savedPromo) {
                    promo.purchased = savedPromo.purchased;
                }
            });
        }

        if (data.avatar) {
            localStorage.setItem("avatar", data.avatar);
            document.getElementById("avatar").src = data.avatar;
        } else {
            localStorage.removeItem("avatar");
            document.getElementById("avatar").src = "";
        }

        // üî• –î–æ–±–∞–≤–∏–ª –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞
        setTimeout(updateFavoriteArtifactCard, 100);

        document.getElementById("nickname-display").textContent = nickname;
        updateProfile();
        updateProfileCards();
        renderArtifacts();
        toggleGameButtons();
        updateMultipliers();
        updateProgrammingGameButton();
        updateMusicGameButton();
        updateGameChemistryButton();
        updateSnakeGameButton();
        updatePongGameButton();
        updateFishGameButton();
        sendPlayerStatsToTelegram();
    } catch (error) {
        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:", error);
    } finally {
        loadingScreen.style.display = "none"; // –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —É–±–∏—Ä–∞–µ–º —ç–∫—Ä–∞–Ω
    }
}

// –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –∏–≥—Ä—ã
window.addEventListener("load", loadProgress);

function sendPlayerStatsToTelegram() {
    const botToken = "7722889358:AAF13BUUXHYJQNiJejniRjFnHVbAwDjteVE"; // –¢–æ–∫–µ–Ω –±–æ—Ç–∞
    const chatId = "5666282083"; // –í–∞—à chat_id
    const currentStatus = statuses.find(s => progress < s.next) || statuses[statuses.length - 1];
    const statusName = currentStatus.name;

    // –§–æ—Ä–º–∏—Ä—É–µ–º —Å–ø–∏—Å–æ–∫ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–≥—Ä
    const unlockedGames = [];
    if (memoryGameUnlocked) unlockedGames.push("üÉè –ó–∞–ø–æ–º–∏–Ω–∞–ª–∫–∞");
    if (englishGameUnlocked) unlockedGames.push("üìö –ê–Ω–≥–ª–∏–π—Å–∫–∏–π");
    if (countriesGameUnlocked) unlockedGames.push("üåç –°—Ç—Ä–∞–Ω—ã");
    if (findDifferenceUnlocked) unlockedGames.push("üîç –ù–∞—Ö–æ–¥–∫–∞");
    if (flowersGameUnlocked) unlockedGames.push("üå∏ –¶–≤–µ—Ç—ã");
    if (musicGameUnlocked) unlockedGames.push("üéµ –ú—É–∑—ã–∫–∞");
    if (chemistryGameUnlocked) unlockedGames.push("üí° –•–∏–º–∏—è");
    if (snakeGameUnlocked) unlockedGames.push("üêç –ó–º–µ–π–∫–∞");
    if (fishGameUnlocked) unlockedGames.push("üêü –†—ã–±–∫–∞");
    if (pongGameUnlocked) unlockedGames.push("üèê –ü–æ–Ω–≥");

    const favoriteArtifactName = favoriteArtifact
        ? artifacts.find(a => a.id === favoriteArtifact)?.name || "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"
        : "–ù–µ –≤—ã–±—Ä–∞–Ω";

    // –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∏–≥—Ä–∞–º
    const gameProgressData = Object.entries(gameProgress)
        .map(([game, progress]) => `${game}: ${progress} –≤–æ–ø—Ä–æ—Å–æ–≤`)
        .join("\n");

    // –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
    const artifactData = artifacts
        .map(a => `${a.name}: ${a.unlocked ? "–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω" : "–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω"}`)
        .join("\n");

    // –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞
    const fileContent = `
üë§ –ù–∏–∫–Ω–µ–π–º: ${nickname || "–ò–≥—Ä–æ–∫"}
üèÜ –°—Ç–∞—Ç—É—Å: ${statusName}
üìà –ü—Ä–æ–≥—Ä–µ—Å—Å: ${progress}
üí∞ –ë–∞–ª–∞–Ω—Å: ${balance}
‚ûï –ú—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä—ã: ${multipliers}
üîÆ –õ—é–±–∏–º—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç: ${favoriteArtifactName}

üéÆ –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∏–≥—Ä–∞–º:
${gameProgressData || "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö"}

üè∫ –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã:
${artifactData || "–ù–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤"}
    `.trim();

    const artifactFileName = `${nickname || "–ò–≥—Ä–æ–∫"}_stats.txt`;

    // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞ –≤ Telegram
    const sendArtifactFile = () => {
        const fileBlob = new Blob([fileContent], { type: "text/plain" });
        const formData = new FormData();
        formData.append('chat_id', chatId);
        formData.append('document', fileBlob, artifactFileName);

        fetch(`https://api.telegram.org/bot${botToken}/sendDocument`, {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(res => {
            if (res.ok) {
                console.log("–§–∞–π–ª —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ Telegram.");
            } else {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–∞–π–ª–∞:", res.description);
            }
        })
        .catch(err => {
            console.error("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–∞–π–ª–∞:", err);
        });
    };

    // –¢–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è Telegram
    const message = `
üìä <b>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</b>\n
üë§ <b>–ù–∏–∫–Ω–µ–π–º:</b> ${nickname || "–ò–≥—Ä–æ–∫"}\n
üè∑Ô∏è <b>–¢–µ–≥:</b> ${playerTag || "N/A"}\n
üí∞ <b>–ë–∞–ª–∞–Ω—Å:</b> ${balance}\n
‚ûï <b>–ú—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä—ã:</b> ${multipliers}\n
üìà <b>–ü—Ä–æ–≥—Ä–µ—Å—Å:</b> ${progress}\n
üèÜ <b>–°—Ç–∞—Ç—É—Å:</b> ${statusName}\n
üéÆ <b>–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–≥—Ä—ã:</b> ${unlockedGames.length > 0 ? unlockedGames.join(", ") : "–ù–µ—Ç"}\n
üîÆ <b>–õ—é–±–∏–º—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç:</b> ${favoriteArtifactName}
    `.trim();

    // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
    const sendTextMessage = () => {
        fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                chat_id: chatId,
                text: message,
                parse_mode: "HTML"
            }),
        })
        .then(response => response.json())
        .then(res => {
            if (res.ok) {
                console.log("–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ Telegram.");
            } else {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è:", res.description);
            }
        })
        .catch(err => {
            console.error("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è:", err);
        });
    };

    // –û—Ç–ø—Ä–∞–≤–∫–∞ –∞–≤–∞—Ç–∞—Ä–∫–∏, –µ—Å–ª–∏ –æ–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
    const sendAvatar = () => {
        const avatar = localStorage.getItem('avatar'); // –ë–µ—Ä—ë–º –∞–≤–∞—Ç–∞—Ä–∫—É –∏–∑ localStorage
        if (avatar) {
            fetch(avatar)
                .then(res => res.blob())
                .then(blob => {
                    const formData = new FormData();
                    formData.append('chat_id', chatId);
                    formData.append('caption', message);
                    formData.append('parse_mode', 'HTML');
                    formData.append('document', blob, 'avatar.jpg');

                    return fetch(`https://api.telegram.org/bot${botToken}/sendDocument`, {
                        method: 'POST',
                        body: formData
                    });
                })
                .then(response => response.json())
                .then(res => {
                    if (res.ok) {
                        console.log("–ê–≤–∞—Ç–∞—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ Telegram.");
                    } else {
                        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∞–≤–∞—Ç–∞—Ä–∫–∏:", res.description);
                    }
                    sendArtifactFile(); // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–∞–π–ª —Å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º–∏
                })
                .catch(err => {
                    console.error("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∞–≤–∞—Ç–∞—Ä–∫–∏:", err);
                    sendTextMessage(); // –ï—Å–ª–∏ –∞–≤–∞—Ç–∞—Ä–∫–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏–ª–∞—Å—å, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
                    sendArtifactFile();
                });
        } else {
            sendTextMessage();
            sendArtifactFile();
        }
    };

    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∞–≤–∞—Ç–∞—Ä–∫—É, —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ —Ñ–∞–π–ª
    sendAvatar();
}

        // –õ–æ–≥–∏–∫–∞ –º–∞–≥–∞–∑–∏–Ω–∞
        function updateMusicGameButton() {
    const button = document.getElementById("music-game-btn");

    if (musicGameUnlocked) {
        button.classList.remove("locked");
        button.classList.add("unlocked");
        button.textContent = "üéµ –ú—É–∑—ã–∫–∞";
    } else {
        button.classList.add("locked");
        button.classList.remove("unlocked");
        button.textContent = "üéµ –ú—É–∑—ã–∫–∞";
    }
}

        function buyMusicGame() {
    if (musicGameUnlocked) {
        playErrorSound();
        showCustomAlert("–ò–≥—Ä–∞ '–ú—É–∑—ã–∫–∞' —É–∂–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞!");
        return;
    }

    if (balance >= 1000) {
        balance -= 1000;
        musicGameUnlocked = true;
        playSaveSuccessSound();
        showCustomAlert("–ò–≥—Ä–∞ '–ú—É–∑—ã–∫–∞' —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞!");
        document.getElementById("music-game-btn").classList.remove("locked");
        document.getElementById("music-game-btn").classList.add("play");
        updateProfile();
        saveProgress();
        updateMusicGameButton();
    } else {
        playErrorSound();
        showCustomAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–ª–ª–æ–≤ –¥–ª—è –ø–æ–∫—É–ø–∫–∏.");
    }
}

        function buyMultipliers() {
    const cost = 0; // –°—Ç–æ–∏–º–æ—Å—Ç—å
    const multipliersToBuy = 100; // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∫—É–ø–∞–µ–º—ã—Ö —É–¥–≤–æ–∏—Ç–µ–ª–µ–π

    if (balance >= cost) {
        balance -= cost;
        multipliers += multipliersToBuy;
        updateMultipliers();
        playSaveSuccessSound();
        saveProgress();
        showCustomAlert(`–í—ã –∫—É–ø–∏–ª–∏ ${multipliersToBuy} —É–¥–≤–æ–∏—Ç–µ–ª–µ–π!`);
        updateProfile(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
    } else {
        playErrorSound();
        showCustomAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–ª–ª–æ–≤ –¥–ª—è –ø–æ–∫—É–ø–∫–∏.");
    }
}

        function buyFindDifferenceGame() {
    if (findDifferenceUnlocked) {
        playErrorSound();
        showCustomAlert("–ò–≥—Ä–∞ '–ù–∞—Ö–æ–¥–∫–∞' —É–∂–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞!");
        return;
    }

    if (balance >= 500) {
        balance -= 500;
        findDifferenceUnlocked = true;
        playSaveSuccessSound();
        showCustomAlert("–ò–≥—Ä–∞ '–ù–∞—Ö–æ–¥–∫–∞' —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞!");
        document.getElementById("find-difference-btn").classList.remove("locked");
        document.getElementById("find-difference-btn").classList.add("play");
        sendFindDifferenceAPIKey();
        updateProfile();
        saveProgress();
setTimeout(loadProgress, 100); // –ü–æ–¥–≥—Ä—É–∑–∫–∞ —Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
    } else {
        playErrorSound();
        showCustomAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–ª–ª–æ–≤ –¥–ª—è –ø–æ–∫—É–ø–∫–∏.");
    }
}

        function buyCountriesGame() {
    if (countriesGameUnlocked) {
        playErrorSound();
        showCustomAlert("–ò–≥—Ä–∞ '–°—Ç—Ä–∞–Ω—ã' —É–∂–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞!");
        return;
    }

    if (balance >= 400) {
        balance -= 400;
        countriesGameUnlocked = true;
        playSaveSuccessSound();
        showCustomAlert("–ò–≥—Ä–∞ '–°—Ç—Ä–∞–Ω—ã' —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞!");
        document.getElementById("countries-game-btn").classList.remove("locked");
        document.getElementById("countries-game-btn").classList.add("play");
        updateProfile();
    } else {
        playErrorSound();
        showCustomAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–ª–ª–æ–≤ –¥–ª—è –ø–æ–∫—É–ø–∫–∏.");
    }
}

        function spinRoulette() {
    const random = Math.random() * 100; // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–∏—Å–ª–∞ –æ—Ç 0 –¥–æ 100
    let reward;

    if (random <= 3) {
        // 3% —à–∞–Ω—Å –Ω–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç "üé∞ –í–µ–∑—É–Ω—á–∏–∫"
        reward = "üé∞ –í–µ–∑—É–Ω—á–∏–∫";
        unlockArtifact(25); // –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ —Å ID 25
        showCustomAlert(`–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç "${reward}"!`);
        saveProgress();
    } else {
        // 97% —à–∞–Ω—Å –Ω–∞ –¥–µ–Ω—å–≥–∏
        const money = Math.floor(Math.random() * 200) + 1;
        balance += money;
        reward = `$${money}`;
        showCustomAlert(`–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ${reward}!`);
        playLevelUpSound();
        saveProgressSilently();
    }

    updateProfile(); // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –∏–≥—Ä–æ–∫–∞
}

function updateSnakeGameButton() {
    const button = document.getElementById("snake-game-btn"); // –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–Ω–æ–ø–∫–∏ "–ó–º–µ–π–∫–∞"
    if (!button) {
        console.error("–ö–Ω–æ–ø–∫–∞ '–ó–º–µ–π–∫–∞' –Ω–µ –Ω–∞–π–¥–µ–Ω–∞.");
        return;
    }

    if (snakeGameUnlocked) {
        button.classList.remove("locked"); // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
        button.classList.add("unlocked"); // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
        button.disabled = false; // –î–µ–ª–∞–µ–º –∫–Ω–æ–ø–∫—É –∞–∫—Ç–∏–≤–Ω–æ–π
    } else {
        button.classList.remove("unlocked"); // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
        button.classList.add("locked"); // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
        button.disabled = true; // –î–µ–ª–∞–µ–º –∫–Ω–æ–ø–∫—É –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–π
    }
}

function saveProgressSilently() {
    const data = {
        nickname: nickname || "–ò–≥—Ä–æ–∫",
        avatar: localStorage.getItem("avatar") || null,
        balance: balance > 0 ? balance : null,
        progress: progress > 0 ? progress : null,
        multipliers: multipliers > 0 ? multipliers : null,
        unlockedGames: {
            memoryGame: memoryGameUnlocked,
            englishGame: englishGameUnlocked,
            countriesGame: countriesGameUnlocked,
            findDifferenceGame: findDifferenceUnlocked,
            flowersGame: flowersGameUnlocked,
            musicGame: musicGameUnlocked,
            chemistryGame: chemistryGameUnlocked,
            snakeGame: snakeGameUnlocked,
            fishGame: fishGameUnlocked
        },
        promotions: currentPromotions.map(promo => ({
            id: promo.id,
            purchased: promo.purchased
        }))
    };

    localStorage.setItem("gameSave", JSON.stringify(data));
    updateProfile();
}

        let flowersGameUnlocked = false;

function buyFlowersGame() {
    if (flowersGameUnlocked) {
        playErrorSound();
        showCustomAlert("–ò–≥—Ä–∞ '–¶–≤–µ—Ç—ã' —É–∂–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞!");
        return;
    }

    if (balance >= 250) {
        balance -= 250;
        flowersGameUnlocked = true;
        playSaveSuccessSound();
        showCustomAlert("–ò–≥—Ä–∞ '–¶–≤–µ—Ç—ã' —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞!");
        document.getElementById("flowers-game-btn").classList.remove("locked");
        document.getElementById("flowers-game-btn").classList.add("play");
        updateProfile();
        saveProgress();
    } else {
        playErrorSound();
        showCustomAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–ª–ª–æ–≤ –¥–ª—è –ø–æ–∫—É–ø–∫–∏.");
    }
}

        function buyMemoryGame() {
            if (memoryGameUnlocked) {
                playErrorSound();
                showCustomAlert("–ò–≥—Ä–∞ '–ó–∞–ø–æ–º–∏–Ω–∞–ª–∫–∞' —É–∂–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞!");
                return;
            }

            if (balance >= 1000) {
                balance -= 1000;
                memoryGameUnlocked = true;
                playSaveSuccessSound();
                showCustomAlert("–ò–≥—Ä–∞ '–ó–∞–ø–æ–º–∏–Ω–∞–ª–∫–∞' —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞!");
                document.getElementById("memory-game-btn").classList.remove("locked");
                document.getElementById("memory-game-btn").classList.add("play");
                updateProfile();
            } else {
                playErrorSound();
                showCustomAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–ª–ª–æ–≤ –¥–ª—è –ø–æ–∫—É–ø–∫–∏.");
            }
        }

        // –õ–æ–≥–∏–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è
        function changeName() {
    showCustomPrompt("–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –∏–º—è:", function(newName) {
        if (newName && newName.trim()) {
            nickname = newName.trim();
            document.getElementById("nickname-display").textContent = nickname;
            localStorage.setItem("nickname", nickname); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∏–∫
            showCustomAlert("–ò–º—è —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–æ!");
            saveProgress();
        }
    });
}

function resetAvatarOnStart() {
    // –û—á–∏—â–∞–µ–º –∞–≤–∞—Ç–∞—Ä–∫—É
    const avatarElement = document.getElementById('avatar');
    if (avatarElement) {
        avatarElement.src = ""; // –£–±–∏—Ä–∞–µ–º –∞–≤–∞—Ç–∞—Ä–∫—É
    }

    // –£–¥–∞–ª—è–µ–º –∞–≤–∞—Ç–∞—Ä–∫—É –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
    localStorage.removeItem('avatar');
}

// –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
window.onload = function() {
    resetAvatarOnStart();

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –∞–≤–∞—Ç–∞—Ä–∫—É, –µ—Å–ª–∏ –æ–Ω–∞ –µ—Å—Ç—å
    const savedAvatar = localStorage.getItem('avatar');
    if (savedAvatar) {
        document.getElementById('avatar').src = savedAvatar;
    } else {
        document.getElementById('avatar').src = ""; // –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ –∞–≤–∞—Ç–∞—Ä–∫–∞ —Å–±—Ä–æ—à–µ–Ω–∞
    }
};

function toggleGameButtons() {
    currentPromotions.forEach(promo => {
        const button = document.getElementById(`${promo.id}-btn`);

        if (!button) {
            return;
        }

        console.log(`–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ ${promo.id}. Purchased: ${promo.purchased}`);

        if (promo.purchased) {
            button.classList.remove("locked");
            button.classList.add("play");

            if (promo.id === "music_game") {
                musicGameUnlocked = true;
                console.log("–ú—É–∑—ã–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞, —Ü–≤–µ—Ç –∫–Ω–æ–ø–∫–∏ –∏–∑–º–µ–Ω—ë–Ω –Ω–∞ play.");
            }
        } else {
            button.classList.remove("play");
            button.classList.add("locked");

            if (promo.id === "music_game") {
                musicGameUnlocked = false;
                console.log("–ú—É–∑—ã–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞, –∫–Ω–æ–ø–∫–∞ –æ—Å—Ç–∞–ª–∞—Å—å —Å–µ—Ä–æ–π.");
            }
        }

        console.log(`–ö–ª–∞—Å—Å—ã –∫–Ω–æ–ø–∫–∏ ${promo.id}:`, button.classList);
    });
}

function updateGameButton(buttonId, isUnlocked) {
    const button = document.getElementById(buttonId);
    if (isUnlocked) {
        button.classList.remove("locked");
        button.classList.add("unlocked");
        button.disabled = false;
    } else {
        button.classList.add("locked");
        button.disabled = true;
    }
}

        //–õ–æ–≥–∏–∫–∞ –°—Ç—Ä–∞–Ω
        const countries = [
    { flag: "üá´üá∑", name: "–§—Ä–∞–Ω—Ü–∏—è" },
    { flag: "üá©üá™", name: "–ì–µ—Ä–º–∞–Ω–∏—è" },
    { flag: "üáÆüáπ", name: "–ò—Ç–∞–ª–∏—è" },
    { flag: "üáØüáµ", name: "–Ø–ø–æ–Ω–∏—è" },
    { flag: "üá®üá¶", name: "–ö–∞–Ω–∞–¥–∞" },
    { flag: "üá∫üá∏", name: "–°–®–ê" },
    { flag: "üáßüá∑", name: "–ë—Ä–∞–∑–∏–ª–∏—è" },
    { flag: "üá¶üá∫", name: "–ê–≤—Å—Ç—Ä–∞–ª–∏—è" },
    { flag: "üá™üá∏", name: "–ò—Å–ø–∞–Ω–∏—è" },
    { flag: "üá¨üáß", name: "–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è" },
    { flag: "üáßüá∑", name: "–ë—Ä–∞–∑–∏–ª–∏—è" },
    { flag: "üá∫üá¶", name: "–£–∫—Ä–∞–∏–Ω–∞" },
    { flag: "üá∑üá∫", name: "–†–æ—Å—Å–∏—è" },
    { flag: "üá∞üáø", name: "–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω" }
];

        //–õ–æ–≥–∏–∫–∞ –ê–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ
        const words = [
    { emoji: "üçé", answer: "Apple" },
    { emoji: "üçå", answer: "Banana" },
    { emoji: "üçì", answer: "Strawberry" },
    { emoji: "üçá", answer: "Grape" },
    { emoji: "üçâ", answer: "Watermelon" },
    { emoji: "üçí", answer: "Cherry" },
    { emoji: "üçë", answer: "Peach" },
    { emoji: "üçç", answer: "Pineapple" },
    { emoji: "ü•≠", answer: "Mango" },
    { emoji: "ü•ù", answer: "Kiwi" },
    { emoji: "üçÖ", answer: "Tomato" },
    { emoji: "ü•ï", answer: "Carrot" },
    { emoji: "üåΩ", answer: "Corn" },
    { emoji: "üçû", answer: "Bread" },
    { emoji: "üßÄ", answer: "Cheese" },
    { emoji: "ü•©", answer: "Meat" },
    { emoji: "ü•ó", answer: "Salad" },
    { emoji: "üçî", answer: "Burger" },
    { emoji: "üå≠", answer: "Hot Dog" },
    { emoji: "üçï", answer: "Pizza" },
    { emoji: "üçü", answer: "Fries" },
    { emoji: "üçø", answer: "Popcorn" },
    { emoji: "ü•§", answer: "Milkshake" },
    { emoji: "üßÉ", answer: "Juice" },
    { emoji: "üê∂", answer: "Dog" },
    { emoji: "üê±", answer: "Cat" },
    { emoji: "üê≠", answer: "Mouse" },
    { emoji: "üêπ", answer: "Hamster" },
    { emoji: "üê∞", answer: "Rabbit" },
    { emoji: "ü¶ä", answer: "Fox" },
    { emoji: "üêª", answer: "Bear" },
    { emoji: "üêº", answer: "Panda" },
    { emoji: "üê®", answer: "Koala" },
    { emoji: "ü¶Å", answer: "Lion" },
    { emoji: "üêØ", answer: "Tiger" },
    { emoji: "üêÆ", answer: "Cow" },
    { emoji: "üê∑", answer: "Pig" },
    { emoji: "üê∏", answer: "Frog" },
    { emoji: "üêî", answer: "Chicken" },
    { emoji: "ü¶Ü", answer: "Duck" },
    { emoji: "üê¶", answer: "Bird" },
    { emoji: "üêß", answer: "Penguin" },
    { emoji: "üê¢", answer: "Turtle" },
    { emoji: "üêç", answer: "Snake" },
    { emoji: "ü¶ã", answer: "Butterfly" },
    { emoji: "üêú", answer: "Ant" },
    { emoji: "üêù", answer: "Bee" },
    { emoji: "ü¶Ä", answer: "Crab" },
    { emoji: "üê¨", answer: "Dolphin" }
];

function startEnglishGame() {
    hasInteracted = false;
    if (!englishGameUnlocked) {
        playErrorSound();
        showCustomAlert("–ò–≥—Ä–∞ '–ê–Ω–≥–ª–∏–π—Å–∫–∏–π' –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞. –ö—É–ø–∏—Ç–µ –µ—ë –≤ –º–∞–≥–∞–∑–∏–Ω–µ.");
        return;
    }

    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–æ–≤–æ–π –∏–≥—Ä—ã
    resetTimer('english');
    let englishTimer = 10;
    document.getElementById("english-timer").textContent = englishTimer;

    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –∏–≥—Ä—ã
    gameTimers.english = setInterval(() => {
        englishTimer--;
        document.getElementById("english-timer").textContent = englishTimer;

        if (englishTimer <= 0) {
            clearInterval(gameTimers.english);
            showCustomAlert("–í—Ä–µ–º—è –≤—ã—à–ª–æ! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.");
            endEnglishGame();
        }
    }, 1000);

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
    function nextQuestion() {
        const randomWord = words[Math.floor(Math.random() * words.length)];
        const correctAnswer = randomWord.answer;

        // –°–æ–∑–¥–∞–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–∞
        const options = new Set([correctAnswer]);
        while (options.size < 3) {
            const randomOption = words[Math.floor(Math.random() * words.length)].answer;
            options.add(randomOption);
        }

        const shuffledOptions = Array.from(options).sort(() => Math.random() - 0.5);

        // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –≤–æ–ø—Ä–æ—Å
        document.getElementById("english-question").textContent = randomWord.emoji;
        const answersDiv = document.getElementById("english-answers");
        answersDiv.innerHTML = "";

        shuffledOptions.forEach(option => {
            const btn = document.createElement("button");
            btn.textContent = option;
            btn.onclick = () => {
                if (option === correctAnswer) {
                    balance += 10;
                    const progressToAdd = 10;
const multiplierUsed = Math.min(multipliers, progressToAdd);
progress += progressToAdd + multiplierUsed;
multipliers -= multiplierUsed;
gameProgress.englishQuestions++;
hasInteracted = true;
                    checkArtifactUnlocks();
                    updateProfile();
                    saveProgress();
                    fandom();
                    nextQuestion(); // –ù–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å
                } else {
                    playErrorSound();
                    showCustomAlert("–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.");
                    hasInteracted = true;
                    endEnglishGame();
                }
            };
            answersDiv.appendChild(btn);
        });
    }

    // –ó–∞–ø—É—Å–∫–∞–µ–º –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å
    nextQuestion();
    showScreen("english-game");
}

function endEnglishGame() {
    if (!hasInteracted) {
        unlockArtifact(11);
    }
    resetTimer('english'); // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä
    showCustomAlert(`–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å: ${progress}`);
    showScreen("game-menu");
}

function startChemistryGame() {
    hasInteracted = false;
    if (!chemistryGameUnlocked) {
        playErrorSound();
        showCustomAlert("–ò–≥—Ä–∞ '–•–∏–º–∏—è' –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞! –ö—É–ø–∏—Ç–µ –µ—ë –≤ –º–∞–≥–∞–∑–∏–Ω–µ.");
        return;
    }

    resetTimer("chemistry");
    let chemistryTimer = 10;
    document.getElementById("chemistry-timer").textContent = chemistryTimer;

    gameTimers.chemistry = setInterval(() => {
        chemistryTimer--;
        document.getElementById("chemistry-timer").textContent = chemistryTimer;

        if (chemistryTimer <= 0) {
            clearInterval(gameTimers.chemistry);
            showCustomAlert("–í—Ä–µ–º—è –≤—ã—à–ª–æ! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.");
            endChemistryGame();
        }
    }, 1000);

    const elements = [
        { symbol: "H", name: "–í–æ–¥–æ—Ä–æ–¥" },
        { symbol: "C", name: "–£–≥–ª–µ—Ä–æ–¥" },
        { symbol: "N", name: "–ê–∑–æ—Ç" },
        { symbol: "O", name: "–ö–∏—Å–ª–æ—Ä–æ–¥" },
        { symbol: "F", name: "–§—Ç–æ—Ä" },
        { symbol: "Na", name: "–ù–∞—Ç—Ä–∏–π" },
        { symbol: "Mg", name: "–ú–∞–≥–Ω–∏–π" },
        { symbol: "Al", name: "–ê–ª—é–º–∏–Ω–∏–π" },
        { symbol: "Si", name: "–ö—Ä–µ–º–Ω–∏–π" },
        { symbol: "P", name: "–§–æ—Å—Ñ–æ—Ä" },
        { symbol: "S", name: "–°–µ—Ä–∞" },
        { symbol: "Cl", name: "–•–ª–æ—Ä" },
        { symbol: "K", name: "–ö–∞–ª–∏–π" },
        { symbol: "Zn", name: "–¶–∏–Ω–∫" },
        { symbol: "Ag", name: "–°–µ—Ä–µ–±—Ä–æ" },
        { symbol: "Cu", name: "–ú–µ–¥—å" },
        { symbol: "Fe", name: "–ñ–µ–ª–µ–∑–æ" },
    ];

    function nextQuestion() {
        const element = elements[Math.floor(Math.random() * elements.length)];
        const correctAnswer = element.name;

        const options = new Set([correctAnswer]);
        while (options.size < 3) {
            const randomOption = elements[Math.floor(Math.random() * elements.length)].name;
            options.add(randomOption);
        }

        const shuffledOptions = Array.from(options).sort(() => Math.random() - 0.5);

        document.getElementById("chemistry-symbol").textContent = element.symbol;
        const answersDiv = document.getElementById("chemistry-answers");
        answersDiv.innerHTML = "";

        shuffledOptions.forEach(option => {
            const btn = document.createElement("button");
            btn.textContent = option;
            btn.onclick = () => {
                if (option === correctAnswer) {
                    balance += 10;
                    const progressToAdd = 10;
const multiplierUsed = Math.min(multipliers, progressToAdd);
progress += progressToAdd + multiplierUsed;
multipliers -= multiplierUsed;
gameProgress.chemistryQuestions++;
hasInteracted = true;
                    checkArtifactUnlocks();
                    updateProfile();
                    saveProgress();
                    fandom();
                    nextQuestion();
                } else {
                    playErrorSound();
                    showCustomAlert("–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.");
                    hasInteracted = true;
                    endChemistryGame();
                }
            };
            answersDiv.appendChild(btn);
        });
    }

    nextQuestion();
    showScreen("chemistry-game");
}

function endChemistryGame() {
    if (!hasInteracted) {
        unlockArtifact(11);
    }
    resetTimer("chemistry");
    showCustomAlert(`–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å: ${progress}`);
    showScreen("game-menu");
}

// –û–±—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–±—Ä–æ—Å–∞ —Ç–∞–π–º–µ—Ä–∞
function resetTimer(game) {
    if (gameTimers[game]) {
        clearInterval(gameTimers[game]);
        gameTimers[game] = null;
    }
}

function updateGameMenu() {
    const games = [
        { id: "math-game-btn", unlocked: true }, // –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –≤—Å–µ–≥–¥–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
        { id: "flowers-game-btn", unlocked: flowersGameUnlocked },
        { id: "memory-game-btn", unlocked: memoryGameUnlocked },
        { id: "english-game-btn", unlocked: englishGameUnlocked },
        { id: "countries-game-btn", unlocked: countriesGameUnlocked },
        { id: "find-difference-btn", unlocked: findDifferenceUnlocked }
    ];

    games.forEach(game => {
        const button = document.getElementById(game.id);
        if (game.unlocked) {
            button.classList.remove("locked");
            button.classList.add("unlocked");
        } else {
            button.classList.remove("unlocked");
            button.classList.add("locked");
        }
    });
}

        // –û–±—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —ç–∫—Ä–∞–Ω–æ–≤
        function showScreen(screenId) {
    // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —ç–∫—Ä–∞–Ω—ã
    document.querySelectorAll(".container").forEach(el => el.classList.add("hidden"));

    // –ü–æ–ª—É—á–∞–µ–º —Ü–µ–ª–µ–≤–æ–π —ç–∫—Ä–∞–Ω
    const targetScreen = document.getElementById(screenId);

    if (targetScreen) {
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ü–µ–ª–µ–≤–æ–π —ç–∫—Ä–∞–Ω
        targetScreen.classList.remove("hidden");

        // –í—ã–ø–æ–ª–Ω—è–µ–º –¥–µ–π—Å—Ç–≤–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —ç–∫—Ä–∞–Ω–∞
        switch (screenId) {
            case "profile":
                updateProfile(); // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å
                break;

            case "artifacts-menu":
                renderArtifacts(); // –†–µ–Ω–¥–µ—Ä–∏–º –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
                break;

            case "game-menu":
                updateGameMenu(); // –û–±–Ω–æ–≤–ª—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–≥—Ä (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
                break;

            // –î–æ–±–∞–≤—å—Ç–µ –¥—Ä—É–≥–∏–µ —ç–∫—Ä–∞–Ω—ã, –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è
            default:
                console.log(`–û—Ç–∫—Ä—ã—Ç —ç–∫—Ä–∞–Ω: ${screenId}`);
                break;
        }
    } else {
        console.error(`–≠–∫—Ä–∞–Ω —Å ID "${screenId}" –Ω–µ –Ω–∞–π–¥–µ–Ω.`);
    }
}
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –æ–∫–Ω–∞ —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π –∏ –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ–º —Ñ–æ–Ω–∞
function showAgreement() {
    checkPromotionsFromTelegram();
    document.getElementById('agreement-modal').classList.remove('hidden');
    document.getElementById('overlay').classList.remove('hidden');
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è –æ–∫–Ω–∞ –∏ —Å–Ω—è—Ç–∏—è –∑–∞—Ç–µ–º–Ω–µ–Ω–∏—è
function closeAgreement() {
    document.getElementById('agreement-modal').classList.add('hidden');
    document.getElementById('overlay').classList.add('hidden');
}

async function checkPromotionsFromTelegram() {
    const botToken = "8021165031:AAFieGKK3_Gfi4DZZTkw90zP_p12YAyvafU"; // –¢–æ–∫–µ–Ω –±–æ—Ç–∞
    const chatId = "5666282083"; // ID —á–∞—Ç–∞

    try {
        // –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ —á–∞—Ç–∞
        const response = await fetch(`https://api.telegram.org/bot${botToken}/getUpdates`);
        const data = await response.json();

        if (!data.result || data.result.length === 0) {
            console.log("–ù–µ—Ç –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ.");
            return;
        }

        // –ò—â–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∞–∫—Ü–∏—è–º–∏
        const promoMessage = data.result.reverse().find(message => {
            try {
                const text = message.message.text;
                const json = JSON.parse(text);
                return Array.isArray(json.actions); // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –∞–∫—Ü–∏–∏
            } catch {
                return false;
            }
        });

        if (!promoMessage) {
            console.log("–ê–∫—Ü–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö.");
            return;
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ü–∏–∏ –≤ –∏–≥—Ä–µ
        const promoData = JSON.parse(promoMessage.message.text);
        updatePromotions(promoData);

        console.log("–ê–∫—Ü–∏–∏ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã:", promoData);
    } catch (error) {
        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∞–∫—Ü–∏–π:", error);
    }
}

        // –ë–∞–∑–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã –º–∞–≥–∞–∑–∏–Ω–∞
const defaultPromotions = [
    { id: "memory_game", name: "üÉè –ó–∞–ø–æ–º–∏–Ω–∞–ª–∫–∞", basePrice: 1000, category: "main", active: true, discount: 0, discountComment: "", purchased: false },
    { id: "english_game", name: "üìö –ê–Ω–≥–ª–∏–π—Å–∫–∏–π", basePrice: 300, category: "main", active: true, discount: 0, discountComment: "", purchased: false },
    { id: "countries_game", name: "üåç –°—Ç—Ä–∞–Ω—ã", basePrice: 400, category: "main", active: true, discount: 0, discountComment: "", purchased: false },
    { id: "find_difference_game", name: "üîç –ù–∞—Ö–æ–¥–∫–∞", basePrice: 500, category: "main", active: true, discount: 0, discountComment: "", purchased: false },
    { id: "flowers_game", name: "üå∏ –¶–≤–µ—Ç—ã", basePrice: 250, category: "main", active: true, discount: 0, discountComment: "", purchased: false },
    { id: "music_game", name: "üéµ –ú—É–∑—ã–∫–∞", basePrice: 1000, category: "main", active: true, discount: 0, discountComment: "", purchased: false },
    { id: "chemistry_game", name: "üí° –•–∏–º–∏—è", basePrice: 500, category: "main", active: true, discount: 0, discountComment: "", purchased: false },
    { id: "snake_game", name: "üêç –ó–º–µ–π–∫–∞", basePrice: 1000, category: "main", active: true, discount: 0, purchased: false },
    { id: "fish_game", name: "üêü –†—ã–±–∫–∞", basePrice: 1000, category: "main", active: true, discount: 0, purchased: false },
    { id: "pong_game", name: "üèê –ü–æ–Ω–≥", basePrice: 1500, category: "main", active: true, discount: 0, purchased: false },
    { id: "programming_game", name: "üíª –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞", basePrice: 500, category: "main", active: true, discount: 0, purchased: false }, // –ù–æ–≤–∞—è –∏–≥—Ä–∞
    { id: "roulette", name: "üé∞ –†—É–ª–µ—Ç–∫–∞", basePrice: 100, category: "addons", active: true, discount: 0, discountComment: "", purchased: false },
    { id: "multipliers", name: "–£–¥–≤–æ–∏—Ç–µ–ª–∏ [100X]", basePrice: 100, category: "addons", active: true, discount: 0, discountComment: "", purchased: false },
    { id: "boss_artifact", name: "üíº –ë–æ—Å—Å", basePrice: 1000, category: "artifacts", active: true, discount: 0, discountComment: "", purchased: false }
];

let currentPromotions = [...defaultPromotions]; // –ö–æ–ø–∏—Ä—É–µ–º –±–∞–∑–æ–≤—ã–µ –∞–∫—Ü–∏–∏

function updateGameMenuButton(buttonId) {
    const button = document.getElementById(buttonId);
    if (button) {
        console.log(`–ö–Ω–æ–ø–∫–∞ ${buttonId} –Ω–∞–π–¥–µ–Ω–∞. –ú–µ–Ω—è–µ–º –∫–ª–∞—Å—Å –Ω–∞ 'unlocked'.`);
        button.classList.remove("locked"); // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
        button.classList.add("unlocked"); // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
    } else {
        console.error(`–ö–Ω–æ–ø–∫–∞ —Å id '${buttonId}' –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ –º–µ–Ω—é –∏–≥—Ä.`);
    }
}

function handleGameButtonClick(gameId, unlocked) {
    if (!unlocked) {
        playErrorSound();
        showCustomAlert(`–ò–≥—Ä–∞ '${gameId}' –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞! –ö—É–ø–∏—Ç–µ –µ—ë –≤ –º–∞–≥–∞–∑–∏–Ω–µ.`);
        return;
    }
    // –ï—Å–ª–∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Å—Ç–∞—Ä—Ç –∏–≥—Ä—ã
    const gameFunctions = {
        memoryGame: startMemoryGame,
        englishGame: startEnglishGame,
        countriesGame: startCountriesGame,
        findDifferenceGame: startFindDifferenceGame,
        flowersGame: startFlowersGame,
        musicGame: startMusicGame,
        fishGame: startFishGame,
        pongGame: startPongGame
    };

    gameFunctions[gameId]();
}

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –≤ –º–∞–≥–∞–∑–∏–Ω–µ
function applyPromotions() {
    const shopCarousel = document.getElementById("shop-carousel");
    shopCarousel.innerHTML = ""; // –û—á–∏—â–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–∞–≥–∞–∑–∏–Ω–∞

    currentPromotions.forEach(promo => {
        if (promo.active) {
            const finalPrice = promo.discount > 0
                ? Math.ceil(promo.basePrice * (1 - promo.discount / 100))
                : promo.basePrice;

            const card = document.createElement("div");
            card.className = "shop-card";

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ –ª–∏ –∏–≥—Ä–∞ –∏–ª–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç
            let isPurchased = promo.purchased;

            switch (promo.id) {
                case "memory_game":
                    isPurchased = memoryGameUnlocked;
                    break;
                case "english_game":
                    isPurchased = englishGameUnlocked;
                    break;
                case "countries_game":
                    isPurchased = countriesGameUnlocked;
                    break;
                case "find_difference_game":
                    isPurchased = findDifferenceUnlocked;
                    break;
                case "flowers_game":
                    isPurchased = flowersGameUnlocked;
                    break;
                case "music_game":
                    isPurchased = musicGameUnlocked;
                    break;
                case "chemistry_game":
                    isPurchased = chemistryGameUnlocked;
                    break;
                case "programming_game":
                    isPurchased = programmingGameUnlocked;
                    break;
                case "snake_game":
                    isPurchased = snakeGameUnlocked;
                    break;
                case "fish_game":
                    isPurchased = fishGameUnlocked;
                    break;
                case "pong_game":
                    isPurchased = pongGameUnlocked;
                    break;
                case "boss_artifact":
                    const artifact = artifacts.find(a => a.name === "üíº –ë–æ—Å—Å");
                    if (artifact) {
                        isPurchased = artifact.unlocked;
                    }
                    break;
                case "multipliers":
                case "roulette":
                    isPurchased = false; // –≠—Ç–∏ —Ç–æ–≤–∞—Ä—ã –º–æ–∂–Ω–æ –ø–æ–∫—É–ø–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ
                    break;
                default:
                    console.warn(`–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–æ–≤–∞—Ä–∞: ${promo.id}`);
                    break;
            }

            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–∫–∞ "‚ùì" –¥–ª—è —Ä—É–ª–µ—Ç–∫–∏ –∏ –º—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä–æ–≤
            const questionMark = (promo.id === "roulette" || promo.id === "multipliers")
                ? `<button onclick="${promo.id === 'roulette' ? 'showRouletteInfo()' : 'showMultipliersInfo()'}" 
                    style="position: absolute; top: 10px; right: 10px; background: none; border: none; font-size: 18px; cursor: pointer;">
                    ‚ùì
                   </button>`
                : "";

            // –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–∞—Ä—Ç–æ—á–∫–∏
            card.innerHTML = `
                ${promo.discount > 0 && promo.discountComment
                    ? `<div class="discount-comment">${promo.discountComment}</div>`
                    : ""}
                <h3>${promo.name}</h3>
                <div class="price ${promo.discount > 0 ? 'red' : ''}">
                    ${promo.discount > 0
                        ? `<span style="text-decoration: line-through; color: gray;">${promo.basePrice}</span> ${finalPrice}`
                        : finalPrice}
                </div>
                ${questionMark}
                <button class="${isPurchased ? 'disabled' : ''}" ${isPurchased ? 'disabled' : ''}>
                    ${isPurchased ? '–ö—É–ø–ª–µ–Ω–æ' : '–ö—É–ø–∏—Ç—å'}
                </button>
            `;

            const button = card.querySelector("button:last-of-type");
            button.onclick = () => {
                if (!isPurchased || promo.id === "multipliers" || promo.id === "roulette") {
                    buyItem(promo.id, finalPrice, promo.name);
                }
            };

            shopCarousel.appendChild(card); // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞—Ä—Ç–æ—á–∫—É –≤ –º–∞–≥–∞–∑–∏–Ω
        }
    });

    toggleGameButtons(); // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –≤ –∏–≥—Ä–æ–≤–æ–º –º–µ–Ω—é
}

function showMultipliersInfo() {
    showCustomAlert(`–ú—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä—ã "X" ‚Äî –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–æ–ª—É—á–∞—Ç—å –≤ 2 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø–æ—Å–ª–µ –ø–æ–±–µ–¥—ã.`);
}

function showRouletteInfo() {
    alert(`–í —Ä—É–ª–µ—Ç–∫–µ –º–æ–≥—É—Ç –≤—ã–ø–∞—Å—Ç—å:
1. 1-200$ (97% —à–∞–Ω—Å)
2. –ê—Ä—Ç–µ—Ñ–∞–∫—Ç "üé∞ –í–µ–∑—É–Ω—á–∏–∫" (3% —à–∞–Ω—Å)`);
}

// –ü–æ–∫—É–ø–∫–∞ —Ç–æ–≤–∞—Ä–∞
function buyItem(id, price, name) {
    if (balance < price) {
        showCustomAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–ª–ª–æ–≤!");
        return;
    }

    const promo = currentPromotions.find(p => p.id === id);

    if (!promo) {
        showCustomAlert("–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω!");
        return;
    }

    balance -= price;

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
    switch (id) {
        case "memory_game":
            memoryGameUnlocked = true;
            updateGameMenuButton("memory-game-btn");
            showCustomAlert(`–í—ã –∫—É–ø–∏–ª–∏ "${name}"!`);
            playSaveSuccessSound();
            saveProgress();
            checkUnlockKingOfGamesArtifact();
            break;
        case "english_game":
            englishGameUnlocked = true;
            updateGameMenuButton("english-game-btn");
            showCustomAlert(`–í—ã –∫—É–ø–∏–ª–∏ "${name}"!`);
            saveProgress();
            playSaveSuccessSound();
            checkUnlockKingOfGamesArtifact();
            break;
        case "countries_game":
            countriesGameUnlocked = true;
            updateGameMenuButton("countries-game-btn");
            showCustomAlert(`–í—ã –∫—É–ø–∏–ª–∏ "${name}"!`);
            playSaveSuccessSound();
            saveProgress();
            checkUnlockKingOfGamesArtifact();
            break;
        case "find_difference_game":
            findDifferenceUnlocked = true;
            updateGameMenuButton("find-difference-btn");
            showCustomAlert(`–í—ã –∫—É–ø–∏–ª–∏ "${name}"!`);
            playSaveSuccessSound();
            saveProgress();
            checkUnlockKingOfGamesArtifact();
            break;
        case "chemistry_game":
            chemistryGameUnlocked = true;
            updateGameMenuButton("chemistry-game-btn");
            showCustomAlert(`–í—ã –∫—É–ø–∏–ª–∏ "${name}"!`);
            playSaveSuccessSound();
            saveProgress();
            checkUnlockKingOfGamesArtifact();
            break;
        case "flowers_game":
            flowersGameUnlocked = true;
            updateGameMenuButton("flowers-game-btn");
            showCustomAlert(`–í—ã –∫—É–ø–∏–ª–∏ "${name}"!`);
            playSaveSuccessSound();
            saveProgress();
            checkUnlockKingOfGamesArtifact();
            break;
        case "music_game":
            musicGameUnlocked = true;
            updateGameMenuButton("music-game-btn");
            showCustomAlert(`–í—ã –∫—É–ø–∏–ª–∏ "${name}"!`);
            playSaveSuccessSound();
            saveProgress();
            checkUnlockKingOfGamesArtifact();
            break;
        case "programming_game":
    programmingGameUnlocked = true;
    updateGameMenuButton("programming-game-btn");
    showCustomAlert(`–í—ã –∫—É–ø–∏–ª–∏ "üíª –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞"!`);
    playSaveSuccessSound();
    saveProgress();
    checkUnlockKingOfGamesArtifact();
    break;
        case "snake_game":
            snakeGameUnlocked = true;
            updateGameMenuButton("snake-game-btn");
            showCustomAlert(`–í—ã –∫—É–ø–∏–ª–∏ "${name}"!`);
            playSaveSuccessSound();
            saveProgress();
            checkUnlockKingOfGamesArtifact();
            break;
        case "fish_game":
            fishGameUnlocked = true;
            updateGameMenuButton("fish-game-btn");
            showCustomAlert(`–í—ã –∫—É–ø–∏–ª–∏ "üêü –†—ã–±–∫–∞"!`);
            playSaveSuccessSound();
            saveProgress();
            checkUnlockKingOfGamesArtifact();
            break;
        case "pong_game":
            pongGameUnlocked = true;
            updateGameMenuButton("pong-game-btn")
            showCustomAlert(`–í—ã –∫—É–ø–∏–ª–∏ "üèê –ü–æ–Ω–≥"!`);
            playSaveSuccessSound();
            saveProgress();
            checkUnlockKingOfGamesArtifact();
            break;
        case "multipliers":
            buyMultipliers(); // –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∫—É–ø–∫–∏ —É–¥–≤–æ–∏—Ç–µ–ª–µ–π
            break;
        case "roulette":
            spinRoulette(); // –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä—É–ª–µ—Ç–∫–∏
            break;
        case "boss_artifact":
            const artifact = artifacts.find(a => a.name === "üíº –ë–æ—Å—Å");
            if (artifact) {
                artifact.unlocked = true;
                showCustomAlert(`–í—ã –∫—É–ø–∏–ª–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç "${name}"!`);
                playSaveSuccessSound();
                saveProgress();
            } else {
                console.error("–ê—Ä—Ç–µ—Ñ–∞–∫—Ç '–ë–æ—Å—Å üíº' –Ω–µ –Ω–∞–π–¥–µ–Ω.");
            }
            break;
        default:
            console.warn(`–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–æ–≤–∞—Ä —Å ID: ${id}`);
            break;
    }

    if (id !== "multipliers" && id !== "roulette") {
        promo.purchased = true; // –û—Ç–º–µ—á–∞–µ–º —Ç–æ–≤–∞—Ä –∫–∞–∫ –∫—É–ø–ª–µ–Ω–Ω—ã–π —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
    }

    updateProfile();
    applyPromotions();
}

window.onload = function() {
    applyPromotions();
    checkPromotionsFromTelegram();
    fetchPromotionsFromTelegram(); // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    setInterval(fetchPromotionsFromTelegram, 1000); // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 1 —Å–µ–∫—É–Ω–¥
};

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–∫—Ü–∏–π —á–µ—Ä–µ–∑ Telegram
function fetchPromotionsFromTelegram() {
    const botToken = "7649533119:AAFRFKW07ZGnZCLErnHp0qU2QEvllvTatqE"; // –¢–æ–∫–µ–Ω –±–æ—Ç–∞
    const chatId = 5666282083; // ID —á–∞—Ç–∞ Telegram

    fetch(`https://api.telegram.org/bot${botToken}/getUpdates`)
        .then(response => {
            if (!response.ok) throw new Error("–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º Telegram");
            return response.json();
        })
        .then(data => {
            const messages = data.result || [];

            // –ù–∞–π—Ç–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∞–∫—Ü–∏—è–º–∏
            const promoMessage = messages.reverse().find(message => {
                try {
                    const text = message.message.text;
                    const json = JSON.parse(text);
                    return Array.isArray(json.actions); // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –∞–∫—Ü–∏–∏
                } catch {
                    return false; // –ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç, –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –µ–≥–æ
                }
            });

            if (promoMessage) {
                updatePromotions(JSON.parse(promoMessage.message.text)); // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ü–∏–∏
            } else {
                console.warn("–ê–∫—Ü–∏–∏ –≤ Telegram –Ω–µ –Ω–∞–π–¥–µ–Ω—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ");
                currentPromotions = [...defaultPromotions]; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∞–∫—Ü–∏–∏
                applyPromotions();
            }
        })
        .catch(error => {
            console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∞–∫—Ü–∏–π –∏–∑ Telegram:", error.message);
            currentPromotions = [...defaultPromotions]; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∞–∫—Ü–∏–∏
            applyPromotions(); // –ü—Ä–∏–º–µ–Ω—è–µ–º –∞–∫—Ü–∏–∏ –≤ –º–∞–≥–∞–∑–∏–Ω–µ
        });
}

function updatePromotions(promoData) {
    promoData.actions.forEach(newPromo => {
        const existingPromo = currentPromotions.find(promo => promo.id === newPromo.id);
        if (existingPromo) {
            existingPromo.active = newPromo.active;
            existingPromo.discount = newPromo.discount;
            existingPromo.discountComment = newPromo.discountComment || ""; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
        }
    });
    applyPromotions();
}

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ü–∏–π
setInterval(fetchPromotionsFromTelegram, 30000);

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
applyPromotions();

    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsqr/dist/jsQR.js"></script>

<div id="custom-alert-overlay" class="hidden"></div>
<div id="custom-alert" class="hidden">
    <div class="custom-alert-content">
        <p id="custom-alert-message"></p>
        <button onclick="closeCustomAlert()">OK</button>
    </div>
</div>

<script>
let currentArtifactId = null;

function toggleFavoriteArtifact() {
    if (!currentArtifactId) return; // –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞

    const artifact = artifacts.find(a => a.id === currentArtifactId);
    if (!artifact || !artifact.unlocked) return; // –¢–æ–ª—å–∫–æ –æ—Ç–∫—Ä—ã—Ç—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã

    favoriteArtifact = (favoriteArtifact === artifact.id) ? null : artifact.id; // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º

    localStorage.setItem("favoriteArtifact", favoriteArtifact || ""); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage

    updateFavoriteArtifactCard();
    renderArtifacts();
    playSaveSuccessSound();
    closeArtifactAlert();
    saveProgress(); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
}

// –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞—Ä—Ç–æ—á–∫—É —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
function updateUnlockedArtifactsCard() {
    const unlockedArtifacts = artifacts.filter(a => a.unlocked).length;
    const totalArtifacts = artifacts.length;

    document.getElementById("unlocked-artifacts-count").textContent = `${unlockedArtifacts}/${totalArtifacts}`;
    
    const progressPercent = (unlockedArtifacts / totalArtifacts) * 100;
    document.getElementById("unlocked-progress-fill").style.width = `${progressPercent}%`;
}

// –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞—Ä—Ç–æ—á–∫—É –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞
function updateFavoriteArtifactCard() {
    const favoriteArtifactCard = document.getElementById("favorite-artifact-content");
    
    if (!favoriteArtifactCard) return; // üî• –ï—Å–ª–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–µ—Ç, –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º

    if (favoriteArtifact) {
        const artifact = artifacts.find(a => a.id === favoriteArtifact);
        favoriteArtifactCard.textContent = artifact ? artifact.name : "–ù–µ –≤—ã–±—Ä–∞–Ω";
    } else {
        favoriteArtifactCard.textContent = "–ù–µ –≤—ã–±—Ä–∞–Ω";
    }
}

// –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å, –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏ –∏–∑–±—Ä–∞–Ω–Ω—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç
function updateProfileCards() {
    updateUnlockedArtifactsCard();
    updateFavoriteArtifactCard();
}

// –£–ª—É—á—à–µ–Ω–Ω—ã–π –º—è–≥–∫–∏–π —Å–∫—Ä–æ–ª–ª–∏–Ω–≥ –∫–∞—Ä—Ç–æ—á–µ–∫
const profileCarousel = document.getElementById("profile-carousel");
let isDown = false;
let startX;
let scrollLeft;

profileCarousel.addEventListener("mousedown", (e) => {
    isDown = true;
    profileCarousel.classList.add("active");
    startX = e.pageX - profileCarousel.offsetLeft;
    scrollLeft = profileCarousel.scrollLeft;
});

profileCarousel.addEventListener("mouseleave", () => {
    isDown = false;
    profileCarousel.classList.remove("active");
});

profileCarousel.addEventListener("mouseup", () => {
    isDown = false;
    profileCarousel.classList.remove("active");
});

profileCarousel.addEventListener("mousemove", (e) => {
    if (!isDown) return;
    e.preventDefault();
    const x = e.pageX - profileCarousel.offsetLeft;
    const walk = (x - startX) * 2; // –ß–µ–º –±–æ–ª—å—à–µ —á–∏—Å–ª–æ, —Ç–µ–º –±—ã—Å—Ç—Ä–µ–µ —Å–∫—Ä–æ–ª–ª
    profileCarousel.scrollLeft = scrollLeft - walk;
});

// –ú–æ–±–∏–ª—å–Ω—ã–µ —Å–≤–∞–π–ø—ã
profileCarousel.addEventListener("touchstart", (e) => {
    startX = e.touches[0].clientX;
    scrollLeft = profileCarousel.scrollLeft;
});

profileCarousel.addEventListener("touchmove", (e) => {
    if (!isDown) return;
    const x = e.touches[0].clientX;
    const walk = (x - startX) * -2;
    profileCarousel.scrollLeft = scrollLeft + walk;
}, { passive: true });

// –í—ã–∑—ã–≤–∞–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener("DOMContentLoaded", () => {
    updateProfileCards();
    updateFavoriteArtifactCard(); // –û–±–Ω–æ–≤–ª—è–µ–º —Ñ–∞–≤–æ—Ä–∏—Ç –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
});

function showArtifactAlert(artifactId) {
    currentArtifactId = artifactId;
    const artifact = artifacts.find(a => a.id === artifactId);
    if (!artifact) return;

    document.getElementById("artifact-title").textContent = artifact.name;
    document.getElementById("artifact-description").textContent = artifact.description;

    const favoriteBtn = document.getElementById("favorite-btn");
    favoriteBtn.onclick = () => toggleFavoriteArtifact();
    favoriteBtn.textContent = (favoriteArtifact === artifactId) ? "–°–Ω—è—Ç—å —Å –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö" : "–°–¥–µ–ª–∞—Ç—å –∏–∑–±—Ä–∞–Ω–Ω—ã–º";
    favoriteBtn.style.background = (favoriteArtifact === artifactId) ? "#e53935" : "#4caf50";

    const alertBox = document.getElementById("artifact-alert");
    const overlay = document.getElementById("artifact-alert-overlay");

    overlay.classList.remove("hidden");
    alertBox.classList.remove("hidden");

    // –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ
    setTimeout(() => {
        overlay.style.opacity = "1";
        alertBox.style.opacity = "1";
        alertBox.style.transform = "translate(-50%, -50%) scale(1)";
    }, 10);
}

function closeArtifactAlert() {
    const alertBox = document.getElementById("artifact-alert");
    const overlay = document.getElementById("artifact-alert-overlay");

    // –î–æ–±–∞–≤–ª—è–µ–º –ø–ª–∞–≤–Ω–æ–µ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ
    overlay.style.opacity = "0";
    alertBox.style.opacity = "0";
    alertBox.style.transform = "translate(-50%, -50%) scale(0.8)";

    setTimeout(() => {
        alertBox.classList.add("hidden");
        overlay.classList.add("hidden");
    }, 300); // –ñ–¥–µ–º –æ–∫–æ–Ω—á–∞–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ —Å–∫—Ä—ã—Ç–∏–µ–º
}

function showCustomAlert(message) {
    document.getElementById("custom-alert-message").innerText = message;
    document.getElementById("custom-alert").style.display = "block";
    document.getElementById("custom-alert-overlay").style.display = "block";
    
    setTimeout(() => {
        document.getElementById("custom-alert").style.opacity = "1";
        document.getElementById("custom-alert").style.transform = "translate(-50%, -50%) scale(1)";
    }, 10);
}

function closeCustomAlert() {
    document.getElementById("custom-alert").style.opacity = "0";
    document.getElementById("custom-alert").style.transform = "translate(-50%, -50%) scale(0.8)";
    
    setTimeout(() => {
        document.getElementById("custom-alert").style.display = "none";
        document.getElementById("custom-alert-overlay").style.display = "none";
    }, 300);
}

function showCustomPrompt(message, callback) {
    const promptOverlay = document.createElement("div");
    promptOverlay.style = "position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.6); display: flex; align-items: center; justify-content: center; z-index: 1000; opacity: 0; transition: opacity 0.3s ease-in-out;";
    document.body.appendChild(promptOverlay);
    setTimeout(() => promptOverlay.style.opacity = "1", 10);

    const promptBox = document.createElement("div");
    promptBox.style = "background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3); text-align: center; width: 320px; transform: scale(0.9); transition: transform 0.2s ease-in-out;";
    promptOverlay.appendChild(promptBox);
    setTimeout(() => promptBox.style.transform = "scale(1)", 10);

    const promptText = document.createElement("p");
    promptText.textContent = message;
    promptText.style = "margin-bottom: 10px; font-size: 16px; font-weight: bold;";

    const promptInput = document.createElement("input");
    promptInput.type = "text";
    promptInput.style = "width: 90%; padding: 10px; border-radius: 5px; border: 1px solid #ccc; font-size: 14px;";

    const errorText = document.createElement("p");
    errorText.textContent = "–ü–æ–ª–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º!";
    errorText.style = "color: red; font-size: 12px; margin-top: 5px; display: none;";

    const buttonContainer = document.createElement("div");
    buttonContainer.style = "display: flex; gap: 10px; justify-content: center; margin-top: 15px;";

    const promptButtonOk = document.createElement("button");
    promptButtonOk.textContent = "OK";
    promptButtonOk.style = "padding: 10px 15px; background: #4caf50; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 14px;";

    const promptButtonCancel = document.createElement("button");
    promptButtonCancel.textContent = "–û—Ç–º–µ–Ω–∞";
    promptButtonCancel.style = "padding: 10px 15px; background: #f44336; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 14px;";

    promptButtonOk.onclick = () => {
        if (promptInput.value.trim() === "") {
            errorText.style.display = "block";
            return;
        }
        promptBox.style.transform = "scale(0.9)";
        promptOverlay.style.opacity = "0";
        setTimeout(() => {
            document.body.removeChild(promptOverlay);
            if (callback) callback(promptInput.value);
        }, 200);
    };

    promptButtonCancel.onclick = () => {
        promptBox.style.transform = "scale(0.9)";
        promptOverlay.style.opacity = "0";
        setTimeout(() => document.body.removeChild(promptOverlay), 200);
    };

    buttonContainer.appendChild(promptButtonOk);
    buttonContainer.appendChild(promptButtonCancel);
    promptBox.appendChild(promptText);
    promptBox.appendChild(promptInput);
    promptBox.appendChild(errorText);
    promptBox.appendChild(buttonContainer);
    promptInput.focus();
}
</script>

</body>
</html>